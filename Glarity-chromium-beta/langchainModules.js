"use strict";(()=>{var Ty=Object.create;var _o=Object.defineProperty;var Iy=Object.getOwnPropertyDescriptor;var Cy=Object.getOwnPropertyNames;var Sy=Object.getPrototypeOf,jy=Object.prototype.hasOwnProperty;var ti=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var R=(t,e)=>()=>(t&&(e=t(t=0)),e);var N=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),dt=(t,e)=>{for(var r in e)_o(t,r,{get:e[r],enumerable:!0})},ky=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Cy(e))!jy.call(t,i)&&i!==r&&_o(t,i,{get:()=>e[i],enumerable:!(n=Iy(e,i))||n.enumerable});return t};var ge=(t,e,r)=>(r=t!=null?Ty(Sy(t)):{},ky(e||!t||!t.__esModule?_o(r,"default",{value:t,enumerable:!0}):r,t));var vo=N((KA,ac)=>{"use strict";ac.exports=function(e,r){return function(){for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];return e.apply(r,i)}}});var Be=N(($A,lc)=>{"use strict";var Ry=vo(),Jt=Object.prototype.toString;function Ao(t){return Array.isArray(t)}function xo(t){return typeof t>"u"}function Ny(t){return t!==null&&!xo(t)&&t.constructor!==null&&!xo(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function sc(t){return Jt.call(t)==="[object ArrayBuffer]"}function My(t){return Jt.call(t)==="[object FormData]"}function Ly(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&sc(t.buffer),e}function Dy(t){return typeof t=="string"}function qy(t){return typeof t=="number"}function oc(t){return t!==null&&typeof t=="object"}function na(t){if(Jt.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function Fy(t){return Jt.call(t)==="[object Date]"}function Uy(t){return Jt.call(t)==="[object File]"}function Vy(t){return Jt.call(t)==="[object Blob]"}function uc(t){return Jt.call(t)==="[object Function]"}function zy(t){return oc(t)&&uc(t.pipe)}function By(t){return Jt.call(t)==="[object URLSearchParams]"}function Ky(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function $y(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Po(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),Ao(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function Oo(){var t={};function e(i,a){na(t[a])&&na(i)?t[a]=Oo(t[a],i):na(i)?t[a]=Oo({},i):Ao(i)?t[a]=i.slice():t[a]=i}for(var r=0,n=arguments.length;r<n;r++)Po(arguments[r],e);return t}function Zy(t,e,r){return Po(e,function(i,a){r&&typeof i=="function"?t[a]=Ry(i,r):t[a]=i}),t}function Hy(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}lc.exports={isArray:Ao,isArrayBuffer:sc,isBuffer:Ny,isFormData:My,isArrayBufferView:Ly,isString:Dy,isNumber:qy,isObject:oc,isPlainObject:na,isUndefined:xo,isDate:Fy,isFile:Uy,isBlob:Vy,isFunction:uc,isStream:zy,isURLSearchParams:By,isStandardBrowserEnv:$y,forEach:Po,merge:Oo,extend:Zy,trim:Ky,stripBOM:Hy}});var Eo=N((ZA,dc)=>{"use strict";var tn=Be();function cc(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}dc.exports=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(tn.isURLSearchParams(r))i=r.toString();else{var a=[];tn.forEach(r,function(u,l){u===null||typeof u>"u"||(tn.isArray(u)?l=l+"[]":u=[u],tn.forEach(u,function(d){tn.isDate(d)?d=d.toISOString():tn.isObject(d)&&(d=JSON.stringify(d)),a.push(cc(l)+"="+cc(d))}))}),i=a.join("&")}if(i){var s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}});var hc=N((HA,pc)=>{"use strict";var Jy=Be();function ia(){this.handlers=[]}ia.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};ia.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};ia.prototype.forEach=function(e){Jy.forEach(this.handlers,function(n){n!==null&&e(n)})};pc.exports=ia});var mc=N((JA,fc)=>{"use strict";var Yy=Be();fc.exports=function(e,r){Yy.forEach(e,function(i,a){a!==r&&a.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[a])})}});var To=N((YA,yc)=>{"use strict";yc.exports=function(e,r,n,i,a){return e.config=r,n&&(e.code=n),e.request=i,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}});var Io=N((WA,gc)=>{"use strict";gc.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}});var Co=N((GA,bc)=>{"use strict";var Wy=To();bc.exports=function(e,r,n,i,a){var s=new Error(e);return Wy(s,r,n,i,a)}});var _c=N((QA,wc)=>{"use strict";var Gy=Co();wc.exports=function(e,r,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):r(Gy("Request failed with status code "+n.status,n.config,null,n.request,n))}});var xc=N((XA,vc)=>{"use strict";var aa=Be();vc.exports=aa.isStandardBrowserEnv()?function(){return{write:function(r,n,i,a,s,o){var u=[];u.push(r+"="+encodeURIComponent(n)),aa.isNumber(i)&&u.push("expires="+new Date(i).toGMTString()),aa.isString(a)&&u.push("path="+a),aa.isString(s)&&u.push("domain="+s),o===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var Ac=N((eP,Oc)=>{"use strict";Oc.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}});var Ec=N((tP,Pc)=>{"use strict";Pc.exports=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}});var Ic=N((rP,Tc)=>{"use strict";var Qy=Ac(),Xy=Ec();Tc.exports=function(e,r){return e&&!Qy(r)?Xy(e,r):r}});var Sc=N((nP,Cc)=>{"use strict";var So=Be(),eg=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];Cc.exports=function(e){var r={},n,i,a;return e&&So.forEach(e.split(`
`),function(o){if(a=o.indexOf(":"),n=So.trim(o.substr(0,a)).toLowerCase(),i=So.trim(o.substr(a+1)),n){if(r[n]&&eg.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([i]):r[n]=r[n]?r[n]+", "+i:i}}),r}});var Rc=N((iP,kc)=>{"use strict";var jc=Be();kc.exports=jc.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function i(a){var s=a;return e&&(r.setAttribute("href",s),s=r.href),r.setAttribute("href",s),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(s){var o=jc.isString(s)?i(s):s;return o.protocol===n.protocol&&o.host===n.host}}():function(){return function(){return!0}}()});var ri=N((aP,Nc)=>{"use strict";function jo(t){this.message=t}jo.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};jo.prototype.__CANCEL__=!0;Nc.exports=jo});var Ro=N((sP,Mc)=>{"use strict";var sa=Be(),tg=_c(),rg=xc(),ng=Eo(),ig=Ic(),ag=Sc(),sg=Rc(),ko=Co(),og=Io(),ug=ri();Mc.exports=function(e){return new Promise(function(n,i){var a=e.data,s=e.headers,o=e.responseType,u;function l(){e.cancelToken&&e.cancelToken.unsubscribe(u),e.signal&&e.signal.removeEventListener("abort",u)}sa.isFormData(a)&&delete s["Content-Type"];var c=new XMLHttpRequest;if(e.auth){var d=e.auth.username||"",y=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.Authorization="Basic "+btoa(d+":"+y)}var w=ig(e.baseURL,e.url);c.open(e.method.toUpperCase(),ng(w,e.params,e.paramsSerializer),!0),c.timeout=e.timeout;function h(){if(c){var P="getAllResponseHeaders"in c?ag(c.getAllResponseHeaders()):null,S=!o||o==="text"||o==="json"?c.responseText:c.response,I={data:S,status:c.status,statusText:c.statusText,headers:P,config:e,request:c};tg(function(v){n(v),l()},function(v){i(v),l()},I),c=null}}if("onloadend"in c?c.onloadend=h:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(h)},c.onabort=function(){c&&(i(ko("Request aborted",e,"ECONNABORTED",c)),c=null)},c.onerror=function(){i(ko("Network Error",e,null,c)),c=null},c.ontimeout=function(){var S=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",I=e.transitional||og;e.timeoutErrorMessage&&(S=e.timeoutErrorMessage),i(ko(S,e,I.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",c)),c=null},sa.isStandardBrowserEnv()){var _=(e.withCredentials||sg(w))&&e.xsrfCookieName?rg.read(e.xsrfCookieName):void 0;_&&(s[e.xsrfHeaderName]=_)}"setRequestHeader"in c&&sa.forEach(s,function(S,I){typeof a>"u"&&I.toLowerCase()==="content-type"?delete s[I]:c.setRequestHeader(I,S)}),sa.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),o&&o!=="json"&&(c.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&c.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(u=function(P){c&&(i(!P||P&&P.type?new ug("canceled"):P),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(u),e.signal&&(e.signal.aborted?u():e.signal.addEventListener("abort",u))),a||(a=null),c.send(a)})}});var ua=N((oP,qc)=>{"use strict";var Se=Be(),Lc=mc(),lg=To(),cg=Io(),dg={"Content-Type":"application/x-www-form-urlencoded"};function Dc(t,e){!Se.isUndefined(t)&&Se.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function pg(){var t;return typeof XMLHttpRequest<"u"?t=Ro():typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]"&&(t=Ro()),t}function hg(t,e,r){if(Se.isString(t))try{return(e||JSON.parse)(t),Se.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var oa={transitional:cg,adapter:pg(),transformRequest:[function(e,r){return Lc(r,"Accept"),Lc(r,"Content-Type"),Se.isFormData(e)||Se.isArrayBuffer(e)||Se.isBuffer(e)||Se.isStream(e)||Se.isFile(e)||Se.isBlob(e)?e:Se.isArrayBufferView(e)?e.buffer:Se.isURLSearchParams(e)?(Dc(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Se.isObject(e)||r&&r["Content-Type"]==="application/json"?(Dc(r,"application/json"),hg(e)):e}],transformResponse:[function(e){var r=this.transitional||oa.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,a=!n&&this.responseType==="json";if(a||i&&Se.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(a)throw s.name==="SyntaxError"?lg(s,this,"E_JSON_PARSE"):s}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Se.forEach(["delete","get","head"],function(e){oa.headers[e]={}});Se.forEach(["post","put","patch"],function(e){oa.headers[e]=Se.merge(dg)});qc.exports=oa});var Uc=N((uP,Fc)=>{"use strict";var fg=Be(),mg=ua();Fc.exports=function(e,r,n){var i=this||mg;return fg.forEach(n,function(s){e=s.call(i,e,r)}),e}});var No=N((lP,Vc)=>{"use strict";Vc.exports=function(e){return!!(e&&e.__CANCEL__)}});var Kc=N((cP,Bc)=>{"use strict";var zc=Be(),Mo=Uc(),yg=No(),gg=ua(),bg=ri();function Lo(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new bg("canceled")}Bc.exports=function(e){Lo(e),e.headers=e.headers||{},e.data=Mo.call(e,e.data,e.headers,e.transformRequest),e.headers=zc.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),zc.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||gg.adapter;return r(e).then(function(i){return Lo(e),i.data=Mo.call(e,i.data,i.headers,e.transformResponse),i},function(i){return yg(i)||(Lo(e),i&&i.response&&(i.response.data=Mo.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})}});var Do=N((dP,$c)=>{"use strict";var Ge=Be();$c.exports=function(e,r){r=r||{};var n={};function i(c,d){return Ge.isPlainObject(c)&&Ge.isPlainObject(d)?Ge.merge(c,d):Ge.isPlainObject(d)?Ge.merge({},d):Ge.isArray(d)?d.slice():d}function a(c){if(Ge.isUndefined(r[c])){if(!Ge.isUndefined(e[c]))return i(void 0,e[c])}else return i(e[c],r[c])}function s(c){if(!Ge.isUndefined(r[c]))return i(void 0,r[c])}function o(c){if(Ge.isUndefined(r[c])){if(!Ge.isUndefined(e[c]))return i(void 0,e[c])}else return i(void 0,r[c])}function u(c){if(c in r)return i(e[c],r[c]);if(c in e)return i(void 0,e[c])}var l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u};return Ge.forEach(Object.keys(e).concat(Object.keys(r)),function(d){var y=l[d]||a,w=y(d);Ge.isUndefined(w)&&y!==u||(n[d]=w)}),n}});var qo=N((pP,Zc)=>{Zc.exports={version:"0.26.1"}});var Yc=N((hP,Jc)=>{"use strict";var wg=qo().version,Fo={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Fo[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var Hc={};Fo.transitional=function(e,r,n){function i(a,s){return"[Axios v"+wg+"] Transitional option '"+a+"'"+s+(n?". "+n:"")}return function(a,s,o){if(e===!1)throw new Error(i(s," has been removed"+(r?" in "+r:"")));return r&&!Hc[s]&&(Hc[s]=!0),e?e(a,s,o):!0}};function _g(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var a=n[i],s=e[a];if(s){var o=t[a],u=o===void 0||s(o,a,t);if(u!==!0)throw new TypeError("option "+a+" must be "+u);continue}if(r!==!0)throw Error("Unknown option "+a)}}Jc.exports={assertOptions:_g,validators:Fo}});var td=N((fP,ed)=>{"use strict";var Qc=Be(),vg=Eo(),Wc=hc(),Gc=Kc(),la=Do(),Xc=Yc(),rn=Xc.validators;function ni(t){this.defaults=t,this.interceptors={request:new Wc,response:new Wc}}ni.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=la(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&Xc.assertOptions(n,{silentJSONParsing:rn.transitional(rn.boolean),forcedJSONParsing:rn.transitional(rn.boolean),clarifyTimeoutError:rn.transitional(rn.boolean)},!1);var i=[],a=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(r)===!1||(a=a&&w.synchronous,i.unshift(w.fulfilled,w.rejected))});var s=[];this.interceptors.response.forEach(function(w){s.push(w.fulfilled,w.rejected)});var o;if(!a){var u=[Gc,void 0];for(Array.prototype.unshift.apply(u,i),u=u.concat(s),o=Promise.resolve(r);u.length;)o=o.then(u.shift(),u.shift());return o}for(var l=r;i.length;){var c=i.shift(),d=i.shift();try{l=c(l)}catch(y){d(y);break}}try{o=Gc(l)}catch(y){return Promise.reject(y)}for(;s.length;)o=o.then(s.shift(),s.shift());return o};ni.prototype.getUri=function(e){return e=la(this.defaults,e),vg(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};Qc.forEach(["delete","get","head","options"],function(e){ni.prototype[e]=function(r,n){return this.request(la(n||{},{method:e,url:r,data:(n||{}).data}))}});Qc.forEach(["post","put","patch"],function(e){ni.prototype[e]=function(r,n,i){return this.request(la(i||{},{method:e,url:r,data:n}))}});ed.exports=ni});var nd=N((mP,rd)=>{"use strict";var xg=ri();function nn(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var r=this;this.promise.then(function(n){if(r._listeners){var i,a=r._listeners.length;for(i=0;i<a;i++)r._listeners[i](n);r._listeners=null}}),this.promise.then=function(n){var i,a=new Promise(function(s){r.subscribe(s),i=s}).then(n);return a.cancel=function(){r.unsubscribe(i)},a},t(function(i){r.reason||(r.reason=new xg(i),e(r.reason))})}nn.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};nn.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};nn.prototype.unsubscribe=function(e){if(this._listeners){var r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}};nn.source=function(){var e,r=new nn(function(i){e=i});return{token:r,cancel:e}};rd.exports=nn});var ad=N((yP,id)=>{"use strict";id.exports=function(e){return function(n){return e.apply(null,n)}}});var od=N((gP,sd)=>{"use strict";var Og=Be();sd.exports=function(e){return Og.isObject(e)&&e.isAxiosError===!0}});var cd=N((bP,Uo)=>{"use strict";var ud=Be(),Ag=vo(),ca=td(),Pg=Do(),Eg=ua();function ld(t){var e=new ca(t),r=Ag(ca.prototype.request,e);return ud.extend(r,ca.prototype,e),ud.extend(r,e),r.create=function(i){return ld(Pg(t,i))},r}var bt=ld(Eg);bt.Axios=ca;bt.Cancel=ri();bt.CancelToken=nd();bt.isCancel=No();bt.VERSION=qo().version;bt.all=function(e){return Promise.all(e)};bt.spread=ad();bt.isAxiosError=od();Uo.exports=bt;Uo.exports.default=bt});var Vo=N((wP,dd)=>{dd.exports=cd()});var Ko=N(pt=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});pt.RequiredError=pt.BaseAPI=pt.COLLECTION_FORMATS=pt.BASE_PATH=void 0;var Tg=Vo();pt.BASE_PATH="https://api.openai.com/v1".replace(/\/+$/,"");pt.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"	",pipes:"|"};var zo=class{constructor(e,r=pt.BASE_PATH,n=Tg.default){this.basePath=r,this.axios=n,e&&(this.configuration=e,this.basePath=e.basePath||this.basePath)}};pt.BaseAPI=zo;var Bo=class extends Error{constructor(e,r){super(r),this.field=e,this.name="RequiredError"}};pt.RequiredError=Bo});var pd=N(fe=>{"use strict";var Zo=fe&&fe.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(d){s(d)}}function u(c){try{l(n.throw(c))}catch(d){s(d)}}function l(c){c.done?a(c.value):i(c.value).then(o,u)}l((n=n.apply(t,e||[])).next())})};Object.defineProperty(fe,"__esModule",{value:!0});fe.createRequestFunction=fe.toPathString=fe.serializeDataIfNeeded=fe.setSearchParams=fe.setOAuthToObject=fe.setBearerAuthToObject=fe.setBasicAuthToObject=fe.setApiKeyToObject=fe.assertParamExists=fe.DUMMY_BASE_URL=void 0;var Ig=Ko();fe.DUMMY_BASE_URL="https://example.com";fe.assertParamExists=function(t,e,r){if(r==null)throw new Ig.RequiredError(e,`Required parameter ${e} was null or undefined when calling ${t}.`)};fe.setApiKeyToObject=function(t,e,r){return Zo(this,void 0,void 0,function*(){if(r&&r.apiKey){let n=typeof r.apiKey=="function"?yield r.apiKey(e):yield r.apiKey;t[e]=n}})};fe.setBasicAuthToObject=function(t,e){e&&(e.username||e.password)&&(t.auth={username:e.username,password:e.password})};fe.setBearerAuthToObject=function(t,e){return Zo(this,void 0,void 0,function*(){if(e&&e.accessToken){let r=typeof e.accessToken=="function"?yield e.accessToken():yield e.accessToken;t.Authorization="Bearer "+r}})};fe.setOAuthToObject=function(t,e,r,n){return Zo(this,void 0,void 0,function*(){if(n&&n.accessToken){let i=typeof n.accessToken=="function"?yield n.accessToken(e,r):yield n.accessToken;t.Authorization="Bearer "+i}})};function $o(t,e,r=""){e!=null&&(typeof e=="object"?Array.isArray(e)?e.forEach(n=>$o(t,n,r)):Object.keys(e).forEach(n=>$o(t,e[n],`${r}${r!==""?".":""}${n}`)):t.has(r)?t.append(r,e):t.set(r,e))}fe.setSearchParams=function(t,...e){let r=new URLSearchParams(t.search);$o(r,e),t.search=r.toString()};fe.serializeDataIfNeeded=function(t,e,r){let n=typeof t!="string";return(n&&r&&r.isJsonMime?r.isJsonMime(e.headers["Content-Type"]):n)?JSON.stringify(t!==void 0?t:{}):t||""};fe.toPathString=function(t){return t.pathname+t.search+t.hash};fe.createRequestFunction=function(t,e,r,n){return(i=e,a=r)=>{let s=Object.assign(Object.assign({},t.options),{url:(n?.basePath||a)+t.url});return i.request(s)}}});var hd=N(Z=>{"use strict";var B=Z&&Z.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(d){s(d)}}function u(c){try{l(n.throw(c))}catch(d){s(d)}}function l(c){c.done?a(c.value):i(c.value).then(o,u)}l((n=n.apply(t,e||[])).next())})};Object.defineProperty(Z,"__esModule",{value:!0});Z.OpenAIApi=Z.OpenAIApiFactory=Z.OpenAIApiFp=Z.OpenAIApiAxiosParamCreator=Z.CreateImageRequestResponseFormatEnum=Z.CreateImageRequestSizeEnum=Z.ChatCompletionResponseMessageRoleEnum=Z.ChatCompletionRequestMessageRoleEnum=void 0;var ue=Vo(),A=pd(),se=Ko();Z.ChatCompletionRequestMessageRoleEnum={System:"system",User:"user",Assistant:"assistant",Function:"function"};Z.ChatCompletionResponseMessageRoleEnum={System:"system",User:"user",Assistant:"assistant",Function:"function"};Z.CreateImageRequestSizeEnum={_256x256:"256x256",_512x512:"512x512",_1024x1024:"1024x1024"};Z.CreateImageRequestResponseFormatEnum={Url:"url",B64Json:"b64_json"};Z.OpenAIApiAxiosParamCreator=function(t){return{cancelFineTune:(e,r={})=>B(this,void 0,void 0,function*(){A.assertParamExists("cancelFineTune","fineTuneId",e);let n="/fine-tunes/{fine_tune_id}/cancel".replace("{fine_tune_id}",encodeURIComponent(String(e))),i=new URL(n,A.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"POST"},a),r),o={},u={};A.setSearchParams(i,u);let l=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),l),r.headers),{url:A.toPathString(i),options:s}}),createAnswer:(e,r={})=>B(this,void 0,void 0,function*(){A.assertParamExists("createAnswer","createAnswerRequest",e);let n="/answers",i=new URL(n,A.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"POST"},a),r),o={},u={};o["Content-Type"]="application/json",A.setSearchParams(i,u);let l=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),l),r.headers),s.data=A.serializeDataIfNeeded(e,s,t),{url:A.toPathString(i),options:s}}),createChatCompletion:(e,r={})=>B(this,void 0,void 0,function*(){A.assertParamExists("createChatCompletion","createChatCompletionRequest",e);let n="/chat/completions",i=new URL(n,A.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"POST"},a),r),o={},u={};o["Content-Type"]="application/json",A.setSearchParams(i,u);let l=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),l),r.headers),s.data=A.serializeDataIfNeeded(e,s,t),{url:A.toPathString(i),options:s}}),createClassification:(e,r={})=>B(this,void 0,void 0,function*(){A.assertParamExists("createClassification","createClassificationRequest",e);let n="/classifications",i=new URL(n,A.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"POST"},a),r),o={},u={};o["Content-Type"]="application/json",A.setSearchParams(i,u);let l=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),l),r.headers),s.data=A.serializeDataIfNeeded(e,s,t),{url:A.toPathString(i),options:s}}),createCompletion:(e,r={})=>B(this,void 0,void 0,function*(){A.assertParamExists("createCompletion","createCompletionRequest",e);let n="/completions",i=new URL(n,A.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"POST"},a),r),o={},u={};o["Content-Type"]="application/json",A.setSearchParams(i,u);let l=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),l),r.headers),s.data=A.serializeDataIfNeeded(e,s,t),{url:A.toPathString(i),options:s}}),createEdit:(e,r={})=>B(this,void 0,void 0,function*(){A.assertParamExists("createEdit","createEditRequest",e);let n="/edits",i=new URL(n,A.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"POST"},a),r),o={},u={};o["Content-Type"]="application/json",A.setSearchParams(i,u);let l=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),l),r.headers),s.data=A.serializeDataIfNeeded(e,s,t),{url:A.toPathString(i),options:s}}),createEmbedding:(e,r={})=>B(this,void 0,void 0,function*(){A.assertParamExists("createEmbedding","createEmbeddingRequest",e);let n="/embeddings",i=new URL(n,A.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"POST"},a),r),o={},u={};o["Content-Type"]="application/json",A.setSearchParams(i,u);let l=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),l),r.headers),s.data=A.serializeDataIfNeeded(e,s,t),{url:A.toPathString(i),options:s}}),createFile:(e,r,n={})=>B(this,void 0,void 0,function*(){A.assertParamExists("createFile","file",e),A.assertParamExists("createFile","purpose",r);let i="/files",a=new URL(i,A.DUMMY_BASE_URL),s;t&&(s=t.baseOptions);let o=Object.assign(Object.assign({method:"POST"},s),n),u={},l={},c=new(t&&t.formDataCtor||FormData);e!==void 0&&c.append("file",e),r!==void 0&&c.append("purpose",r),u["Content-Type"]="multipart/form-data",A.setSearchParams(a,l);let d=s&&s.headers?s.headers:{};return o.headers=Object.assign(Object.assign(Object.assign(Object.assign({},u),c.getHeaders()),d),n.headers),o.data=c,{url:A.toPathString(a),options:o}}),createFineTune:(e,r={})=>B(this,void 0,void 0,function*(){A.assertParamExists("createFineTune","createFineTuneRequest",e);let n="/fine-tunes",i=new URL(n,A.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"POST"},a),r),o={},u={};o["Content-Type"]="application/json",A.setSearchParams(i,u);let l=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),l),r.headers),s.data=A.serializeDataIfNeeded(e,s,t),{url:A.toPathString(i),options:s}}),createImage:(e,r={})=>B(this,void 0,void 0,function*(){A.assertParamExists("createImage","createImageRequest",e);let n="/images/generations",i=new URL(n,A.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"POST"},a),r),o={},u={};o["Content-Type"]="application/json",A.setSearchParams(i,u);let l=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),l),r.headers),s.data=A.serializeDataIfNeeded(e,s,t),{url:A.toPathString(i),options:s}}),createImageEdit:(e,r,n,i,a,s,o,u={})=>B(this,void 0,void 0,function*(){A.assertParamExists("createImageEdit","image",e),A.assertParamExists("createImageEdit","prompt",r);let l="/images/edits",c=new URL(l,A.DUMMY_BASE_URL),d;t&&(d=t.baseOptions);let y=Object.assign(Object.assign({method:"POST"},d),u),w={},h={},_=new(t&&t.formDataCtor||FormData);e!==void 0&&_.append("image",e),n!==void 0&&_.append("mask",n),r!==void 0&&_.append("prompt",r),i!==void 0&&_.append("n",i),a!==void 0&&_.append("size",a),s!==void 0&&_.append("response_format",s),o!==void 0&&_.append("user",o),w["Content-Type"]="multipart/form-data",A.setSearchParams(c,h);let P=d&&d.headers?d.headers:{};return y.headers=Object.assign(Object.assign(Object.assign(Object.assign({},w),_.getHeaders()),P),u.headers),y.data=_,{url:A.toPathString(c),options:y}}),createImageVariation:(e,r,n,i,a,s={})=>B(this,void 0,void 0,function*(){A.assertParamExists("createImageVariation","image",e);let o="/images/variations",u=new URL(o,A.DUMMY_BASE_URL),l;t&&(l=t.baseOptions);let c=Object.assign(Object.assign({method:"POST"},l),s),d={},y={},w=new(t&&t.formDataCtor||FormData);e!==void 0&&w.append("image",e),r!==void 0&&w.append("n",r),n!==void 0&&w.append("size",n),i!==void 0&&w.append("response_format",i),a!==void 0&&w.append("user",a),d["Content-Type"]="multipart/form-data",A.setSearchParams(u,y);let h=l&&l.headers?l.headers:{};return c.headers=Object.assign(Object.assign(Object.assign(Object.assign({},d),w.getHeaders()),h),s.headers),c.data=w,{url:A.toPathString(u),options:c}}),createModeration:(e,r={})=>B(this,void 0,void 0,function*(){A.assertParamExists("createModeration","createModerationRequest",e);let n="/moderations",i=new URL(n,A.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"POST"},a),r),o={},u={};o["Content-Type"]="application/json",A.setSearchParams(i,u);let l=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),l),r.headers),s.data=A.serializeDataIfNeeded(e,s,t),{url:A.toPathString(i),options:s}}),createSearch:(e,r,n={})=>B(this,void 0,void 0,function*(){A.assertParamExists("createSearch","engineId",e),A.assertParamExists("createSearch","createSearchRequest",r);let i="/engines/{engine_id}/search".replace("{engine_id}",encodeURIComponent(String(e))),a=new URL(i,A.DUMMY_BASE_URL),s;t&&(s=t.baseOptions);let o=Object.assign(Object.assign({method:"POST"},s),n),u={},l={};u["Content-Type"]="application/json",A.setSearchParams(a,l);let c=s&&s.headers?s.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},u),c),n.headers),o.data=A.serializeDataIfNeeded(r,o,t),{url:A.toPathString(a),options:o}}),createTranscription:(e,r,n,i,a,s,o={})=>B(this,void 0,void 0,function*(){A.assertParamExists("createTranscription","file",e),A.assertParamExists("createTranscription","model",r);let u="/audio/transcriptions",l=new URL(u,A.DUMMY_BASE_URL),c;t&&(c=t.baseOptions);let d=Object.assign(Object.assign({method:"POST"},c),o),y={},w={},h=new(t&&t.formDataCtor||FormData);e!==void 0&&h.append("file",e),r!==void 0&&h.append("model",r),n!==void 0&&h.append("prompt",n),i!==void 0&&h.append("response_format",i),a!==void 0&&h.append("temperature",a),s!==void 0&&h.append("language",s),y["Content-Type"]="multipart/form-data",A.setSearchParams(l,w);let _=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign(Object.assign({},y),h.getHeaders()),_),o.headers),d.data=h,{url:A.toPathString(l),options:d}}),createTranslation:(e,r,n,i,a,s={})=>B(this,void 0,void 0,function*(){A.assertParamExists("createTranslation","file",e),A.assertParamExists("createTranslation","model",r);let o="/audio/translations",u=new URL(o,A.DUMMY_BASE_URL),l;t&&(l=t.baseOptions);let c=Object.assign(Object.assign({method:"POST"},l),s),d={},y={},w=new(t&&t.formDataCtor||FormData);e!==void 0&&w.append("file",e),r!==void 0&&w.append("model",r),n!==void 0&&w.append("prompt",n),i!==void 0&&w.append("response_format",i),a!==void 0&&w.append("temperature",a),d["Content-Type"]="multipart/form-data",A.setSearchParams(u,y);let h=l&&l.headers?l.headers:{};return c.headers=Object.assign(Object.assign(Object.assign(Object.assign({},d),w.getHeaders()),h),s.headers),c.data=w,{url:A.toPathString(u),options:c}}),deleteFile:(e,r={})=>B(this,void 0,void 0,function*(){A.assertParamExists("deleteFile","fileId",e);let n="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(e))),i=new URL(n,A.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"DELETE"},a),r),o={},u={};A.setSearchParams(i,u);let l=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),l),r.headers),{url:A.toPathString(i),options:s}}),deleteModel:(e,r={})=>B(this,void 0,void 0,function*(){A.assertParamExists("deleteModel","model",e);let n="/models/{model}".replace("{model}",encodeURIComponent(String(e))),i=new URL(n,A.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"DELETE"},a),r),o={},u={};A.setSearchParams(i,u);let l=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),l),r.headers),{url:A.toPathString(i),options:s}}),downloadFile:(e,r={})=>B(this,void 0,void 0,function*(){A.assertParamExists("downloadFile","fileId",e);let n="/files/{file_id}/content".replace("{file_id}",encodeURIComponent(String(e))),i=new URL(n,A.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"GET"},a),r),o={},u={};A.setSearchParams(i,u);let l=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),l),r.headers),{url:A.toPathString(i),options:s}}),listEngines:(e={})=>B(this,void 0,void 0,function*(){let r="/engines",n=new URL(r,A.DUMMY_BASE_URL),i;t&&(i=t.baseOptions);let a=Object.assign(Object.assign({method:"GET"},i),e),s={},o={};A.setSearchParams(n,o);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},s),u),e.headers),{url:A.toPathString(n),options:a}}),listFiles:(e={})=>B(this,void 0,void 0,function*(){let r="/files",n=new URL(r,A.DUMMY_BASE_URL),i;t&&(i=t.baseOptions);let a=Object.assign(Object.assign({method:"GET"},i),e),s={},o={};A.setSearchParams(n,o);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},s),u),e.headers),{url:A.toPathString(n),options:a}}),listFineTuneEvents:(e,r,n={})=>B(this,void 0,void 0,function*(){A.assertParamExists("listFineTuneEvents","fineTuneId",e);let i="/fine-tunes/{fine_tune_id}/events".replace("{fine_tune_id}",encodeURIComponent(String(e))),a=new URL(i,A.DUMMY_BASE_URL),s;t&&(s=t.baseOptions);let o=Object.assign(Object.assign({method:"GET"},s),n),u={},l={};r!==void 0&&(l.stream=r),A.setSearchParams(a,l);let c=s&&s.headers?s.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},u),c),n.headers),{url:A.toPathString(a),options:o}}),listFineTunes:(e={})=>B(this,void 0,void 0,function*(){let r="/fine-tunes",n=new URL(r,A.DUMMY_BASE_URL),i;t&&(i=t.baseOptions);let a=Object.assign(Object.assign({method:"GET"},i),e),s={},o={};A.setSearchParams(n,o);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},s),u),e.headers),{url:A.toPathString(n),options:a}}),listModels:(e={})=>B(this,void 0,void 0,function*(){let r="/models",n=new URL(r,A.DUMMY_BASE_URL),i;t&&(i=t.baseOptions);let a=Object.assign(Object.assign({method:"GET"},i),e),s={},o={};A.setSearchParams(n,o);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},s),u),e.headers),{url:A.toPathString(n),options:a}}),retrieveEngine:(e,r={})=>B(this,void 0,void 0,function*(){A.assertParamExists("retrieveEngine","engineId",e);let n="/engines/{engine_id}".replace("{engine_id}",encodeURIComponent(String(e))),i=new URL(n,A.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"GET"},a),r),o={},u={};A.setSearchParams(i,u);let l=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),l),r.headers),{url:A.toPathString(i),options:s}}),retrieveFile:(e,r={})=>B(this,void 0,void 0,function*(){A.assertParamExists("retrieveFile","fileId",e);let n="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(e))),i=new URL(n,A.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"GET"},a),r),o={},u={};A.setSearchParams(i,u);let l=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),l),r.headers),{url:A.toPathString(i),options:s}}),retrieveFineTune:(e,r={})=>B(this,void 0,void 0,function*(){A.assertParamExists("retrieveFineTune","fineTuneId",e);let n="/fine-tunes/{fine_tune_id}".replace("{fine_tune_id}",encodeURIComponent(String(e))),i=new URL(n,A.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"GET"},a),r),o={},u={};A.setSearchParams(i,u);let l=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),l),r.headers),{url:A.toPathString(i),options:s}}),retrieveModel:(e,r={})=>B(this,void 0,void 0,function*(){A.assertParamExists("retrieveModel","model",e);let n="/models/{model}".replace("{model}",encodeURIComponent(String(e))),i=new URL(n,A.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"GET"},a),r),o={},u={};A.setSearchParams(i,u);let l=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),l),r.headers),{url:A.toPathString(i),options:s}})}};Z.OpenAIApiFp=function(t){let e=Z.OpenAIApiAxiosParamCreator(t);return{cancelFineTune(r,n){return B(this,void 0,void 0,function*(){let i=yield e.cancelFineTune(r,n);return A.createRequestFunction(i,ue.default,se.BASE_PATH,t)})},createAnswer(r,n){return B(this,void 0,void 0,function*(){let i=yield e.createAnswer(r,n);return A.createRequestFunction(i,ue.default,se.BASE_PATH,t)})},createChatCompletion(r,n){return B(this,void 0,void 0,function*(){let i=yield e.createChatCompletion(r,n);return A.createRequestFunction(i,ue.default,se.BASE_PATH,t)})},createClassification(r,n){return B(this,void 0,void 0,function*(){let i=yield e.createClassification(r,n);return A.createRequestFunction(i,ue.default,se.BASE_PATH,t)})},createCompletion(r,n){return B(this,void 0,void 0,function*(){let i=yield e.createCompletion(r,n);return A.createRequestFunction(i,ue.default,se.BASE_PATH,t)})},createEdit(r,n){return B(this,void 0,void 0,function*(){let i=yield e.createEdit(r,n);return A.createRequestFunction(i,ue.default,se.BASE_PATH,t)})},createEmbedding(r,n){return B(this,void 0,void 0,function*(){let i=yield e.createEmbedding(r,n);return A.createRequestFunction(i,ue.default,se.BASE_PATH,t)})},createFile(r,n,i){return B(this,void 0,void 0,function*(){let a=yield e.createFile(r,n,i);return A.createRequestFunction(a,ue.default,se.BASE_PATH,t)})},createFineTune(r,n){return B(this,void 0,void 0,function*(){let i=yield e.createFineTune(r,n);return A.createRequestFunction(i,ue.default,se.BASE_PATH,t)})},createImage(r,n){return B(this,void 0,void 0,function*(){let i=yield e.createImage(r,n);return A.createRequestFunction(i,ue.default,se.BASE_PATH,t)})},createImageEdit(r,n,i,a,s,o,u,l){return B(this,void 0,void 0,function*(){let c=yield e.createImageEdit(r,n,i,a,s,o,u,l);return A.createRequestFunction(c,ue.default,se.BASE_PATH,t)})},createImageVariation(r,n,i,a,s,o){return B(this,void 0,void 0,function*(){let u=yield e.createImageVariation(r,n,i,a,s,o);return A.createRequestFunction(u,ue.default,se.BASE_PATH,t)})},createModeration(r,n){return B(this,void 0,void 0,function*(){let i=yield e.createModeration(r,n);return A.createRequestFunction(i,ue.default,se.BASE_PATH,t)})},createSearch(r,n,i){return B(this,void 0,void 0,function*(){let a=yield e.createSearch(r,n,i);return A.createRequestFunction(a,ue.default,se.BASE_PATH,t)})},createTranscription(r,n,i,a,s,o,u){return B(this,void 0,void 0,function*(){let l=yield e.createTranscription(r,n,i,a,s,o,u);return A.createRequestFunction(l,ue.default,se.BASE_PATH,t)})},createTranslation(r,n,i,a,s,o){return B(this,void 0,void 0,function*(){let u=yield e.createTranslation(r,n,i,a,s,o);return A.createRequestFunction(u,ue.default,se.BASE_PATH,t)})},deleteFile(r,n){return B(this,void 0,void 0,function*(){let i=yield e.deleteFile(r,n);return A.createRequestFunction(i,ue.default,se.BASE_PATH,t)})},deleteModel(r,n){return B(this,void 0,void 0,function*(){let i=yield e.deleteModel(r,n);return A.createRequestFunction(i,ue.default,se.BASE_PATH,t)})},downloadFile(r,n){return B(this,void 0,void 0,function*(){let i=yield e.downloadFile(r,n);return A.createRequestFunction(i,ue.default,se.BASE_PATH,t)})},listEngines(r){return B(this,void 0,void 0,function*(){let n=yield e.listEngines(r);return A.createRequestFunction(n,ue.default,se.BASE_PATH,t)})},listFiles(r){return B(this,void 0,void 0,function*(){let n=yield e.listFiles(r);return A.createRequestFunction(n,ue.default,se.BASE_PATH,t)})},listFineTuneEvents(r,n,i){return B(this,void 0,void 0,function*(){let a=yield e.listFineTuneEvents(r,n,i);return A.createRequestFunction(a,ue.default,se.BASE_PATH,t)})},listFineTunes(r){return B(this,void 0,void 0,function*(){let n=yield e.listFineTunes(r);return A.createRequestFunction(n,ue.default,se.BASE_PATH,t)})},listModels(r){return B(this,void 0,void 0,function*(){let n=yield e.listModels(r);return A.createRequestFunction(n,ue.default,se.BASE_PATH,t)})},retrieveEngine(r,n){return B(this,void 0,void 0,function*(){let i=yield e.retrieveEngine(r,n);return A.createRequestFunction(i,ue.default,se.BASE_PATH,t)})},retrieveFile(r,n){return B(this,void 0,void 0,function*(){let i=yield e.retrieveFile(r,n);return A.createRequestFunction(i,ue.default,se.BASE_PATH,t)})},retrieveFineTune(r,n){return B(this,void 0,void 0,function*(){let i=yield e.retrieveFineTune(r,n);return A.createRequestFunction(i,ue.default,se.BASE_PATH,t)})},retrieveModel(r,n){return B(this,void 0,void 0,function*(){let i=yield e.retrieveModel(r,n);return A.createRequestFunction(i,ue.default,se.BASE_PATH,t)})}}};Z.OpenAIApiFactory=function(t,e,r){let n=Z.OpenAIApiFp(t);return{cancelFineTune(i,a){return n.cancelFineTune(i,a).then(s=>s(r,e))},createAnswer(i,a){return n.createAnswer(i,a).then(s=>s(r,e))},createChatCompletion(i,a){return n.createChatCompletion(i,a).then(s=>s(r,e))},createClassification(i,a){return n.createClassification(i,a).then(s=>s(r,e))},createCompletion(i,a){return n.createCompletion(i,a).then(s=>s(r,e))},createEdit(i,a){return n.createEdit(i,a).then(s=>s(r,e))},createEmbedding(i,a){return n.createEmbedding(i,a).then(s=>s(r,e))},createFile(i,a,s){return n.createFile(i,a,s).then(o=>o(r,e))},createFineTune(i,a){return n.createFineTune(i,a).then(s=>s(r,e))},createImage(i,a){return n.createImage(i,a).then(s=>s(r,e))},createImageEdit(i,a,s,o,u,l,c,d){return n.createImageEdit(i,a,s,o,u,l,c,d).then(y=>y(r,e))},createImageVariation(i,a,s,o,u,l){return n.createImageVariation(i,a,s,o,u,l).then(c=>c(r,e))},createModeration(i,a){return n.createModeration(i,a).then(s=>s(r,e))},createSearch(i,a,s){return n.createSearch(i,a,s).then(o=>o(r,e))},createTranscription(i,a,s,o,u,l,c){return n.createTranscription(i,a,s,o,u,l,c).then(d=>d(r,e))},createTranslation(i,a,s,o,u,l){return n.createTranslation(i,a,s,o,u,l).then(c=>c(r,e))},deleteFile(i,a){return n.deleteFile(i,a).then(s=>s(r,e))},deleteModel(i,a){return n.deleteModel(i,a).then(s=>s(r,e))},downloadFile(i,a){return n.downloadFile(i,a).then(s=>s(r,e))},listEngines(i){return n.listEngines(i).then(a=>a(r,e))},listFiles(i){return n.listFiles(i).then(a=>a(r,e))},listFineTuneEvents(i,a,s){return n.listFineTuneEvents(i,a,s).then(o=>o(r,e))},listFineTunes(i){return n.listFineTunes(i).then(a=>a(r,e))},listModels(i){return n.listModels(i).then(a=>a(r,e))},retrieveEngine(i,a){return n.retrieveEngine(i,a).then(s=>s(r,e))},retrieveFile(i,a){return n.retrieveFile(i,a).then(s=>s(r,e))},retrieveFineTune(i,a){return n.retrieveFineTune(i,a).then(s=>s(r,e))},retrieveModel(i,a){return n.retrieveModel(i,a).then(s=>s(r,e))}}};var Ho=class extends se.BaseAPI{cancelFineTune(e,r){return Z.OpenAIApiFp(this.configuration).cancelFineTune(e,r).then(n=>n(this.axios,this.basePath))}createAnswer(e,r){return Z.OpenAIApiFp(this.configuration).createAnswer(e,r).then(n=>n(this.axios,this.basePath))}createChatCompletion(e,r){return Z.OpenAIApiFp(this.configuration).createChatCompletion(e,r).then(n=>n(this.axios,this.basePath))}createClassification(e,r){return Z.OpenAIApiFp(this.configuration).createClassification(e,r).then(n=>n(this.axios,this.basePath))}createCompletion(e,r){return Z.OpenAIApiFp(this.configuration).createCompletion(e,r).then(n=>n(this.axios,this.basePath))}createEdit(e,r){return Z.OpenAIApiFp(this.configuration).createEdit(e,r).then(n=>n(this.axios,this.basePath))}createEmbedding(e,r){return Z.OpenAIApiFp(this.configuration).createEmbedding(e,r).then(n=>n(this.axios,this.basePath))}createFile(e,r,n){return Z.OpenAIApiFp(this.configuration).createFile(e,r,n).then(i=>i(this.axios,this.basePath))}createFineTune(e,r){return Z.OpenAIApiFp(this.configuration).createFineTune(e,r).then(n=>n(this.axios,this.basePath))}createImage(e,r){return Z.OpenAIApiFp(this.configuration).createImage(e,r).then(n=>n(this.axios,this.basePath))}createImageEdit(e,r,n,i,a,s,o,u){return Z.OpenAIApiFp(this.configuration).createImageEdit(e,r,n,i,a,s,o,u).then(l=>l(this.axios,this.basePath))}createImageVariation(e,r,n,i,a,s){return Z.OpenAIApiFp(this.configuration).createImageVariation(e,r,n,i,a,s).then(o=>o(this.axios,this.basePath))}createModeration(e,r){return Z.OpenAIApiFp(this.configuration).createModeration(e,r).then(n=>n(this.axios,this.basePath))}createSearch(e,r,n){return Z.OpenAIApiFp(this.configuration).createSearch(e,r,n).then(i=>i(this.axios,this.basePath))}createTranscription(e,r,n,i,a,s,o){return Z.OpenAIApiFp(this.configuration).createTranscription(e,r,n,i,a,s,o).then(u=>u(this.axios,this.basePath))}createTranslation(e,r,n,i,a,s){return Z.OpenAIApiFp(this.configuration).createTranslation(e,r,n,i,a,s).then(o=>o(this.axios,this.basePath))}deleteFile(e,r){return Z.OpenAIApiFp(this.configuration).deleteFile(e,r).then(n=>n(this.axios,this.basePath))}deleteModel(e,r){return Z.OpenAIApiFp(this.configuration).deleteModel(e,r).then(n=>n(this.axios,this.basePath))}downloadFile(e,r){return Z.OpenAIApiFp(this.configuration).downloadFile(e,r).then(n=>n(this.axios,this.basePath))}listEngines(e){return Z.OpenAIApiFp(this.configuration).listEngines(e).then(r=>r(this.axios,this.basePath))}listFiles(e){return Z.OpenAIApiFp(this.configuration).listFiles(e).then(r=>r(this.axios,this.basePath))}listFineTuneEvents(e,r,n){return Z.OpenAIApiFp(this.configuration).listFineTuneEvents(e,r,n).then(i=>i(this.axios,this.basePath))}listFineTunes(e){return Z.OpenAIApiFp(this.configuration).listFineTunes(e).then(r=>r(this.axios,this.basePath))}listModels(e){return Z.OpenAIApiFp(this.configuration).listModels(e).then(r=>r(this.axios,this.basePath))}retrieveEngine(e,r){return Z.OpenAIApiFp(this.configuration).retrieveEngine(e,r).then(n=>n(this.axios,this.basePath))}retrieveFile(e,r){return Z.OpenAIApiFp(this.configuration).retrieveFile(e,r).then(n=>n(this.axios,this.basePath))}retrieveFineTune(e,r){return Z.OpenAIApiFp(this.configuration).retrieveFineTune(e,r).then(n=>n(this.axios,this.basePath))}retrieveModel(e,r){return Z.OpenAIApiFp(this.configuration).retrieveModel(e,r).then(n=>n(this.axios,this.basePath))}};Z.OpenAIApi=Ho});var fd=N((OP,Cg)=>{Cg.exports={name:"openai",version:"3.3.0",description:"Node.js library for the OpenAI API",repository:{type:"git",url:"git@github.com:openai/openai-node.git"},keywords:["openai","open","ai","gpt-3","gpt3"],author:"OpenAI",license:"MIT",main:"./dist/index.js",types:"./dist/index.d.ts",scripts:{build:"tsc --outDir dist/"},dependencies:{axios:"^0.26.0","form-data":"^4.0.0"},devDependencies:{"@types/node":"^12.11.5",typescript:"^3.6.4"}}});var yd=N((AP,md)=>{md.exports=typeof self=="object"?self.FormData:window.FormData});var gd=N(da=>{"use strict";Object.defineProperty(da,"__esModule",{value:!0});da.Configuration=void 0;var Sg=fd(),Jo=class{constructor(e={}){this.apiKey=e.apiKey,this.organization=e.organization,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.baseOptions=e.baseOptions,this.formDataCtor=e.formDataCtor,this.baseOptions||(this.baseOptions={}),this.baseOptions.headers=Object.assign({"User-Agent":`OpenAI/NodeJS/${Sg.version}`,Authorization:`Bearer ${this.apiKey}`},this.baseOptions.headers),this.organization&&(this.baseOptions.headers["OpenAI-Organization"]=this.organization),this.formDataCtor||(this.formDataCtor=yd())}isJsonMime(e){let r=new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$","i");return e!==null&&(r.test(e)||e.toLowerCase()==="application/json-patch+json")}};da.Configuration=Jo});var an=N(Yt=>{"use strict";var jg=Yt&&Yt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),bd=Yt&&Yt.__exportStar||function(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&jg(e,t,r)};Object.defineProperty(Yt,"__esModule",{value:!0});bd(hd(),Yt);bd(gd(),Yt)});async function _d(){return Yo===void 0&&(Yo={library:"langchain-js",runtime:Mg()}),Yo}function Y(t){try{return typeof process<"u"?process.env?.[t]:void 0}catch{return}}var kg,Rg,Ng,wd,jt,Mg,Yo,kt=R(()=>{kg=()=>typeof window<"u"&&typeof window.document<"u",Rg=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",Ng=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),wd=()=>typeof Deno<"u",jt=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!wd(),Mg=()=>{let t;return kg()?t="browser":jt()?t="node":Rg()?t="webworker":Ng()?t="jsdom":wd()?t="deno":t="other",t}});function ii(t,e){return function(){return t.apply(e,arguments)}}var Wo=R(()=>{"use strict"});function Dg(t){return t!==null&&!ai(t)&&t.constructor!==null&&!ai(t.constructor)&&rt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}function qg(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Od(t.buffer),e}function si(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),sn(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{let a=r?Object.getOwnPropertyNames(t):Object.keys(t),s=a.length,o;for(n=0;n<s;n++)o=a[n],e.call(null,t[o],o,t)}}function Pd(t,e){e=e.toLowerCase();let r=Object.keys(t),n=r.length,i;for(;n-- >0;)if(i=r[n],e===i.toLowerCase())return i;return null}function Qo(){let{caseless:t}=Td(this)&&this||{},e={},r=(n,i)=>{let a=t&&Pd(e,i)||i;pa(e[a])&&pa(n)?e[a]=Qo(e[a],n):pa(n)?e[a]=Qo({},n):sn(n)?e[a]=n.slice():e[a]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&si(arguments[n],r);return e}function pb(t){return!!(t&&rt(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}var Lg,Xo,ha,wt,fa,sn,ai,Od,Fg,rt,Ad,ma,Ug,pa,Vg,zg,Bg,Kg,$g,Zg,Hg,Jg,Ed,Td,Yg,Wg,Gg,Qg,Xg,eb,tb,rb,nb,ib,ab,vd,sb,Id,ob,ub,lb,cb,Go,xd,Cd,db,hb,fb,mb,C,we=R(()=>{"use strict";Wo();({toString:Lg}=Object.prototype),{getPrototypeOf:Xo}=Object,ha=(t=>e=>{let r=Lg.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),wt=t=>(t=t.toLowerCase(),e=>ha(e)===t),fa=t=>e=>typeof e===t,{isArray:sn}=Array,ai=fa("undefined");Od=wt("ArrayBuffer");Fg=fa("string"),rt=fa("function"),Ad=fa("number"),ma=t=>t!==null&&typeof t=="object",Ug=t=>t===!0||t===!1,pa=t=>{if(ha(t)!=="object")return!1;let e=Xo(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Vg=wt("Date"),zg=wt("File"),Bg=wt("Blob"),Kg=wt("FileList"),$g=t=>ma(t)&&rt(t.pipe),Zg=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||rt(t.append)&&((e=ha(t))==="formdata"||e==="object"&&rt(t.toString)&&t.toString()==="[object FormData]"))},Hg=wt("URLSearchParams"),Jg=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");Ed=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Td=t=>!ai(t)&&t!==Ed;Yg=(t,e,r,{allOwnKeys:n}={})=>(si(e,(i,a)=>{r&&rt(i)?t[a]=ii(i,r):t[a]=i},{allOwnKeys:n}),t),Wg=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Gg=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},Qg=(t,e,r,n)=>{let i,a,s,o={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),a=i.length;a-- >0;)s=i[a],(!n||n(s,t,e))&&!o[s]&&(e[s]=t[s],o[s]=!0);t=r!==!1&&Xo(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},Xg=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;let n=t.indexOf(e,r);return n!==-1&&n===r},eb=t=>{if(!t)return null;if(sn(t))return t;let e=t.length;if(!Ad(e))return null;let r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},tb=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Xo(Uint8Array)),rb=(t,e)=>{let n=(t&&t[Symbol.iterator]).call(t),i;for(;(i=n.next())&&!i.done;){let a=i.value;e.call(t,a[0],a[1])}},nb=(t,e)=>{let r,n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},ib=wt("HTMLFormElement"),ab=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),vd=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),sb=wt("RegExp"),Id=(t,e)=>{let r=Object.getOwnPropertyDescriptors(t),n={};si(r,(i,a)=>{e(i,a,t)!==!1&&(n[a]=i)}),Object.defineProperties(t,n)},ob=t=>{Id(t,(e,r)=>{if(rt(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;let n=t[r];if(rt(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},ub=(t,e)=>{let r={},n=i=>{i.forEach(a=>{r[a]=!0})};return sn(t)?n(t):n(String(t).split(e)),r},lb=()=>{},cb=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Go="abcdefghijklmnopqrstuvwxyz",xd="0123456789",Cd={DIGIT:xd,ALPHA:Go,ALPHA_DIGIT:Go+Go.toUpperCase()+xd},db=(t=16,e=Cd.ALPHA_DIGIT)=>{let r="",{length:n}=e;for(;t--;)r+=e[Math.random()*n|0];return r};hb=t=>{let e=new Array(10),r=(n,i)=>{if(ma(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[i]=n;let a=sn(n)?[]:{};return si(n,(s,o)=>{let u=r(s,i+1);!ai(u)&&(a[o]=u)}),e[i]=void 0,a}}return n};return r(t,0)},fb=wt("AsyncFunction"),mb=t=>t&&(ma(t)||rt(t))&&rt(t.then)&&rt(t.catch),C={isArray:sn,isArrayBuffer:Od,isBuffer:Dg,isFormData:Zg,isArrayBufferView:qg,isString:Fg,isNumber:Ad,isBoolean:Ug,isObject:ma,isPlainObject:pa,isUndefined:ai,isDate:Vg,isFile:zg,isBlob:Bg,isRegExp:sb,isFunction:rt,isStream:$g,isURLSearchParams:Hg,isTypedArray:tb,isFileList:Kg,forEach:si,merge:Qo,extend:Yg,trim:Jg,stripBOM:Wg,inherits:Gg,toFlatObject:Qg,kindOf:ha,kindOfTest:wt,endsWith:Xg,toArray:eb,forEachEntry:rb,matchAll:nb,isHTMLForm:ib,hasOwnProperty:vd,hasOwnProp:vd,reduceDescriptors:Id,freezeMethods:ob,toObjectSet:ub,toCamelCase:ab,noop:lb,toFiniteNumber:cb,findKey:Pd,global:Ed,isContextDefined:Td,ALPHABET:Cd,generateString:db,isSpecCompliantForm:pb,toJSONObject:hb,isAsyncFn:fb,isThenable:mb}});function on(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}var Sd,jd,te,Rt=R(()=>{"use strict";we();C.inherits(on,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:C.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});Sd=on.prototype,jd={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{jd[t]={value:t}});Object.defineProperties(on,jd);Object.defineProperty(Sd,"isAxiosError",{value:!0});on.from=(t,e,r,n,i,a)=>{let s=Object.create(Sd);return C.toFlatObject(t,s,function(u){return u!==Error.prototype},o=>o!=="isAxiosError"),on.call(s,t.message,e,r,n,i),s.cause=t,s.name=t.name,a&&Object.assign(s,a),s};te=on});var ya,eu=R(()=>{ya=null});function tu(t){return C.isPlainObject(t)||C.isArray(t)}function Rd(t){return C.endsWith(t,"[]")?t.slice(0,-2):t}function kd(t,e,r){return t?t.concat(e).map(function(i,a){return i=Rd(i),!r&&a?"["+i+"]":i}).join(r?".":""):e}function yb(t){return C.isArray(t)&&!t.some(tu)}function bb(t,e,r){if(!C.isObject(t))throw new TypeError("target must be an object");e=e||new(ya||FormData),r=C.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_,P){return!C.isUndefined(P[_])});let n=r.metaTokens,i=r.visitor||c,a=r.dots,s=r.indexes,u=(r.Blob||typeof Blob<"u"&&Blob)&&C.isSpecCompliantForm(e);if(!C.isFunction(i))throw new TypeError("visitor must be a function");function l(h){if(h===null)return"";if(C.isDate(h))return h.toISOString();if(!u&&C.isBlob(h))throw new te("Blob is not supported. Use a Buffer instead.");return C.isArrayBuffer(h)||C.isTypedArray(h)?u&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function c(h,_,P){let S=h;if(h&&!P&&typeof h=="object"){if(C.endsWith(_,"{}"))_=n?_:_.slice(0,-2),h=JSON.stringify(h);else if(C.isArray(h)&&yb(h)||(C.isFileList(h)||C.endsWith(_,"[]"))&&(S=C.toArray(h)))return _=Rd(_),S.forEach(function(F,v){!(C.isUndefined(F)||F===null)&&e.append(s===!0?kd([_],v,a):s===null?_:_+"[]",l(F))}),!1}return tu(h)?!0:(e.append(kd(P,_,a),l(h)),!1)}let d=[],y=Object.assign(gb,{defaultVisitor:c,convertValue:l,isVisitable:tu});function w(h,_){if(!C.isUndefined(h)){if(d.indexOf(h)!==-1)throw Error("Circular reference detected in "+_.join("."));d.push(h),C.forEach(h,function(S,I){(!(C.isUndefined(S)||S===null)&&i.call(e,S,C.isString(I)?I.trim():I,_,y))===!0&&w(S,_?_.concat(I):[I])}),d.pop()}}if(!C.isObject(t))throw new TypeError("data must be an object");return w(t),e}var gb,Wt,oi=R(()=>{"use strict";we();Rt();eu();gb=C.toFlatObject(C,{},null,function(e){return/^is[A-Z]/.test(e)});Wt=bb});function Nd(t){let e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Md(t,e){this._pairs=[],t&&Wt(t,this,e)}var Ld,ga,ru=R(()=>{"use strict";oi();Ld=Md.prototype;Ld.append=function(e,r){this._pairs.push([e,r])};Ld.toString=function(e){let r=e?function(n){return e.call(this,n,Nd)}:Nd;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};ga=Md});function wb(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ui(t,e,r){if(!e)return t;let n=r&&r.encode||wb,i=r&&r.serialize,a;if(i?a=i(e,r):a=C.isURLSearchParams(e)?e.toString():new ga(e,r).toString(n),a){let s=t.indexOf("#");s!==-1&&(t=t.slice(0,s)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}var nu=R(()=>{"use strict";we();ru()});var iu,au,Dd=R(()=>{"use strict";we();iu=class{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){C.forEach(this.handlers,function(n){n!==null&&e(n)})}},au=iu});var ba,su=R(()=>{"use strict";ba={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}});var qd,Fd=R(()=>{"use strict";ru();qd=typeof URLSearchParams<"u"?URLSearchParams:ga});var Ud,Vd=R(()=>{"use strict";Ud=typeof FormData<"u"?FormData:null});var zd,Bd=R(()=>{"use strict";zd=typeof Blob<"u"?Blob:null});var _b,vb,Ne,Kd=R(()=>{Fd();Vd();Bd();_b=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),vb=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Ne={isBrowser:!0,classes:{URLSearchParams:qd,FormData:Ud,Blob:zd},isStandardBrowserEnv:_b,isStandardBrowserWebWorkerEnv:vb,protocols:["http","https","file","blob","url","data"]}});var un=R(()=>{Kd()});function ou(t,e){return Wt(t,new Ne.classes.URLSearchParams,Object.assign({visitor:function(r,n,i,a){return Ne.isNode&&C.isBuffer(r)?(this.append(n,r.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}var $d=R(()=>{"use strict";we();oi();un()});function xb(t){return C.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Ob(t){let e={},r=Object.keys(t),n,i=r.length,a;for(n=0;n<i;n++)a=r[n],e[a]=t[a];return e}function Ab(t){function e(r,n,i,a){let s=r[a++],o=Number.isFinite(+s),u=a>=r.length;return s=!s&&C.isArray(i)?i.length:s,u?(C.hasOwnProp(i,s)?i[s]=[i[s],n]:i[s]=n,!o):((!i[s]||!C.isObject(i[s]))&&(i[s]=[]),e(r,n,i[s],a)&&C.isArray(i[s])&&(i[s]=Ob(i[s])),!o)}if(C.isFormData(t)&&C.isFunction(t.entries)){let r={};return C.forEachEntry(t,(n,i)=>{e(xb(n),i,r,0)}),r}return null}var wa,uu=R(()=>{"use strict";we();wa=Ab});function Eb(t,e,r){if(C.isString(t))try{return(e||JSON.parse)(t),C.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var Pb,_a,ln,va=R(()=>{"use strict";we();Rt();su();oi();$d();un();uu();Pb={"Content-Type":void 0};_a={transitional:ba,adapter:["xhr","http"],transformRequest:[function(e,r){let n=r.getContentType()||"",i=n.indexOf("application/json")>-1,a=C.isObject(e);if(a&&C.isHTMLForm(e)&&(e=new FormData(e)),C.isFormData(e))return i&&i?JSON.stringify(wa(e)):e;if(C.isArrayBuffer(e)||C.isBuffer(e)||C.isStream(e)||C.isFile(e)||C.isBlob(e))return e;if(C.isArrayBufferView(e))return e.buffer;if(C.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return ou(e,this.formSerializer).toString();if((o=C.isFileList(e))||n.indexOf("multipart/form-data")>-1){let u=this.env&&this.env.FormData;return Wt(o?{"files[]":e}:e,u&&new u,this.formSerializer)}}return a||i?(r.setContentType("application/json",!1),Eb(e)):e}],transformResponse:[function(e){let r=this.transitional||_a.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(e&&C.isString(e)&&(n&&!this.responseType||i)){let s=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?te.from(o,te.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ne.classes.FormData,Blob:Ne.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};C.forEach(["delete","get","head"],function(e){_a.headers[e]={}});C.forEach(["post","put","patch"],function(e){_a.headers[e]=C.merge(Pb)});ln=_a});var Tb,Zd,Hd=R(()=>{"use strict";we();Tb=C.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Zd=t=>{let e={},r,n,i;return t&&t.split(`
`).forEach(function(s){i=s.indexOf(":"),r=s.substring(0,i).trim().toLowerCase(),n=s.substring(i+1).trim(),!(!r||e[r]&&Tb[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e}});function li(t){return t&&String(t).trim().toLowerCase()}function xa(t){return t===!1||t==null?t:C.isArray(t)?t.map(xa):String(t)}function Ib(t){let e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}function lu(t,e,r,n,i){if(C.isFunction(n))return n.call(this,e,r);if(i&&(e=r),!!C.isString(e)){if(C.isString(n))return e.indexOf(n)!==-1;if(C.isRegExp(n))return n.test(e)}}function Sb(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function jb(t,e){let r=C.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(i,a,s){return this[n].call(this,e,i,a,s)},configurable:!0})})}var Jd,Cb,cn,Ke,yr=R(()=>{"use strict";we();Hd();Jd=Symbol("internals");Cb=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());cn=class{constructor(e){e&&this.set(e)}set(e,r,n){let i=this;function a(o,u,l){let c=li(u);if(!c)throw new Error("header name must be a non-empty string");let d=C.findKey(i,c);(!d||i[d]===void 0||l===!0||l===void 0&&i[d]!==!1)&&(i[d||u]=xa(o))}let s=(o,u)=>C.forEach(o,(l,c)=>a(l,c,u));return C.isPlainObject(e)||e instanceof this.constructor?s(e,r):C.isString(e)&&(e=e.trim())&&!Cb(e)?s(Zd(e),r):e!=null&&a(r,e,n),this}get(e,r){if(e=li(e),e){let n=C.findKey(this,e);if(n){let i=this[n];if(!r)return i;if(r===!0)return Ib(i);if(C.isFunction(r))return r.call(this,i,n);if(C.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=li(e),e){let n=C.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||lu(this,this[n],n,r)))}return!1}delete(e,r){let n=this,i=!1;function a(s){if(s=li(s),s){let o=C.findKey(n,s);o&&(!r||lu(n,n[o],o,r))&&(delete n[o],i=!0)}}return C.isArray(e)?e.forEach(a):a(e),i}clear(e){let r=Object.keys(this),n=r.length,i=!1;for(;n--;){let a=r[n];(!e||lu(this,this[a],a,e,!0))&&(delete this[a],i=!0)}return i}normalize(e){let r=this,n={};return C.forEach(this,(i,a)=>{let s=C.findKey(n,a);if(s){r[s]=xa(i),delete r[a];return}let o=e?Sb(a):String(a).trim();o!==a&&delete r[a],r[o]=xa(i),n[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){let r=Object.create(null);return C.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=e&&C.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){let n=new this(e);return r.forEach(i=>n.set(i)),n}static accessor(e){let n=(this[Jd]=this[Jd]={accessors:{}}).accessors,i=this.prototype;function a(s){let o=li(s);n[o]||(jb(i,s),n[o]=!0)}return C.isArray(e)?e.forEach(a):a(e),this}};cn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);C.freezeMethods(cn.prototype);C.freezeMethods(cn);Ke=cn});function ci(t,e){let r=this||ln,n=e||r,i=Ke.from(n.headers),a=n.data;return C.forEach(t,function(o){a=o.call(r,a,i.normalize(),e?e.status:void 0)}),i.normalize(),a}var Yd=R(()=>{"use strict";we();va();yr()});function di(t){return!!(t&&t.__CANCEL__)}var cu=R(()=>{"use strict"});function Wd(t,e,r){te.call(this,t??"canceled",te.ERR_CANCELED,e,r),this.name="CanceledError"}var Gt,pi=R(()=>{"use strict";Rt();we();C.inherits(Wd,te,{__CANCEL__:!0});Gt=Wd});function du(t,e,r){let n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new te("Request failed with status code "+r.status,[te.ERR_BAD_REQUEST,te.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}var Gd=R(()=>{"use strict";Rt()});var Qd,Xd=R(()=>{"use strict";we();un();Qd=Ne.isStandardBrowserEnv?function(){return{write:function(r,n,i,a,s,o){let u=[];u.push(r+"="+encodeURIComponent(n)),C.isNumber(i)&&u.push("expires="+new Date(i).toGMTString()),C.isString(a)&&u.push("path="+a),C.isString(s)&&u.push("domain="+s),o===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(r){let n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});function pu(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}var ep=R(()=>{"use strict"});function hu(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}var tp=R(()=>{"use strict"});function hi(t,e){return t&&!pu(e)?hu(t,e):e}var fu=R(()=>{"use strict";ep();tp()});var rp,np=R(()=>{"use strict";we();un();rp=Ne.isStandardBrowserEnv?function(){let e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function i(a){let s=a;return e&&(r.setAttribute("href",s),s=r.href),r.setAttribute("href",s),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(s){let o=C.isString(s)?i(s):s;return o.protocol===n.protocol&&o.host===n.host}}():function(){return function(){return!0}}()});function mu(t){let e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}var ip=R(()=>{"use strict"});function kb(t,e){t=t||10;let r=new Array(t),n=new Array(t),i=0,a=0,s;return e=e!==void 0?e:1e3,function(u){let l=Date.now(),c=n[a];s||(s=l),r[i]=u,n[i]=l;let d=a,y=0;for(;d!==i;)y+=r[d++],d=d%t;if(i=(i+1)%t,i===a&&(a=(a+1)%t),l-s<e)return;let w=c&&l-c;return w?Math.round(y*1e3/w):void 0}}var ap,sp=R(()=>{"use strict";ap=kb});function op(t,e){let r=0,n=ap(50,250);return i=>{let a=i.loaded,s=i.lengthComputable?i.total:void 0,o=a-r,u=n(o),l=a<=s;r=a;let c={loaded:a,total:s,progress:s?a/s:void 0,bytes:o,rate:u||void 0,estimated:u&&s&&l?(s-a)/u:void 0,event:i};c[e?"download":"upload"]=!0,t(c)}}var Rb,up,lp=R(()=>{"use strict";we();Gd();Xd();nu();fu();np();su();Rt();pi();ip();un();yr();sp();Rb=typeof XMLHttpRequest<"u",up=Rb&&function(t){return new Promise(function(r,n){let i=t.data,a=Ke.from(t.headers).normalize(),s=t.responseType,o;function u(){t.cancelToken&&t.cancelToken.unsubscribe(o),t.signal&&t.signal.removeEventListener("abort",o)}C.isFormData(i)&&(Ne.isStandardBrowserEnv||Ne.isStandardBrowserWebWorkerEnv?a.setContentType(!1):a.setContentType("multipart/form-data;",!1));let l=new XMLHttpRequest;if(t.auth){let w=t.auth.username||"",h=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";a.set("Authorization","Basic "+btoa(w+":"+h))}let c=hi(t.baseURL,t.url);l.open(t.method.toUpperCase(),ui(c,t.params,t.paramsSerializer),!0),l.timeout=t.timeout;function d(){if(!l)return;let w=Ke.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders()),_={data:!s||s==="text"||s==="json"?l.responseText:l.response,status:l.status,statusText:l.statusText,headers:w,config:t,request:l};du(function(S){r(S),u()},function(S){n(S),u()},_),l=null}if("onloadend"in l?l.onloadend=d:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(d)},l.onabort=function(){l&&(n(new te("Request aborted",te.ECONNABORTED,t,l)),l=null)},l.onerror=function(){n(new te("Network Error",te.ERR_NETWORK,t,l)),l=null},l.ontimeout=function(){let h=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",_=t.transitional||ba;t.timeoutErrorMessage&&(h=t.timeoutErrorMessage),n(new te(h,_.clarifyTimeoutError?te.ETIMEDOUT:te.ECONNABORTED,t,l)),l=null},Ne.isStandardBrowserEnv){let w=(t.withCredentials||rp(c))&&t.xsrfCookieName&&Qd.read(t.xsrfCookieName);w&&a.set(t.xsrfHeaderName,w)}i===void 0&&a.setContentType(null),"setRequestHeader"in l&&C.forEach(a.toJSON(),function(h,_){l.setRequestHeader(_,h)}),C.isUndefined(t.withCredentials)||(l.withCredentials=!!t.withCredentials),s&&s!=="json"&&(l.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&l.addEventListener("progress",op(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&l.upload&&l.upload.addEventListener("progress",op(t.onUploadProgress)),(t.cancelToken||t.signal)&&(o=w=>{l&&(n(!w||w.type?new Gt(null,t,l):w),l.abort(),l=null)},t.cancelToken&&t.cancelToken.subscribe(o),t.signal&&(t.signal.aborted?o():t.signal.addEventListener("abort",o)));let y=mu(c);if(y&&Ne.protocols.indexOf(y)===-1){n(new te("Unsupported protocol "+y+":",te.ERR_BAD_REQUEST,t));return}l.send(i||null)})}});var Oa,cp,dp=R(()=>{we();eu();lp();Rt();Oa={http:ya,xhr:up};C.forEach(Oa,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});cp={getAdapter:t=>{t=C.isArray(t)?t:[t];let{length:e}=t,r,n;for(let i=0;i<e&&(r=t[i],!(n=C.isString(r)?Oa[r.toLowerCase()]:r));i++);if(!n)throw n===!1?new te(`Adapter ${r} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(C.hasOwnProp(Oa,r)?`Adapter '${r}' is not available in the build`:`Unknown adapter '${r}'`);if(!C.isFunction(n))throw new TypeError("adapter is not a function");return n},adapters:Oa}});function yu(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Gt(null,t)}function Aa(t){return yu(t),t.headers=Ke.from(t.headers),t.data=ci.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),cp.getAdapter(t.adapter||ln.adapter)(t).then(function(n){return yu(t),n.data=ci.call(t,t.transformResponse,n),n.headers=Ke.from(n.headers),n},function(n){return di(n)||(yu(t),n&&n.response&&(n.response.data=ci.call(t,t.transformResponse,n.response),n.response.headers=Ke.from(n.response.headers))),Promise.reject(n)})}var pp=R(()=>{"use strict";Yd();cu();va();pi();yr();dp()});function Nt(t,e){e=e||{};let r={};function n(l,c,d){return C.isPlainObject(l)&&C.isPlainObject(c)?C.merge.call({caseless:d},l,c):C.isPlainObject(c)?C.merge({},c):C.isArray(c)?c.slice():c}function i(l,c,d){if(C.isUndefined(c)){if(!C.isUndefined(l))return n(void 0,l,d)}else return n(l,c,d)}function a(l,c){if(!C.isUndefined(c))return n(void 0,c)}function s(l,c){if(C.isUndefined(c)){if(!C.isUndefined(l))return n(void 0,l)}else return n(void 0,c)}function o(l,c,d){if(d in e)return n(l,c);if(d in t)return n(void 0,l)}let u={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:o,headers:(l,c)=>i(hp(l),hp(c),!0)};return C.forEach(Object.keys(Object.assign({},t,e)),function(c){let d=u[c]||i,y=d(t[c],e[c],c);C.isUndefined(y)&&d!==o||(r[c]=y)}),r}var hp,gu=R(()=>{"use strict";we();yr();hp=t=>t instanceof Ke?t.toJSON():t});var Pa,bu=R(()=>{Pa="1.4.0"});function Nb(t,e,r){if(typeof t!="object")throw new te("options must be an object",te.ERR_BAD_OPTION_VALUE);let n=Object.keys(t),i=n.length;for(;i-- >0;){let a=n[i],s=e[a];if(s){let o=t[a],u=o===void 0||s(o,a,t);if(u!==!0)throw new te("option "+a+" must be "+u,te.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new te("Unknown option "+a,te.ERR_BAD_OPTION)}}var wu,fp,Ea,mp=R(()=>{"use strict";bu();Rt();wu={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{wu[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});fp={};wu.transitional=function(e,r,n){function i(a,s){return"[Axios v"+Pa+"] Transitional option '"+a+"'"+s+(n?". "+n:"")}return(a,s,o)=>{if(e===!1)throw new te(i(s," has been removed"+(r?" in "+r:"")),te.ERR_DEPRECATED);return r&&!fp[s]&&(fp[s]=!0),e?e(a,s,o):!0}};Ea={assertOptions:Nb,validators:wu}});var Qt,dn,fi,yp=R(()=>{"use strict";we();nu();Dd();pp();gu();fu();mp();yr();Qt=Ea.validators,dn=class{constructor(e){this.defaults=e,this.interceptors={request:new au,response:new au}}request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Nt(this.defaults,r);let{transitional:n,paramsSerializer:i,headers:a}=r;n!==void 0&&Ea.assertOptions(n,{silentJSONParsing:Qt.transitional(Qt.boolean),forcedJSONParsing:Qt.transitional(Qt.boolean),clarifyTimeoutError:Qt.transitional(Qt.boolean)},!1),i!=null&&(C.isFunction(i)?r.paramsSerializer={serialize:i}:Ea.assertOptions(i,{encode:Qt.function,serialize:Qt.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let s;s=a&&C.merge(a.common,a[r.method]),s&&C.forEach(["delete","get","head","post","put","patch","common"],h=>{delete a[h]}),r.headers=Ke.concat(s,a);let o=[],u=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(r)===!1||(u=u&&_.synchronous,o.unshift(_.fulfilled,_.rejected))});let l=[];this.interceptors.response.forEach(function(_){l.push(_.fulfilled,_.rejected)});let c,d=0,y;if(!u){let h=[Aa.bind(this),void 0];for(h.unshift.apply(h,o),h.push.apply(h,l),y=h.length,c=Promise.resolve(r);d<y;)c=c.then(h[d++],h[d++]);return c}y=o.length;let w=r;for(d=0;d<y;){let h=o[d++],_=o[d++];try{w=h(w)}catch(P){_.call(this,P);break}}try{c=Aa.call(this,w)}catch(h){return Promise.reject(h)}for(d=0,y=l.length;d<y;)c=c.then(l[d++],l[d++]);return c}getUri(e){e=Nt(this.defaults,e);let r=hi(e.baseURL,e.url);return ui(r,e.params,e.paramsSerializer)}};C.forEach(["delete","get","head","options"],function(e){dn.prototype[e]=function(r,n){return this.request(Nt(n||{},{method:e,url:r,data:(n||{}).data}))}});C.forEach(["post","put","patch"],function(e){function r(n){return function(a,s,o){return this.request(Nt(o||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:s}))}}dn.prototype[e]=r(),dn.prototype[e+"Form"]=r(!0)});fi=dn});var mi,gp,bp=R(()=>{"use strict";pi();mi=class{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(a){r=a});let n=this;this.promise.then(i=>{if(!n._listeners)return;let a=n._listeners.length;for(;a-- >0;)n._listeners[a](i);n._listeners=null}),this.promise.then=i=>{let a,s=new Promise(o=>{n.subscribe(o),a=o}).then(i);return s.cancel=function(){n.unsubscribe(a)},s},e(function(a,s,o){n.reason||(n.reason=new Gt(a,s,o),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}static source(){let e;return{token:new mi(function(i){e=i}),cancel:e}}},gp=mi});function _u(t){return function(r){return t.apply(null,r)}}var wp=R(()=>{"use strict"});function vu(t){return C.isObject(t)&&t.isAxiosError===!0}var _p=R(()=>{"use strict";we()});var xu,vp,xp=R(()=>{xu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(xu).forEach(([t,e])=>{xu[e]=t});vp=xu});function Op(t){let e=new fi(t),r=ii(fi.prototype.request,e);return C.extend(r,fi.prototype,e,{allOwnKeys:!0}),C.extend(r,e,null,{allOwnKeys:!0}),r.create=function(i){return Op(Nt(t,i))},r}var xe,gr,Ap=R(()=>{"use strict";we();Wo();yp();gu();va();uu();pi();bp();cu();bu();oi();Rt();wp();_p();yr();xp();xe=Op(ln);xe.Axios=fi;xe.CanceledError=Gt;xe.CancelToken=gp;xe.isCancel=di;xe.VERSION=Pa;xe.toFormData=Wt;xe.AxiosError=te;xe.Cancel=xe.CanceledError;xe.all=function(e){return Promise.all(e)};xe.spread=_u;xe.isAxiosError=vu;xe.mergeConfig=Nt;xe.AxiosHeaders=Ke;xe.formToJSON=t=>wa(C.isHTMLForm(t)?new FormData(t):t);xe.HttpStatusCode=vp;xe.default=xe;gr=xe});var rI,nI,iI,aI,sI,oI,uI,lI,cI,dI,pI,hI,fI,mI,yI,Pp=R(()=>{Ap();({Axios:rI,AxiosError:nI,CanceledError:iI,isCancel:aI,CancelToken:sI,VERSION:oI,all:uI,Cancel:lI,isAxiosError:cI,spread:dI,toFormData:pI,AxiosHeaders:hI,HttpStatusCode:fI,formToJSON:mI,mergeConfig:yI}=gr)});async function Ep(t,e){let r=t.getReader();for(;;){let n=await r.read();if(n.done){e(new Uint8Array,!0);break}e(n.value)}}function Tp(t){let e,r,n,i=!1;return function(s,o){if(o){t(s,0,!0);return}e===void 0?(e=s,r=0,n=-1):e=Mb(e,s);let u=e.length,l=0;for(;r<u;){i&&(e[r]===10&&(l=++r),i=!1);let c=-1;for(;r<u&&c===-1;++r)switch(e[r]){case 58:n===-1&&(n=r-l);break;case 13:i=!0;case 10:c=r;break}if(c===-1)break;t(e.subarray(l,c),n),l=r,n=-1}l===u?e=void 0:l!==0&&(e=e.subarray(l),r-=l)}}function Ip(t,e,r){let n=Ou(),i=new TextDecoder;return function(s,o,u){if(u){Lb(n)||(t?.(n),n=Ou());return}if(s.length===0)t?.(n),n=Ou();else if(o>0){let l=i.decode(s.subarray(0,o)),c=o+(s[o+1]===32?2:1),d=i.decode(s.subarray(c));switch(l){case"data":n.data=n.data?n.data+`
`+d:d;break;case"event":n.event=d;break;case"id":e?.(n.id=d);break;case"retry":{let y=parseInt(d,10);Number.isNaN(y)||r?.(n.retry=y);break}}}}}function Mb(t,e){let r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}function Ou(){return{data:"",event:"",id:"",retry:void 0}}function Lb(t){return t.data===""&&t.event===""&&t.id===""&&t.retry===void 0}var Ta,Cp=R(()=>{Ta="text/event-stream"});function Db(t){try{return JSON.stringify(t)}catch{return t}}function qb(t,e,r){let{validateStatus:n}=r.config;!r.status||!n||n(r.status)?t(r):e(Ia(`Request failed with status code ${r.status} and body ${typeof r.data=="string"?r.data:Db(r.data)}`,r.config,null,r.request,r))}function Fb(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Ub(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function Sp(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Vb(t,e,r){if(!e)return t;var n;if(r)n=r(e);else if(Zb(e))n=e.toString();else{var i=[];jp(e,function(o,u){o===null||typeof o>"u"||(kp(o)?u=`${u}[]`:o=[o],jp(o,function(c){$b(c)?c=c.toISOString():Kb(c)&&(c=JSON.stringify(c)),i.push(`${Sp(u)}=${Sp(c)}`)}))}),n=i.join("&")}if(n){var a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+n}return t}function zb(t,e){return t&&!Fb(e)?Ub(t,e):e}function Bb(t){return typeof t>"u"}function Kb(t){return t!==null&&typeof t=="object"}function $b(t){return toString.call(t)==="[object Date]"}function Zb(t){return toString.call(t)==="[object URLSearchParams]"}function kp(t){return Array.isArray(t)}function jp(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),kp(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function Hb(t){return toString.call(t)==="[object FormData]"}function Jb(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}async function Me(t){let e=Wb(t),r=await Yb(e,t);return new Promise((n,i)=>{r instanceof Error?i(r):Object.prototype.toString.call(t.settle)==="[object Function]"?t.settle(n,i,r):qb(n,i,r)})}async function Yb(t,e){let r;try{r=await fetch(t)}catch(a){return a&&a.name==="AbortError"?Ia("Request aborted",e,"ECONNABORTED",t):a&&a.name==="TimeoutError"?Ia("Request timeout",e,"ECONNABORTED",t):Ia("Network Error",e,"ERR_NETWORK",t)}let n={};r.headers.forEach((a,s)=>{n[s]=a});let i={ok:r.ok,status:r.status,statusText:r.statusText,headers:n,config:e,request:t};if(r.status>=200&&r.status!==204)if(e.responseType==="stream"){let a=r.headers.get("content-type");if(!a?.startsWith(Ta)){if(r.status>=400)return a?.startsWith("application/json")?(i.data=await r.json(),i):(i.data=await r.text(),i);throw new Error(`Expected content-type to be ${Ta}, Actual: ${a}`)}await Ep(r.body,Tp(Ip(e.onmessage)))}else switch(e.responseType){case"arraybuffer":i.data=await r.arrayBuffer();break;case"blob":i.data=await r.blob();break;case"json":i.data=await r.json();break;case"formData":i.data=await r.formData();break;default:i.data=await r.text();break}return i}function Wb(t){let e=new Headers(t.headers);if(t.auth){let s=t.auth.username||"",o=t.auth.password?decodeURI(encodeURIComponent(t.auth.password)):"";e.set("Authorization",`Basic ${btoa(`${s}:${o}`)}`)}let r=t.method.toUpperCase(),n={headers:e,method:r};r!=="GET"&&r!=="HEAD"&&(n.body=t.data,Hb(n.body)&&Jb()&&e.delete("Content-Type")),typeof n.body=="string"&&(n.body=new TextEncoder().encode(n.body)),t.mode&&(n.mode=t.mode),t.cache&&(n.cache=t.cache),t.integrity&&(n.integrity=t.integrity),t.redirect&&(n.redirect=t.redirect),t.referrer&&(n.referrer=t.referrer),t.timeout&&t.timeout>0&&(n.signal=AbortSignal.timeout(t.timeout)),t.signal&&(n.signal=t.signal),Bb(t.withCredentials)||(n.credentials=t.withCredentials?"include":"omit"),t.responseType==="stream"&&n.headers.set("Accept",Ta);let i=zb(t.baseURL,t.url),a=Vb(i,t.params,t.paramsSerializer);return new Request(a,n)}function Ia(t,e,r,n,i){if(gr.AxiosError&&typeof gr.AxiosError=="function")return new gr.AxiosError(t,gr.AxiosError[r],e,n,i);let a=new Error(t);return Gb(a,e,r,n,i)}function Gb(t,e,r,n,i){return t.config=e,r&&(t.code=r),t.request=n,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t}var pn=R(()=>{Pp();Cp()});var yi,Au=R(()=>{yi=(t,e)=>t.reduce((r,n,i)=>{let a=Math.floor(i/e),s=r[a]||[];return r[a]=s.concat([n]),r},[])});var Mp=N((Rp,Np)=>{(function(t){var e;typeof Rp=="object"?Np.exports=t():typeof define=="function"&&define.amd?define(t):(typeof window<"u"?e=window:typeof global<"u"?e=global:typeof self<"u"&&(e=self),e.objectHash=t())})(function(){return function t(e,r,n){function i(o,u){if(!r[o]){if(!e[o]){var l=typeof ti=="function"&&ti;if(!u&&l)return l(o,!0);if(a)return a(o,!0);throw new Error("Cannot find module '"+o+"'")}u=r[o]={exports:{}},e[o][0].call(u.exports,function(c){var d=e[o][1][c];return i(d||c)},u,u.exports,t,e,r,n)}return r[o].exports}for(var a=typeof ti=="function"&&ti,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){(function(n,i,a,s,o,u,l,c,d){"use strict";var y=t("crypto");function w(v,j){j=P(v,j);var m;return(m=j.algorithm!=="passthrough"?y.createHash(j.algorithm):new F).write===void 0&&(m.write=m.update,m.end=m.update),I(j,m).dispatch(v),m.update||m.end(""),m.digest?m.digest(j.encoding==="buffer"?void 0:j.encoding):(v=m.read(),j.encoding!=="buffer"?v.toString(j.encoding):v)}(r=e.exports=w).sha1=function(v){return w(v)},r.keys=function(v){return w(v,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},r.MD5=function(v){return w(v,{algorithm:"md5",encoding:"hex"})},r.keysMD5=function(v){return w(v,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var h=y.getHashes?y.getHashes().slice():["sha1","md5"],_=(h.push("passthrough"),["buffer","hex","binary","base64"]);function P(v,j){var m={};if(m.algorithm=(j=j||{}).algorithm||"sha1",m.encoding=j.encoding||"hex",m.excludeValues=!!j.excludeValues,m.algorithm=m.algorithm.toLowerCase(),m.encoding=m.encoding.toLowerCase(),m.ignoreUnknown=j.ignoreUnknown===!0,m.respectType=j.respectType!==!1,m.respectFunctionNames=j.respectFunctionNames!==!1,m.respectFunctionProperties=j.respectFunctionProperties!==!1,m.unorderedArrays=j.unorderedArrays===!0,m.unorderedSets=j.unorderedSets!==!1,m.unorderedObjects=j.unorderedObjects!==!1,m.replacer=j.replacer||void 0,m.excludeKeys=j.excludeKeys||void 0,v===void 0)throw new Error("Object argument required.");for(var b=0;b<h.length;++b)h[b].toLowerCase()===m.algorithm.toLowerCase()&&(m.algorithm=h[b]);if(h.indexOf(m.algorithm)===-1)throw new Error('Algorithm "'+m.algorithm+'"  not supported. supported values: '+h.join(", "));if(_.indexOf(m.encoding)===-1&&m.algorithm!=="passthrough")throw new Error('Encoding "'+m.encoding+'"  not supported. supported values: '+_.join(", "));return m}function S(v){if(typeof v=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(v))!=null}function I(v,j,m){m=m||[];function b(f){return j.update?j.update(f,"utf8"):j.write(f,"utf8")}return{dispatch:function(f){return this["_"+((f=v.replacer?v.replacer(f):f)===null?"null":typeof f)](f)},_object:function(f){var E,k=Object.prototype.toString.call(f),W=/\[object (.*)\]/i.exec(k);if(W=(W=W?W[1]:"unknown:["+k+"]").toLowerCase(),0<=(k=m.indexOf(f)))return this.dispatch("[CIRCULAR:"+k+"]");if(m.push(f),a!==void 0&&a.isBuffer&&a.isBuffer(f))return b("buffer:"),b(f);if(W==="object"||W==="function"||W==="asyncfunction")return k=Object.keys(f),v.unorderedObjects&&(k=k.sort()),v.respectType===!1||S(f)||k.splice(0,0,"prototype","__proto__","constructor"),v.excludeKeys&&(k=k.filter(function(J){return!v.excludeKeys(J)})),b("object:"+k.length+":"),E=this,k.forEach(function(J){E.dispatch(J),b(":"),v.excludeValues||E.dispatch(f[J]),b(",")});if(!this["_"+W]){if(v.ignoreUnknown)return b("["+W+"]");throw new Error('Unknown object type "'+W+'"')}this["_"+W](f)},_array:function(f,J){J=J!==void 0?J:v.unorderedArrays!==!1;var k=this;if(b("array:"+f.length+":"),!J||f.length<=1)return f.forEach(function(X){return k.dispatch(X)});var W=[],J=f.map(function(X){var z=new F,he=m.slice();return I(v,z,he).dispatch(X),W=W.concat(he.slice(m.length)),z.read().toString()});return m=m.concat(W),J.sort(),this._array(J,!1)},_date:function(f){return b("date:"+f.toJSON())},_symbol:function(f){return b("symbol:"+f.toString())},_error:function(f){return b("error:"+f.toString())},_boolean:function(f){return b("bool:"+f.toString())},_string:function(f){b("string:"+f.length+":"),b(f.toString())},_function:function(f){b("fn:"),S(f)?this.dispatch("[native]"):this.dispatch(f.toString()),v.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(f.name)),v.respectFunctionProperties&&this._object(f)},_number:function(f){return b("number:"+f.toString())},_xml:function(f){return b("xml:"+f.toString())},_null:function(){return b("Null")},_undefined:function(){return b("Undefined")},_regexp:function(f){return b("regex:"+f.toString())},_uint8array:function(f){return b("uint8array:"),this.dispatch(Array.prototype.slice.call(f))},_uint8clampedarray:function(f){return b("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(f))},_int8array:function(f){return b("int8array:"),this.dispatch(Array.prototype.slice.call(f))},_uint16array:function(f){return b("uint16array:"),this.dispatch(Array.prototype.slice.call(f))},_int16array:function(f){return b("int16array:"),this.dispatch(Array.prototype.slice.call(f))},_uint32array:function(f){return b("uint32array:"),this.dispatch(Array.prototype.slice.call(f))},_int32array:function(f){return b("int32array:"),this.dispatch(Array.prototype.slice.call(f))},_float32array:function(f){return b("float32array:"),this.dispatch(Array.prototype.slice.call(f))},_float64array:function(f){return b("float64array:"),this.dispatch(Array.prototype.slice.call(f))},_arraybuffer:function(f){return b("arraybuffer:"),this.dispatch(new Uint8Array(f))},_url:function(f){return b("url:"+f.toString())},_map:function(f){return b("map:"),f=Array.from(f),this._array(f,v.unorderedSets!==!1)},_set:function(f){return b("set:"),f=Array.from(f),this._array(f,v.unorderedSets!==!1)},_file:function(f){return b("file:"),this.dispatch([f.name,f.size,f.type,f.lastModfied])},_blob:function(){if(v.ignoreUnknown)return b("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return b("domwindow")},_bigint:function(f){return b("bigint:"+f.toString())},_process:function(){return b("process")},_timer:function(){return b("timer")},_pipe:function(){return b("pipe")},_tcp:function(){return b("tcp")},_udp:function(){return b("udp")},_tty:function(){return b("tty")},_statwatcher:function(){return b("statwatcher")},_securecontext:function(){return b("securecontext")},_connection:function(){return b("connection")},_zlib:function(){return b("zlib")},_context:function(){return b("context")},_nodescript:function(){return b("nodescript")},_httpparser:function(){return b("httpparser")},_dataview:function(){return b("dataview")},_signal:function(){return b("signal")},_fsevent:function(){return b("fsevent")},_tlswrap:function(){return b("tlswrap")}}}function F(){return{buf:"",write:function(v){this.buf+=v},end:function(v){this.buf+=v},read:function(){return this.buf}}}r.writeToStream=function(v,j,m){return m===void 0&&(m=j,j={}),I(j=P(v,j),m).dispatch(v)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(t,e,r){(function(n,i,a,s,o,u,l,c,d){(function(y){"use strict";var w=typeof Uint8Array<"u"?Uint8Array:Array,h="+".charCodeAt(0),_="/".charCodeAt(0),P="0".charCodeAt(0),S="a".charCodeAt(0),I="A".charCodeAt(0),F="-".charCodeAt(0),v="_".charCodeAt(0);function j(m){return m=m.charCodeAt(0),m===h||m===F?62:m===_||m===v?63:m<P?-1:m<P+10?m-P+26+26:m<I+26?m-I:m<S+26?m-S+26:void 0}y.toByteArray=function(m){var b,f;if(0<m.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var E=m.length,E=m.charAt(E-2)==="="?2:m.charAt(E-1)==="="?1:0,k=new w(3*m.length/4-E),W=0<E?m.length-4:m.length,J=0;function X(z){k[J++]=z}for(b=0;b<W;b+=4,0)X((16711680&(f=j(m.charAt(b))<<18|j(m.charAt(b+1))<<12|j(m.charAt(b+2))<<6|j(m.charAt(b+3))))>>16),X((65280&f)>>8),X(255&f);return E==2?X(255&(f=j(m.charAt(b))<<2|j(m.charAt(b+1))>>4)):E==1&&(X((f=j(m.charAt(b))<<10|j(m.charAt(b+1))<<4|j(m.charAt(b+2))>>2)>>8&255),X(255&f)),k},y.fromByteArray=function(m){var b,f,E,k,W=m.length%3,J="";function X(z){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(z)}for(b=0,E=m.length-W;b<E;b+=3)f=(m[b]<<16)+(m[b+1]<<8)+m[b+2],J+=X((k=f)>>18&63)+X(k>>12&63)+X(k>>6&63)+X(63&k);switch(W){case 1:J=(J+=X((f=m[m.length-1])>>2))+X(f<<4&63)+"==";break;case 2:J=(J=(J+=X((f=(m[m.length-2]<<8)+m[m.length-1])>>10))+X(f>>4&63))+X(f<<2&63)+"="}return J}})(r===void 0?this.base64js={}:r)}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(t,e,r){(function(n,i,h,s,o,u,l,c,d){var y=t("base64-js"),w=t("ieee754");function h(p,g,x){if(!(this instanceof h))return new h(p,g,x);var L,M,V,re,ye=typeof p;if(g==="base64"&&ye=="string")for(p=(re=p).trim?re.trim():re.replace(/^\s+|\s+$/g,"");p.length%4!=0;)p+="=";if(ye=="number")L=Re(p);else if(ye=="string")L=h.byteLength(p,g);else{if(ye!="object")throw new Error("First argument needs to be a number, array or string.");L=Re(p.length)}if(h._useTypedArrays?M=h._augment(new Uint8Array(L)):((M=this).length=L,M._isBuffer=!0),h._useTypedArrays&&typeof p.byteLength=="number")M._set(p);else if(me(re=p)||h.isBuffer(re)||re&&typeof re=="object"&&typeof re.length=="number")for(V=0;V<L;V++)h.isBuffer(p)?M[V]=p.readUInt8(V):M[V]=p[V];else if(ye=="string")M.write(p,0,g);else if(ye=="number"&&!h._useTypedArrays&&!x)for(V=0;V<L;V++)M[V]=0;return M}function _(p,g,x,L){return h._charsWritten=ra(function(M){for(var V=[],re=0;re<M.length;re++)V.push(255&M.charCodeAt(re));return V}(g),p,x,L)}function P(p,g,x,L){return h._charsWritten=ra(function(M){for(var V,re,ye=[],Pe=0;Pe<M.length;Pe++)re=M.charCodeAt(Pe),V=re>>8,re=re%256,ye.push(re),ye.push(V);return ye}(g),p,x,L)}function S(p,g,x){var L="";x=Math.min(p.length,x);for(var M=g;M<x;M++)L+=String.fromCharCode(p[M]);return L}function I(p,g,x,V){V||(U(typeof x=="boolean","missing or invalid endian"),U(g!=null,"missing offset"),U(g+1<p.length,"Trying to read beyond buffer length"));var M,V=p.length;if(!(V<=g))return x?(M=p[g],g+1<V&&(M|=p[g+1]<<8)):(M=p[g]<<8,g+1<V&&(M|=p[g+1])),M}function F(p,g,x,V){V||(U(typeof x=="boolean","missing or invalid endian"),U(g!=null,"missing offset"),U(g+3<p.length,"Trying to read beyond buffer length"));var M,V=p.length;if(!(V<=g))return x?(g+2<V&&(M=p[g+2]<<16),g+1<V&&(M|=p[g+1]<<8),M|=p[g],g+3<V&&(M+=p[g+3]<<24>>>0)):(g+1<V&&(M=p[g+1]<<16),g+2<V&&(M|=p[g+2]<<8),g+3<V&&(M|=p[g+3]),M+=p[g]<<24>>>0),M}function v(p,g,x,L){if(L||(U(typeof x=="boolean","missing or invalid endian"),U(g!=null,"missing offset"),U(g+1<p.length,"Trying to read beyond buffer length")),!(p.length<=g))return L=I(p,g,x,!0),32768&L?-1*(65535-L+1):L}function j(p,g,x,L){if(L||(U(typeof x=="boolean","missing or invalid endian"),U(g!=null,"missing offset"),U(g+3<p.length,"Trying to read beyond buffer length")),!(p.length<=g))return L=F(p,g,x,!0),2147483648&L?-1*(4294967295-L+1):L}function m(p,g,x,L){return L||(U(typeof x=="boolean","missing or invalid endian"),U(g+3<p.length,"Trying to read beyond buffer length")),w.read(p,g,x,23,4)}function b(p,g,x,L){return L||(U(typeof x=="boolean","missing or invalid endian"),U(g+7<p.length,"Trying to read beyond buffer length")),w.read(p,g,x,52,8)}function f(p,g,x,L,M){if(M||(U(g!=null,"missing value"),U(typeof L=="boolean","missing or invalid endian"),U(x!=null,"missing offset"),U(x+1<p.length,"trying to write beyond buffer length"),bo(g,65535)),M=p.length,!(M<=x))for(var V=0,re=Math.min(M-x,2);V<re;V++)p[x+V]=(g&255<<8*(L?V:1-V))>>>8*(L?V:1-V)}function E(p,g,x,L,M){if(M||(U(g!=null,"missing value"),U(typeof L=="boolean","missing or invalid endian"),U(x!=null,"missing offset"),U(x+3<p.length,"trying to write beyond buffer length"),bo(g,4294967295)),M=p.length,!(M<=x))for(var V=0,re=Math.min(M-x,4);V<re;V++)p[x+V]=g>>>8*(L?V:3-V)&255}function k(p,g,x,L,M){M||(U(g!=null,"missing value"),U(typeof L=="boolean","missing or invalid endian"),U(x!=null,"missing offset"),U(x+1<p.length,"Trying to write beyond buffer length"),wo(g,32767,-32768)),p.length<=x||f(p,0<=g?g:65535+g+1,x,L,M)}function W(p,g,x,L,M){M||(U(g!=null,"missing value"),U(typeof L=="boolean","missing or invalid endian"),U(x!=null,"missing offset"),U(x+3<p.length,"Trying to write beyond buffer length"),wo(g,2147483647,-2147483648)),p.length<=x||E(p,0<=g?g:4294967295+g+1,x,L,M)}function J(p,g,x,L,M){M||(U(g!=null,"missing value"),U(typeof L=="boolean","missing or invalid endian"),U(x!=null,"missing offset"),U(x+3<p.length,"Trying to write beyond buffer length"),nc(g,34028234663852886e22,-34028234663852886e22)),p.length<=x||w.write(p,g,x,L,23,4)}function X(p,g,x,L,M){M||(U(g!=null,"missing value"),U(typeof L=="boolean","missing or invalid endian"),U(x!=null,"missing offset"),U(x+7<p.length,"Trying to write beyond buffer length"),nc(g,17976931348623157e292,-17976931348623157e292)),p.length<=x||w.write(p,g,x,L,52,8)}r.Buffer=h,r.SlowBuffer=h,r.INSPECT_MAX_BYTES=50,h.poolSize=8192,h._useTypedArrays=function(){try{var p=new ArrayBuffer(0),g=new Uint8Array(p);return g.foo=function(){return 42},g.foo()===42&&typeof g.subarray=="function"}catch{return!1}}(),h.isEncoding=function(p){switch(String(p).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.isBuffer=function(p){return!(p==null||!p._isBuffer)},h.byteLength=function(p,g){var x;switch(p+="",g||"utf8"){case"hex":x=p.length/2;break;case"utf8":case"utf-8":x=St(p).length;break;case"ascii":case"binary":case"raw":x=p.length;break;case"base64":x=tc(p).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":x=2*p.length;break;default:throw new Error("Unknown encoding")}return x},h.concat=function(p,g){if(U(me(p),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),p.length===0)return new h(0);if(p.length===1)return p[0];if(typeof g!="number")for(M=g=0;M<p.length;M++)g+=p[M].length;for(var x=new h(g),L=0,M=0;M<p.length;M++){var V=p[M];V.copy(x,L),L+=V.length}return x},h.prototype.write=function(p,g,x,L){isFinite(g)?isFinite(x)||(L=x,x=void 0):(Pe=L,L=g,g=x,x=Pe),g=Number(g)||0;var M,V,re,ye,Pe=this.length-g;switch((!x||Pe<(x=Number(x)))&&(x=Pe),L=String(L||"utf8").toLowerCase()){case"hex":M=function(ct,Ze,He,Ee){He=Number(He)||0;var be=ct.length-He;(!Ee||be<(Ee=Number(Ee)))&&(Ee=be),U((be=Ze.length)%2==0,"Invalid hex string"),be/2<Ee&&(Ee=be/2);for(var en=0;en<Ee;en++){var ic=parseInt(Ze.substr(2*en,2),16);U(!isNaN(ic),"Invalid hex string"),ct[He+en]=ic}return h._charsWritten=2*en,en}(this,p,g,x);break;case"utf8":case"utf-8":V=this,re=g,ye=x,M=h._charsWritten=ra(St(p),V,re,ye);break;case"ascii":case"binary":M=_(this,p,g,x);break;case"base64":V=this,re=g,ye=x,M=h._charsWritten=ra(tc(p),V,re,ye);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":M=P(this,p,g,x);break;default:throw new Error("Unknown encoding")}return M},h.prototype.toString=function(p,g,x){var L,M,V,re,ye=this;if(p=String(p||"utf8").toLowerCase(),g=Number(g)||0,(x=x!==void 0?Number(x):ye.length)===g)return"";switch(p){case"hex":L=function(Pe,ct,Ze){var He=Pe.length;(!ct||ct<0)&&(ct=0),(!Ze||Ze<0||He<Ze)&&(Ze=He);for(var Ee="",be=ct;be<Ze;be++)Ee+=de(Pe[be]);return Ee}(ye,g,x);break;case"utf8":case"utf-8":L=function(Pe,ct,Ze){var He="",Ee="";Ze=Math.min(Pe.length,Ze);for(var be=ct;be<Ze;be++)Pe[be]<=127?(He+=rc(Ee)+String.fromCharCode(Pe[be]),Ee=""):Ee+="%"+Pe[be].toString(16);return He+rc(Ee)}(ye,g,x);break;case"ascii":case"binary":L=S(ye,g,x);break;case"base64":M=ye,re=x,L=(V=g)===0&&re===M.length?y.fromByteArray(M):y.fromByteArray(M.slice(V,re));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":L=function(Pe,ct,Ze){for(var He=Pe.slice(ct,Ze),Ee="",be=0;be<He.length;be+=2)Ee+=String.fromCharCode(He[be]+256*He[be+1]);return Ee}(ye,g,x);break;default:throw new Error("Unknown encoding")}return L},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},h.prototype.copy=function(p,g,x,L){if(g=g||0,(L=L||L===0?L:this.length)!==(x=x||0)&&p.length!==0&&this.length!==0){U(x<=L,"sourceEnd < sourceStart"),U(0<=g&&g<p.length,"targetStart out of bounds"),U(0<=x&&x<this.length,"sourceStart out of bounds"),U(0<=L&&L<=this.length,"sourceEnd out of bounds"),L>this.length&&(L=this.length);var M=(L=p.length-g<L-x?p.length-g+x:L)-x;if(M<100||!h._useTypedArrays)for(var V=0;V<M;V++)p[V+g]=this[V+x];else p._set(this.subarray(x,x+M),g)}},h.prototype.slice=function(p,g){var x=this.length;if(p=he(p,x,0),g=he(g,x,x),h._useTypedArrays)return h._augment(this.subarray(p,g));for(var L=g-p,M=new h(L,void 0,!0),V=0;V<L;V++)M[V]=this[V+p];return M},h.prototype.get=function(p){return this.readUInt8(p)},h.prototype.set=function(p,g){return this.writeUInt8(p,g)},h.prototype.readUInt8=function(p,g){if(g||(U(p!=null,"missing offset"),U(p<this.length,"Trying to read beyond buffer length")),!(p>=this.length))return this[p]},h.prototype.readUInt16LE=function(p,g){return I(this,p,!0,g)},h.prototype.readUInt16BE=function(p,g){return I(this,p,!1,g)},h.prototype.readUInt32LE=function(p,g){return F(this,p,!0,g)},h.prototype.readUInt32BE=function(p,g){return F(this,p,!1,g)},h.prototype.readInt8=function(p,g){if(g||(U(p!=null,"missing offset"),U(p<this.length,"Trying to read beyond buffer length")),!(p>=this.length))return 128&this[p]?-1*(255-this[p]+1):this[p]},h.prototype.readInt16LE=function(p,g){return v(this,p,!0,g)},h.prototype.readInt16BE=function(p,g){return v(this,p,!1,g)},h.prototype.readInt32LE=function(p,g){return j(this,p,!0,g)},h.prototype.readInt32BE=function(p,g){return j(this,p,!1,g)},h.prototype.readFloatLE=function(p,g){return m(this,p,!0,g)},h.prototype.readFloatBE=function(p,g){return m(this,p,!1,g)},h.prototype.readDoubleLE=function(p,g){return b(this,p,!0,g)},h.prototype.readDoubleBE=function(p,g){return b(this,p,!1,g)},h.prototype.writeUInt8=function(p,g,x){x||(U(p!=null,"missing value"),U(g!=null,"missing offset"),U(g<this.length,"trying to write beyond buffer length"),bo(p,255)),g>=this.length||(this[g]=p)},h.prototype.writeUInt16LE=function(p,g,x){f(this,p,g,!0,x)},h.prototype.writeUInt16BE=function(p,g,x){f(this,p,g,!1,x)},h.prototype.writeUInt32LE=function(p,g,x){E(this,p,g,!0,x)},h.prototype.writeUInt32BE=function(p,g,x){E(this,p,g,!1,x)},h.prototype.writeInt8=function(p,g,x){x||(U(p!=null,"missing value"),U(g!=null,"missing offset"),U(g<this.length,"Trying to write beyond buffer length"),wo(p,127,-128)),g>=this.length||(0<=p?this.writeUInt8(p,g,x):this.writeUInt8(255+p+1,g,x))},h.prototype.writeInt16LE=function(p,g,x){k(this,p,g,!0,x)},h.prototype.writeInt16BE=function(p,g,x){k(this,p,g,!1,x)},h.prototype.writeInt32LE=function(p,g,x){W(this,p,g,!0,x)},h.prototype.writeInt32BE=function(p,g,x){W(this,p,g,!1,x)},h.prototype.writeFloatLE=function(p,g,x){J(this,p,g,!0,x)},h.prototype.writeFloatBE=function(p,g,x){J(this,p,g,!1,x)},h.prototype.writeDoubleLE=function(p,g,x){X(this,p,g,!0,x)},h.prototype.writeDoubleBE=function(p,g,x){X(this,p,g,!1,x)},h.prototype.fill=function(p,g,x){if(g=g||0,x=x||this.length,U(typeof(p=typeof(p=p||0)=="string"?p.charCodeAt(0):p)=="number"&&!isNaN(p),"value is not a number"),U(g<=x,"end < start"),x!==g&&this.length!==0){U(0<=g&&g<this.length,"start out of bounds"),U(0<=x&&x<=this.length,"end out of bounds");for(var L=g;L<x;L++)this[L]=p}},h.prototype.inspect=function(){for(var p=[],g=this.length,x=0;x<g;x++)if(p[x]=de(this[x]),x===r.INSPECT_MAX_BYTES){p[x+1]="...";break}return"<Buffer "+p.join(" ")+">"},h.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(h._useTypedArrays)return new h(this).buffer;for(var p=new Uint8Array(this.length),g=0,x=p.length;g<x;g+=1)p[g]=this[g];return p.buffer};var z=h.prototype;function he(p,g,x){return typeof p!="number"?x:g<=(p=~~p)?g:0<=p||0<=(p+=g)?p:0}function Re(p){return(p=~~Math.ceil(+p))<0?0:p}function me(p){return(Array.isArray||function(g){return Object.prototype.toString.call(g)==="[object Array]"})(p)}function de(p){return p<16?"0"+p.toString(16):p.toString(16)}function St(p){for(var g=[],x=0;x<p.length;x++){var L=p.charCodeAt(x);if(L<=127)g.push(p.charCodeAt(x));else for(var M=x,V=(55296<=L&&L<=57343&&x++,encodeURIComponent(p.slice(M,x+1)).substr(1).split("%")),re=0;re<V.length;re++)g.push(parseInt(V[re],16))}return g}function tc(p){return y.toByteArray(p)}function ra(p,g,x,L){for(var M=0;M<L&&!(M+x>=g.length||M>=p.length);M++)g[M+x]=p[M];return M}function rc(p){try{return decodeURIComponent(p)}catch{return String.fromCharCode(65533)}}function bo(p,g){U(typeof p=="number","cannot write a non-number as a number"),U(0<=p,"specified a negative value for writing an unsigned value"),U(p<=g,"value is larger than maximum value for type"),U(Math.floor(p)===p,"value has a fractional component")}function wo(p,g,x){U(typeof p=="number","cannot write a non-number as a number"),U(p<=g,"value larger than maximum allowed value"),U(x<=p,"value smaller than minimum allowed value"),U(Math.floor(p)===p,"value has a fractional component")}function nc(p,g,x){U(typeof p=="number","cannot write a non-number as a number"),U(p<=g,"value larger than maximum allowed value"),U(x<=p,"value smaller than minimum allowed value")}function U(p,g){if(!p)throw new Error(g||"Failed assertion")}h._augment=function(p){return p._isBuffer=!0,p._get=p.get,p._set=p.set,p.get=z.get,p.set=z.set,p.write=z.write,p.toString=z.toString,p.toLocaleString=z.toString,p.toJSON=z.toJSON,p.copy=z.copy,p.slice=z.slice,p.readUInt8=z.readUInt8,p.readUInt16LE=z.readUInt16LE,p.readUInt16BE=z.readUInt16BE,p.readUInt32LE=z.readUInt32LE,p.readUInt32BE=z.readUInt32BE,p.readInt8=z.readInt8,p.readInt16LE=z.readInt16LE,p.readInt16BE=z.readInt16BE,p.readInt32LE=z.readInt32LE,p.readInt32BE=z.readInt32BE,p.readFloatLE=z.readFloatLE,p.readFloatBE=z.readFloatBE,p.readDoubleLE=z.readDoubleLE,p.readDoubleBE=z.readDoubleBE,p.writeUInt8=z.writeUInt8,p.writeUInt16LE=z.writeUInt16LE,p.writeUInt16BE=z.writeUInt16BE,p.writeUInt32LE=z.writeUInt32LE,p.writeUInt32BE=z.writeUInt32BE,p.writeInt8=z.writeInt8,p.writeInt16LE=z.writeInt16LE,p.writeInt16BE=z.writeInt16BE,p.writeInt32LE=z.writeInt32LE,p.writeInt32BE=z.writeInt32BE,p.writeFloatLE=z.writeFloatLE,p.writeFloatBE=z.writeFloatBE,p.writeDoubleLE=z.writeDoubleLE,p.writeDoubleBE=z.writeDoubleBE,p.fill=z.fill,p.inspect=z.inspect,p.toArrayBuffer=z.toArrayBuffer,p}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(t,e,r){(function(n,i,y,s,o,u,l,c,d){var y=t("buffer").Buffer,w=4,h=new y(w);h.fill(0),e.exports={hash:function(_,P,S,I){for(var F=P(function(f,E){f.length%w!=0&&(k=f.length+(w-f.length%w),f=y.concat([f,h],k));for(var k,W=[],J=E?f.readInt32BE:f.readInt32LE,X=0;X<f.length;X+=w)W.push(J.call(f,X));return W}(_=y.isBuffer(_)?_:new y(_),I),8*_.length),P=I,v=new y(S),j=P?v.writeInt32BE:v.writeInt32LE,m=0;m<F.length;m++)j.call(v,F[m],4*m,!0);return v}}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(t,e,r){(function(n,i,y,s,o,u,l,c,d){var y=t("buffer").Buffer,w=t("./sha"),h=t("./sha256"),_=t("./rng"),P={sha1:w,sha256:h,md5:t("./md5")},S=64,I=new y(S);function F(f,E){var k=P[f=f||"sha1"],W=[];return k||v("algorithm:",f,"is not yet supported"),{update:function(J){return y.isBuffer(J)||(J=new y(J)),W.push(J),J.length,this},digest:function(J){var X=y.concat(W),X=E?function(z,he,Re){y.isBuffer(he)||(he=new y(he)),y.isBuffer(Re)||(Re=new y(Re)),he.length>S?he=z(he):he.length<S&&(he=y.concat([he,I],S));for(var me=new y(S),de=new y(S),St=0;St<S;St++)me[St]=54^he[St],de[St]=92^he[St];return Re=z(y.concat([me,Re])),z(y.concat([de,Re]))}(k,E,X):k(X);return W=null,J?X.toString(J):X}}}function v(){var f=[].slice.call(arguments).join(" ");throw new Error([f,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}I.fill(0),r.createHash=function(f){return F(f)},r.createHmac=F,r.randomBytes=function(f,E){if(!E||!E.call)return new y(_(f));try{E.call(this,void 0,new y(_(f)))}catch(k){E(k)}};var j,m=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],b=function(f){r[f]=function(){v("sorry,",f,"is not implemented yet")}};for(j in m)b(m[j],j)}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(t,e,r){(function(n,i,a,s,o,u,l,c,d){var y=t("./helpers");function w(v,j){v[j>>5]|=128<<j%32,v[14+(j+64>>>9<<4)]=j;for(var m=1732584193,b=-271733879,f=-1732584194,E=271733878,k=0;k<v.length;k+=16){var W=m,J=b,X=f,z=E,m=_(m,b,f,E,v[k+0],7,-680876936),E=_(E,m,b,f,v[k+1],12,-389564586),f=_(f,E,m,b,v[k+2],17,606105819),b=_(b,f,E,m,v[k+3],22,-1044525330);m=_(m,b,f,E,v[k+4],7,-176418897),E=_(E,m,b,f,v[k+5],12,1200080426),f=_(f,E,m,b,v[k+6],17,-1473231341),b=_(b,f,E,m,v[k+7],22,-45705983),m=_(m,b,f,E,v[k+8],7,1770035416),E=_(E,m,b,f,v[k+9],12,-1958414417),f=_(f,E,m,b,v[k+10],17,-42063),b=_(b,f,E,m,v[k+11],22,-1990404162),m=_(m,b,f,E,v[k+12],7,1804603682),E=_(E,m,b,f,v[k+13],12,-40341101),f=_(f,E,m,b,v[k+14],17,-1502002290),m=P(m,b=_(b,f,E,m,v[k+15],22,1236535329),f,E,v[k+1],5,-165796510),E=P(E,m,b,f,v[k+6],9,-1069501632),f=P(f,E,m,b,v[k+11],14,643717713),b=P(b,f,E,m,v[k+0],20,-373897302),m=P(m,b,f,E,v[k+5],5,-701558691),E=P(E,m,b,f,v[k+10],9,38016083),f=P(f,E,m,b,v[k+15],14,-660478335),b=P(b,f,E,m,v[k+4],20,-405537848),m=P(m,b,f,E,v[k+9],5,568446438),E=P(E,m,b,f,v[k+14],9,-1019803690),f=P(f,E,m,b,v[k+3],14,-187363961),b=P(b,f,E,m,v[k+8],20,1163531501),m=P(m,b,f,E,v[k+13],5,-1444681467),E=P(E,m,b,f,v[k+2],9,-51403784),f=P(f,E,m,b,v[k+7],14,1735328473),m=S(m,b=P(b,f,E,m,v[k+12],20,-1926607734),f,E,v[k+5],4,-378558),E=S(E,m,b,f,v[k+8],11,-2022574463),f=S(f,E,m,b,v[k+11],16,1839030562),b=S(b,f,E,m,v[k+14],23,-35309556),m=S(m,b,f,E,v[k+1],4,-1530992060),E=S(E,m,b,f,v[k+4],11,1272893353),f=S(f,E,m,b,v[k+7],16,-155497632),b=S(b,f,E,m,v[k+10],23,-1094730640),m=S(m,b,f,E,v[k+13],4,681279174),E=S(E,m,b,f,v[k+0],11,-358537222),f=S(f,E,m,b,v[k+3],16,-722521979),b=S(b,f,E,m,v[k+6],23,76029189),m=S(m,b,f,E,v[k+9],4,-640364487),E=S(E,m,b,f,v[k+12],11,-421815835),f=S(f,E,m,b,v[k+15],16,530742520),m=I(m,b=S(b,f,E,m,v[k+2],23,-995338651),f,E,v[k+0],6,-198630844),E=I(E,m,b,f,v[k+7],10,1126891415),f=I(f,E,m,b,v[k+14],15,-1416354905),b=I(b,f,E,m,v[k+5],21,-57434055),m=I(m,b,f,E,v[k+12],6,1700485571),E=I(E,m,b,f,v[k+3],10,-1894986606),f=I(f,E,m,b,v[k+10],15,-1051523),b=I(b,f,E,m,v[k+1],21,-2054922799),m=I(m,b,f,E,v[k+8],6,1873313359),E=I(E,m,b,f,v[k+15],10,-30611744),f=I(f,E,m,b,v[k+6],15,-1560198380),b=I(b,f,E,m,v[k+13],21,1309151649),m=I(m,b,f,E,v[k+4],6,-145523070),E=I(E,m,b,f,v[k+11],10,-1120210379),f=I(f,E,m,b,v[k+2],15,718787259),b=I(b,f,E,m,v[k+9],21,-343485551),m=F(m,W),b=F(b,J),f=F(f,X),E=F(E,z)}return Array(m,b,f,E)}function h(v,j,m,b,f,E){return F((j=F(F(j,v),F(b,E)))<<f|j>>>32-f,m)}function _(v,j,m,b,f,E,k){return h(j&m|~j&b,v,j,f,E,k)}function P(v,j,m,b,f,E,k){return h(j&b|m&~b,v,j,f,E,k)}function S(v,j,m,b,f,E,k){return h(j^m^b,v,j,f,E,k)}function I(v,j,m,b,f,E,k){return h(m^(j|~b),v,j,f,E,k)}function F(v,j){var m=(65535&v)+(65535&j);return(v>>16)+(j>>16)+(m>>16)<<16|65535&m}e.exports=function(v){return y.hash(v,w,16)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(t,e,r){(function(n,i,a,s,o,u,l,c,d){var y;e.exports=y||function(w){for(var h,_=new Array(w),P=0;P<w;P++)!(3&P)&&(h=4294967296*Math.random()),_[P]=h>>>((3&P)<<3)&255;return _}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(t,e,r){(function(n,i,a,s,o,u,l,c,d){var y=t("./helpers");function w(P,S){P[S>>5]|=128<<24-S%32,P[15+(S+64>>9<<4)]=S;for(var I,F,v,j=Array(80),m=1732584193,b=-271733879,f=-1732584194,E=271733878,k=-1009589776,W=0;W<P.length;W+=16){for(var J=m,X=b,z=f,he=E,Re=k,me=0;me<80;me++){j[me]=me<16?P[W+me]:_(j[me-3]^j[me-8]^j[me-14]^j[me-16],1);var de=h(h(_(m,5),(de=b,F=f,v=E,(I=me)<20?de&F|~de&v:!(I<40)&&I<60?de&F|de&v|F&v:de^F^v)),h(h(k,j[me]),(I=me)<20?1518500249:I<40?1859775393:I<60?-1894007588:-899497514)),k=E,E=f,f=_(b,30),b=m,m=de}m=h(m,J),b=h(b,X),f=h(f,z),E=h(E,he),k=h(k,Re)}return Array(m,b,f,E,k)}function h(P,S){var I=(65535&P)+(65535&S);return(P>>16)+(S>>16)+(I>>16)<<16|65535&I}function _(P,S){return P<<S|P>>>32-S}e.exports=function(P){return y.hash(P,w,20,!0)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(t,e,r){(function(n,i,a,s,o,u,l,c,d){function y(S,I){var F=(65535&S)+(65535&I);return(S>>16)+(I>>16)+(F>>16)<<16|65535&F}function w(S,I){var F,v=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),j=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),m=new Array(64);S[I>>5]|=128<<24-I%32,S[15+(I+64>>9<<4)]=I;for(var b,f,E=0;E<S.length;E+=16){for(var k=j[0],W=j[1],J=j[2],X=j[3],z=j[4],he=j[5],Re=j[6],me=j[7],de=0;de<64;de++)m[de]=de<16?S[de+E]:y(y(y((f=m[de-2],_(f,17)^_(f,19)^P(f,10)),m[de-7]),(f=m[de-15],_(f,7)^_(f,18)^P(f,3))),m[de-16]),F=y(y(y(y(me,_(f=z,6)^_(f,11)^_(f,25)),z&he^~z&Re),v[de]),m[de]),b=y(_(b=k,2)^_(b,13)^_(b,22),k&W^k&J^W&J),me=Re,Re=he,he=z,z=y(X,F),X=J,J=W,W=k,k=y(F,b);j[0]=y(k,j[0]),j[1]=y(W,j[1]),j[2]=y(J,j[2]),j[3]=y(X,j[3]),j[4]=y(z,j[4]),j[5]=y(he,j[5]),j[6]=y(Re,j[6]),j[7]=y(me,j[7])}return j}var h=t("./helpers"),_=function(S,I){return S>>>I|S<<32-I},P=function(S,I){return S>>>I};e.exports=function(S){return h.hash(S,w,32,!0)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(t,e,r){(function(n,i,a,s,o,u,l,c,d){r.read=function(y,w,h,_,E){var S,I,F=8*E-_-1,v=(1<<F)-1,j=v>>1,m=-7,b=h?E-1:0,f=h?-1:1,E=y[w+b];for(b+=f,S=E&(1<<-m)-1,E>>=-m,m+=F;0<m;S=256*S+y[w+b],b+=f,m-=8);for(I=S&(1<<-m)-1,S>>=-m,m+=_;0<m;I=256*I+y[w+b],b+=f,m-=8);if(S===0)S=1-j;else{if(S===v)return I?NaN:1/0*(E?-1:1);I+=Math.pow(2,_),S-=j}return(E?-1:1)*I*Math.pow(2,S-_)},r.write=function(y,w,h,_,P,k){var I,F,v=8*k-P-1,j=(1<<v)-1,m=j>>1,b=P===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=_?0:k-1,E=_?1:-1,k=w<0||w===0&&1/w<0?1:0;for(w=Math.abs(w),isNaN(w)||w===1/0?(F=isNaN(w)?1:0,I=j):(I=Math.floor(Math.log(w)/Math.LN2),w*(_=Math.pow(2,-I))<1&&(I--,_*=2),2<=(w+=1<=I+m?b/_:b*Math.pow(2,1-m))*_&&(I++,_/=2),j<=I+m?(F=0,I=j):1<=I+m?(F=(w*_-1)*Math.pow(2,P),I+=m):(F=w*Math.pow(2,m-1)*Math.pow(2,P),I=0));8<=P;y[h+f]=255&F,f+=E,F/=256,P-=8);for(I=I<<P|F,v+=P;0<v;y[h+f]=255&I,f+=E,I/=256,v-=8);y[h+f-E]|=128*k}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(t,e,r){(function(n,i,a,s,o,u,l,c,d){var y,w,h;function _(){}(n=e.exports={}).nextTick=(w=typeof window<"u"&&window.setImmediate,h=typeof window<"u"&&window.postMessage&&window.addEventListener,w?function(P){return window.setImmediate(P)}:h?(y=[],window.addEventListener("message",function(P){var S=P.source;S!==window&&S!==null||P.data!=="process-tick"||(P.stopPropagation(),0<y.length&&y.shift()())},!0),function(P){y.push(P),window.postMessage("process-tick","*")}):function(P){setTimeout(P,0)}),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.on=_,n.addListener=_,n.once=_,n.off=_,n.removeListener=_,n.removeAllListeners=_,n.emit=_,n.binding=function(P){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(P){throw new Error("process.chdir is not supported")}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})});var Lp,Pu,Dp=R(()=>{Lp=ge(Mp(),1),Pu=(...t)=>(0,Lp.default)(t.join("_"))});var Fp=N((PI,qp)=>{"use strict";qp.exports=function(t,e){if(typeof t!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,t.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()}});var Zp=N((EI,Eu)=>{"use strict";var Qb=/[\p{Lu}]/u,Xb=/[\p{Ll}]/u,Up=/^[\p{Lu}](?![\p{Lu}])/gu,Bp=/([\p{Alpha}\p{N}_]|$)/u,Kp=/[_.\- ]+/,ew=new RegExp("^"+Kp.source),Vp=new RegExp(Kp.source+Bp.source,"gu"),zp=new RegExp("\\d+"+Bp.source,"gu"),tw=(t,e,r)=>{let n=!1,i=!1,a=!1;for(let s=0;s<t.length;s++){let o=t[s];n&&Qb.test(o)?(t=t.slice(0,s)+"-"+t.slice(s),n=!1,a=i,i=!0,s++):i&&a&&Xb.test(o)?(t=t.slice(0,s-1)+"-"+t.slice(s-1),a=i,i=!1,n=!0):(n=e(o)===o&&r(o)!==o,a=i,i=r(o)===o&&e(o)!==o)}return t},rw=(t,e)=>(Up.lastIndex=0,t.replace(Up,r=>e(r))),nw=(t,e)=>(Vp.lastIndex=0,zp.lastIndex=0,t.replace(Vp,(r,n)=>e(n)).replace(zp,r=>e(r))),$p=(t,e)=>{if(!(typeof t=="string"||Array.isArray(t)))throw new TypeError("Expected the input to be `string | string[]`");if(e={pascalCase:!1,preserveConsecutiveUppercase:!1,...e},Array.isArray(t)?t=t.map(a=>a.trim()).filter(a=>a.length).join("-"):t=t.trim(),t.length===0)return"";let r=e.locale===!1?a=>a.toLowerCase():a=>a.toLocaleLowerCase(e.locale),n=e.locale===!1?a=>a.toUpperCase():a=>a.toLocaleUpperCase(e.locale);return t.length===1?e.pascalCase?n(t):r(t):(t!==r(t)&&(t=tw(t,r,n)),t=t.replace(ew,""),e.preserveConsecutiveUppercase?t=rw(t,r):t=r(t),e.pascalCase&&(t=n(t.charAt(0))+t.slice(1)),nw(t,n))};Eu.exports=$p;Eu.exports.default=$p});function Jp(t,e){return e?.[t]||(0,Hp.default)(t)}function Yp(t,e,r){let n={};for(let i in t)Object.hasOwn(t,i)&&(n[e(i,r)]=t[i]);return n}var Hp,iw,Wp=R(()=>{Hp=ge(Fp(),1),iw=ge(Zp(),1)});function Gp(t){return Array.isArray(t)?[...t]:{...t}}function aw(t,e){let r=Gp(t);for(let[n,i]of Object.entries(e)){let[a,...s]=n.split(".").reverse(),o=r;for(let u of s.reverse()){if(o[u]===void 0)break;o[u]=Gp(o[u]),o=o[u]}o[a]!==void 0&&(o[a]={lc:1,type:"secret",id:[i]})}return r}var je,br=R(()=>{Wp();je=class{get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}constructor(e,...r){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_kwargs=e||{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof je||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();let e={},r={},n=Object.keys(this.lc_kwargs).reduce((i,a)=>(i[a]=a in this?this[a]:this.lc_kwargs[a],i),{});for(let i=Object.getPrototypeOf(this);i;i=Object.getPrototypeOf(i))Object.assign(e,Reflect.get(i,"lc_aliases",this)),Object.assign(r,Reflect.get(i,"lc_secrets",this)),Object.assign(n,Reflect.get(i,"lc_attributes",this));for(let i in r)i in this&&this[i]!==void 0&&(n[i]=this[i]||n[i]);return{lc:1,type:"constructor",id:[...this.lc_namespace,this.constructor.name],kwargs:Yp(Object.keys(r).length?aw(n,r):n,Jp,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:[...this.lc_namespace,this.constructor.name]}}}});var gn,ht,wr,_r,ft,vr,_t,xr,hn,Or,Ar,fn,Pr,mn,yn,Ca,nt=R(()=>{br();gn="__run",ht=class{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new ht({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}},wr=class extends je{get text(){return this.content}constructor(e,r){typeof e=="string"&&(e={content:e,additional_kwargs:r}),e.additional_kwargs||(e.additional_kwargs={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}},_r=class extends wr{static _mergeAdditionalKwargs(e,r){let n={...e};for(let[i,a]of Object.entries(r))if(n[i]===void 0)n[i]=a;else{if(typeof n[i]!=typeof a)throw new Error(`additional_kwargs[${i}] already exists in the message chunk, but with a different type.`);if(typeof n[i]=="string")n[i]=n[i]+a;else if(!Array.isArray(n[i])&&typeof n[i]=="object")n[i]=this._mergeAdditionalKwargs(n[i],a);else throw new Error(`additional_kwargs[${i}] already exists in this message chunk.`)}return n}},ft=class extends wr{_getType(){return"human"}},vr=class extends _r{_getType(){return"human"}concat(e){return new vr({content:this.content+e.content,additional_kwargs:vr._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs)})}},_t=class extends wr{_getType(){return"ai"}},xr=class extends _r{_getType(){return"ai"}concat(e){return new xr({content:this.content+e.content,additional_kwargs:xr._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs)})}},hn=class extends wr{_getType(){return"system"}},Or=class extends _r{_getType(){return"system"}concat(e){return new Or({content:this.content+e.content,additional_kwargs:Or._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs)})}},Ar=class extends _r{_getType(){return"function"}concat(e){return new Ar({content:this.content+e.content,additional_kwargs:Ar._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs),name:this.name??""})}},fn=class extends wr{constructor(e,r){typeof e=="string"&&(e={content:e,role:r}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}static isInstance(e){return e._getType()==="generic"}},Pr=class extends _r{constructor(e,r){typeof e=="string"&&(e={content:e,role:r}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}concat(e){return new Pr({content:this.content+e.content,additional_kwargs:Pr._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs),role:this.role})}},mn=class extends ht{constructor(e){super(e),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=e.message}concat(e){return new mn({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo},message:this.message.concat(e.message)})}},yn=class extends je{},Ca=class{}});var sw,bn,Qp=R(()=>{Dp();nt();sw=new Map,bn=class extends Ca{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,r){return Promise.resolve(this.cache.get(Pu(e,r))??null)}async update(e,r,n){this.cache.set(Pu(e,r),n)}static global(){return new bn(sw)}}});var eh=N((MI,Xp)=>{function it(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}Xp.exports=it;it.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};it.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};it.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},r),this._options.unref&&this._timer.unref(),!0};it.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};it.prototype.try=function(t){this.attempt(t)};it.prototype.start=function(t){this.attempt(t)};it.prototype.start=it.prototype.try;it.prototype.errors=function(){return this._errors};it.prototype.attempts=function(){return this._attempts};it.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,r=0,n=0;n<this._errors.length;n++){var i=this._errors[n],a=i.message,s=(t[a]||0)+1;t[a]=s,s>=r&&(e=i,r=s)}return e}});var th=N(Er=>{var ow=eh();Er.operation=function(t){var e=Er.timeouts(t);return new ow(e,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})};Er.timeouts=function(t){if(t instanceof Array)return[].concat(t);var e={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var r in t)e[r]=t[r];if(e.minTimeout>e.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var n=[],i=0;i<e.retries;i++)n.push(this.createTimeout(i,e));return t&&t.forever&&!n.length&&n.push(this.createTimeout(i,e)),n.sort(function(a,s){return a-s}),n};Er.createTimeout=function(t,e){var r=e.randomize?Math.random()+1:1,n=Math.round(r*Math.max(e.minTimeout,1)*Math.pow(e.factor,t));return n=Math.min(n,e.maxTimeout),n};Er.wrap=function(t,e,r){if(e instanceof Array&&(r=e,e=null),!r){r=[];for(var n in t)typeof t[n]=="function"&&r.push(n)}for(var i=0;i<r.length;i++){var a=r[i],s=t[a];t[a]=function(u){var l=Er.operation(e),c=Array.prototype.slice.call(arguments,1),d=c.pop();c.push(function(y){l.retry(y)||(y&&(arguments[0]=l.mainError()),d.apply(this,arguments))}),l.attempt(function(){u.apply(t,c)})}.bind(t,s),t[a].options=e}}});var nh=N((DI,rh)=>{rh.exports=th()});var Tu=N((qI,ja)=>{"use strict";var uw=nh(),lw=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"],Sa=class extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}},cw=(t,e,r)=>{let n=r.retries-(e-1);return t.attemptNumber=e,t.retriesLeft=n,t},dw=t=>lw.includes(t),ih=(t,e)=>new Promise((r,n)=>{e={onFailedAttempt:()=>{},retries:10,...e};let i=uw.operation(e);i.attempt(async a=>{try{r(await t(a))}catch(s){if(!(s instanceof Error)){n(new TypeError(`Non-error was thrown: "${s}". You should only throw errors.`));return}if(s instanceof Sa)i.stop(),n(s.originalError);else if(s instanceof TypeError&&!dw(s.message))i.stop(),n(s);else{cw(s,a,e);try{await e.onFailedAttempt(s)}catch(o){n(o);return}i.retry(s)||n(i.mainError())}}})});ja.exports=ih;ja.exports.default=ih;ja.exports.AbortError=Sa});var sh=N((FI,Iu)=>{"use strict";var pw=Object.prototype.hasOwnProperty,$e="~";function gi(){}Object.create&&(gi.prototype=Object.create(null),new gi().__proto__||($e=!1));function hw(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function ah(t,e,r,n,i){if(typeof r!="function")throw new TypeError("The listener must be a function");var a=new hw(r,n||t,i),s=$e?$e+e:e;return t._events[s]?t._events[s].fn?t._events[s]=[t._events[s],a]:t._events[s].push(a):(t._events[s]=a,t._eventsCount++),t}function ka(t,e){--t._eventsCount===0?t._events=new gi:delete t._events[e]}function Le(){this._events=new gi,this._eventsCount=0}Le.prototype.eventNames=function(){var e=[],r,n;if(this._eventsCount===0)return e;for(n in r=this._events)pw.call(r,n)&&e.push($e?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};Le.prototype.listeners=function(e){var r=$e?$e+e:e,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,s=new Array(a);i<a;i++)s[i]=n[i].fn;return s};Le.prototype.listenerCount=function(e){var r=$e?$e+e:e,n=this._events[r];return n?n.fn?1:n.length:0};Le.prototype.emit=function(e,r,n,i,a,s){var o=$e?$e+e:e;if(!this._events[o])return!1;var u=this._events[o],l=arguments.length,c,d;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),l){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,r),!0;case 3:return u.fn.call(u.context,r,n),!0;case 4:return u.fn.call(u.context,r,n,i),!0;case 5:return u.fn.call(u.context,r,n,i,a),!0;case 6:return u.fn.call(u.context,r,n,i,a,s),!0}for(d=1,c=new Array(l-1);d<l;d++)c[d-1]=arguments[d];u.fn.apply(u.context,c)}else{var y=u.length,w;for(d=0;d<y;d++)switch(u[d].once&&this.removeListener(e,u[d].fn,void 0,!0),l){case 1:u[d].fn.call(u[d].context);break;case 2:u[d].fn.call(u[d].context,r);break;case 3:u[d].fn.call(u[d].context,r,n);break;case 4:u[d].fn.call(u[d].context,r,n,i);break;default:if(!c)for(w=1,c=new Array(l-1);w<l;w++)c[w-1]=arguments[w];u[d].fn.apply(u[d].context,c)}}return!0};Le.prototype.on=function(e,r,n){return ah(this,e,r,n,!1)};Le.prototype.once=function(e,r,n){return ah(this,e,r,n,!0)};Le.prototype.removeListener=function(e,r,n,i){var a=$e?$e+e:e;if(!this._events[a])return this;if(!r)return ka(this,a),this;var s=this._events[a];if(s.fn)s.fn===r&&(!i||s.once)&&(!n||s.context===n)&&ka(this,a);else{for(var o=0,u=[],l=s.length;o<l;o++)(s[o].fn!==r||i&&!s[o].once||n&&s[o].context!==n)&&u.push(s[o]);u.length?this._events[a]=u.length===1?u[0]:u:ka(this,a)}return this};Le.prototype.removeAllListeners=function(e){var r;return e?(r=$e?$e+e:e,this._events[r]&&ka(this,r)):(this._events=new gi,this._eventsCount=0),this};Le.prototype.off=Le.prototype.removeListener;Le.prototype.addListener=Le.prototype.on;Le.prefixed=$e;Le.EventEmitter=Le;typeof Iu<"u"&&(Iu.exports=Le)});var uh=N((UI,oh)=>{"use strict";oh.exports=(t,e)=>(e=e||(()=>{}),t.then(r=>new Promise(n=>{n(e())}).then(()=>r),r=>new Promise(n=>{n(e())}).then(()=>{throw r})))});var ch=N((VI,Na)=>{"use strict";var fw=uh(),Ra=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},lh=(t,e,r)=>new Promise((n,i)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){n(t);return}let a=setTimeout(()=>{if(typeof r=="function"){try{n(r())}catch(u){i(u)}return}let s=typeof r=="string"?r:`Promise timed out after ${e} milliseconds`,o=r instanceof Error?r:new Ra(s);typeof t.cancel=="function"&&t.cancel(),i(o)},e);fw(t.then(n,i),()=>{clearTimeout(a)})});Na.exports=lh;Na.exports.default=lh;Na.exports.TimeoutError=Ra});var dh=N(Cu=>{"use strict";Object.defineProperty(Cu,"__esModule",{value:!0});function mw(t,e,r){let n=0,i=t.length;for(;i>0;){let a=i/2|0,s=n+a;r(t[s],e)<=0?(n=++s,i-=a+1):i=a}return n}Cu.default=mw});var ph=N(ju=>{"use strict";Object.defineProperty(ju,"__esModule",{value:!0});var yw=dh(),Su=class{constructor(){this._queue=[]}enqueue(e,r){r=Object.assign({priority:0},r);let n={priority:r.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=r.priority){this._queue.push(n);return}let i=yw.default(this._queue,n,(a,s)=>s.priority-a.priority);this._queue.splice(i,0,n)}dequeue(){let e=this._queue.shift();return e?.run}filter(e){return this._queue.filter(r=>r.priority===e.priority).map(r=>r.run)}get size(){return this._queue.length}};ju.default=Su});var La=N(Ru=>{"use strict";Object.defineProperty(Ru,"__esModule",{value:!0});var gw=sh(),hh=ch(),bw=ph(),Ma=()=>{},ww=new hh.TimeoutError,ku=class extends gw{constructor(e){var r,n,i,a;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=Ma,this._resolveIdle=Ma,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:bw.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(r=e.intervalCap)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(a=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=Ma,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=Ma,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let e=Date.now();if(this._intervalId===void 0){let r=this._intervalEnd-e;if(r<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},r)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let r=this._queue.dequeue();return r?(this.emit("active"),r(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,r={}){return new Promise((n,i)=>{let a=async()=>{this._pendingCount++,this._intervalCount++;try{let s=this._timeout===void 0&&r.timeout===void 0?e():hh.default(Promise.resolve(e()),r.timeout===void 0?this._timeout:r.timeout,()=>{(r.throwOnTimeout===void 0?this._throwOnTimeout:r.throwOnTimeout)&&i(ww)});n(await s)}catch(s){i(s)}this._next()};this._queue.enqueue(a,r),this._tryToStartAnother(),this.emit("add")})}async addAll(e,r){return Promise.all(e.map(async n=>this.add(n,r)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{let r=this._resolveEmpty;this._resolveEmpty=()=>{r(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{let r=this._resolveIdle;this._resolveIdle=()=>{r(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}};Ru.default=ku});var fh,Da,_w,Mt,bi=R(()=>{fh=ge(Tu(),1),Da=ge(La(),1),_w=[400,401,403,404,405,406,407,408,409],Mt=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6;let r="default"in Da.default?Da.default.default:Da.default;this.queue=new r({concurrency:this.maxConcurrency})}call(e,...r){return this.queue.add(()=>(0,fh.default)(()=>e(...r).catch(n=>{throw n instanceof Error?n:new Error(n)}),{onFailedAttempt(n){if(n.message.startsWith("Cancel")||n.message.startsWith("TimeoutError")||n.message.startsWith("AbortError")||n?.code==="ECONNABORTED")throw n;let i=n?.response?.status;if(i&&_w.includes(+i))throw n;let a=n?.response?.data;if(a?.error?.code==="insufficient_quota"){let s=new Error(a?.error?.message);throw s.name="InsufficientQuotaError",s}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,r,...n){return e.signal?Promise.race([this.call(r,...n),new Promise((i,a)=>{e.signal?.addEventListener("abort",()=>{a(new Error("AbortError"))})})]):this.call(r,...n)}fetch(...e){return this.call(()=>fetch(...e).then(r=>r.ok?r:Promise.reject(r)))}}});var vw,xw,mh,Nu=R(()=>{vw=Object.defineProperty,xw=(t,e,r)=>e in t?vw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,mh=(t,e,r)=>(xw(t,typeof e!="symbol"?e+"":e,r),r)});var bh=N(qa=>{"use strict";qa.byteLength=Aw;qa.toByteArray=Ew;qa.fromByteArray=Cw;var vt=[],at=[],Ow=typeof Uint8Array<"u"?Uint8Array:Array,Mu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Tr=0,yh=Mu.length;Tr<yh;++Tr)vt[Tr]=Mu[Tr],at[Mu.charCodeAt(Tr)]=Tr;var Tr,yh;at["-".charCodeAt(0)]=62;at["_".charCodeAt(0)]=63;function gh(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function Aw(t){var e=gh(t),r=e[0],n=e[1];return(r+n)*3/4-n}function Pw(t,e,r){return(e+r)*3/4-r}function Ew(t){var e,r=gh(t),n=r[0],i=r[1],a=new Ow(Pw(t,n,i)),s=0,o=i>0?n-4:n,u;for(u=0;u<o;u+=4)e=at[t.charCodeAt(u)]<<18|at[t.charCodeAt(u+1)]<<12|at[t.charCodeAt(u+2)]<<6|at[t.charCodeAt(u+3)],a[s++]=e>>16&255,a[s++]=e>>8&255,a[s++]=e&255;return i===2&&(e=at[t.charCodeAt(u)]<<2|at[t.charCodeAt(u+1)]>>4,a[s++]=e&255),i===1&&(e=at[t.charCodeAt(u)]<<10|at[t.charCodeAt(u+1)]<<4|at[t.charCodeAt(u+2)]>>2,a[s++]=e>>8&255,a[s++]=e&255),a}function Tw(t){return vt[t>>18&63]+vt[t>>12&63]+vt[t>>6&63]+vt[t&63]}function Iw(t,e,r){for(var n,i=[],a=e;a<r;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(t[a+2]&255),i.push(Tw(n));return i.join("")}function Cw(t){for(var e,r=t.length,n=r%3,i=[],a=16383,s=0,o=r-n;s<o;s+=a)i.push(Iw(t,s,s+a>o?o:s+a));return n===1?(e=t[r-1],i.push(vt[e>>2]+vt[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(vt[e>>10]+vt[e>>4&63]+vt[e<<2&63]+"=")),i.join("")}});function Sw(t,e){let r=Array.from({length:t.length},(n,i)=>({start:i,end:i+1}));for(;r.length>1;){let n=null;for(let i=0;i<r.length-1;i++){let a=t.slice(r[i].start,r[i+1].end),s=e.get(a.join(","));s!=null&&(n==null||s<n[0])&&(n=[s,i])}if(n!=null){let i=n[1];r[i]={start:r[i].start,end:r[i+1].end},r.splice(i+1,1)}else break}return r}function jw(t,e){return t.length===1?[e.get(t.join(","))]:Sw(t,e).map(r=>e.get(t.slice(r.start,r.end).join(","))).filter(r=>r!=null)}function kw(t){return t.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}function Du(t){switch(t){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"text-embedding-ada-002":return"cl100k_base";default:throw new Error("Unknown model")}}var wh,Lu,Fa,_h=R(()=>{Nu();wh=ge(bh(),1);Lu=class{specialTokens;inverseSpecialTokens;patStr;textEncoder=new TextEncoder;textDecoder=new TextDecoder("utf-8");rankMap=new Map;textMap=new Map;constructor(t,e){this.patStr=t.pat_str;let r=t.bpe_ranks.split(`
`).filter(Boolean).reduce((n,i)=>{let[a,s,...o]=i.split(" "),u=Number.parseInt(s,10);return o.forEach((l,c)=>n[l]=u+c),n},{});for(let[n,i]of Object.entries(r)){let a=wh.default.toByteArray(n);this.rankMap.set(a.join(","),i),this.textMap.set(i,a)}this.specialTokens={...t.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((n,[i,a])=>(n[a]=this.textEncoder.encode(i),n),{})}encode(t,e=[],r="all"){let n=new RegExp(this.patStr,"ug"),i=Lu.specialTokenRegex(Object.keys(this.specialTokens)),a=[],s=new Set(e==="all"?Object.keys(this.specialTokens):e),o=new Set(r==="all"?Object.keys(this.specialTokens).filter(l=>!s.has(l)):r);if(o.size>0){let l=Lu.specialTokenRegex([...o]),c=t.match(l);if(c!=null)throw new Error(`The text contains a special token that is not allowed: ${c[0]}`)}let u=0;for(;;){let l=null,c=u;for(;i.lastIndex=c,l=i.exec(t),!(l==null||s.has(l[0]));)c=l.index+1;let d=l?.index??t.length;for(let w of t.substring(u,d).matchAll(n)){let h=this.textEncoder.encode(w[0]),_=this.rankMap.get(h.join(","));if(_!=null){a.push(_);continue}a.push(...jw(h,this.rankMap))}if(l==null)break;let y=this.specialTokens[l[0]];a.push(y),u=l.index+l[0].length}return a}decode(t){let e=[],r=0;for(let a=0;a<t.length;++a){let s=t[a],o=this.textMap.get(s)??this.inverseSpecialTokens[s];o!=null&&(e.push(o),r+=o.length)}let n=new Uint8Array(r),i=0;for(let a of e)n.set(a,i),i+=a.length;return this.textDecoder.decode(n)}},Fa=Lu;mh(Fa,"specialTokenRegex",t=>new RegExp(t.map(e=>kw(e)).join("|"),"g"))});var vh=R(()=>{_h();Nu()});async function qu(t,e){return t in Ua||(Ua[t]=Rw.fetch(`https://tiktoken.pages.dev/js/${t}.json`,{signal:e?.signal}).then(r=>r.json()).catch(r=>{throw delete Ua[t],r})),new Fa(await Ua[t],e?.extendedSpecialTokens)}async function Va(t,e){return qu(Du(t),e)}var Ua,Rw,za=R(()=>{vh();bi();Ua={},Rw=new Mt({})});var wn,Nw,Fu,wi=R(()=>{za();wn=t=>t.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":t.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":t.startsWith("gpt-4-32k")?"gpt-4-32k":t.startsWith("gpt-4-")?"gpt-4":t,Nw=t=>{switch(wn(t)){case"gpt-3.5-turbo-16k":return 16384;case"gpt-3.5-turbo":return 4096;case"gpt-4-32k":return 32768;case"gpt-4":return 8192;case"text-davinci-003":return 4097;case"text-curie-001":return 2048;case"text-babbage-001":return 2048;case"text-ada-001":return 2048;case"code-davinci-002":return 8e3;case"code-cushman-001":return 2048;default:return 4097}},Fu=async({prompt:t,modelName:e})=>{let r;try{r=(await Va(e)).encode(t).length}catch{r=Math.ceil(t.length/4)}return Nw(e)-r}});function Uu(){if(!Ba&&(Ba=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ba))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ba(Mw)}var Ba,Mw,xh=R(()=>{Mw=new Uint8Array(16)});function Oh(t,e=0){return(ke[t[e+0]]+ke[t[e+1]]+ke[t[e+2]]+ke[t[e+3]]+"-"+ke[t[e+4]]+ke[t[e+5]]+"-"+ke[t[e+6]]+ke[t[e+7]]+"-"+ke[t[e+8]]+ke[t[e+9]]+"-"+ke[t[e+10]]+ke[t[e+11]]+ke[t[e+12]]+ke[t[e+13]]+ke[t[e+14]]+ke[t[e+15]]).toLowerCase()}var ke,Ah=R(()=>{ke=[];for(let t=0;t<256;++t)ke.push((t+256).toString(16).slice(1))});var Lw,Vu,Ph=R(()=>{Lw=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Vu={randomUUID:Lw}});function Dw(t,e,r){if(Vu.randomUUID&&!e&&!t)return Vu.randomUUID();t=t||{};let n=t.random||(t.rng||Uu)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return Oh(n)}var Qe,Eh=R(()=>{Ph();xh();Ah();Qe=Dw});var Ka=R(()=>{Eh()});var zu,Lt,Bu=R(()=>{Ka();br();zu=class{},Lt=class extends zu{get lc_namespace(){return["langchain","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}constructor(e){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:typeof process<"u"?process.env?.LANGCHAIN_CALLBACKS_BACKGROUND!=="true":!0}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever)}copy(){return new this.constructor(this)}toJSON(){return je.prototype.toJSON.call(this)}toJSONNotImplemented(){return je.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class r extends Lt{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Qe()}),Object.assign(this,e)}}return new r}}});var jh=N((mC,Sh)=>{"use strict";var Ih=(t=0)=>e=>`\x1B[${38+t};5;${e}m`,Ch=(t=0)=>(e,r,n)=>`\x1B[${38+t};2;${e};${r};${n}m`;function qw(){let t=new Map,e={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};e.color.gray=e.color.blackBright,e.bgColor.bgGray=e.bgColor.bgBlackBright,e.color.grey=e.color.blackBright,e.bgColor.bgGrey=e.bgColor.bgBlackBright;for(let[r,n]of Object.entries(e)){for(let[i,a]of Object.entries(n))e[i]={open:`\x1B[${a[0]}m`,close:`\x1B[${a[1]}m`},n[i]=e[i],t.set(a[0],a[1]);Object.defineProperty(e,r,{value:n,enumerable:!1})}return Object.defineProperty(e,"codes",{value:t,enumerable:!1}),e.color.close="\x1B[39m",e.bgColor.close="\x1B[49m",e.color.ansi256=Ih(),e.color.ansi16m=Ch(),e.bgColor.ansi256=Ih(10),e.bgColor.ansi16m=Ch(10),Object.defineProperties(e,{rgbToAnsi256:{value:(r,n,i)=>r===n&&n===i?r<8?16:r>248?231:Math.round((r-8)/247*24)+232:16+36*Math.round(r/255*5)+6*Math.round(n/255*5)+Math.round(i/255*5),enumerable:!1},hexToRgb:{value:r=>{let n=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(r.toString(16));if(!n)return[0,0,0];let{colorString:i}=n.groups;i.length===3&&(i=i.split("").map(s=>s+s).join(""));let a=Number.parseInt(i,16);return[a>>16&255,a>>8&255,a&255]},enumerable:!1},hexToAnsi256:{value:r=>e.rgbToAnsi256(...e.hexToRgb(r)),enumerable:!1}}),e}Object.defineProperty(Sh,"exports",{enumerable:!0,get:qw})});var Xt,$a=R(()=>{Bu();Xt=class extends Lt{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}_addChildRun(e,r){e.child_runs.push(r)}_startTrace(e){if(e.parent_run_id!==void 0){let r=this.runMap.get(e.parent_run_id);r&&this._addChildRun(r,e)}this.runMap.set(e.id,e)}async _endTrace(e){let r=e.parent_run_id!==void 0&&this.runMap.get(e.parent_run_id);r?r.child_execution_order=Math.max(r.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id)}_getExecutionOrder(e){let r=e!==void 0&&this.runMap.get(e);return r?r.child_execution_order+1:1}async handleLLMStart(e,r,n,i,a,s,o){let u=this._getExecutionOrder(i),l=Date.now(),c=o?{...a,metadata:o}:a,d={id:n,name:e.id[e.id.length-1],parent_run_id:i,start_time:l,serialized:e,events:[{name:"start",time:l}],inputs:{prompts:r},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:c??{},tags:s||[]};this._startTrace(d),await this.onLLMStart?.(d)}async handleChatModelStart(e,r,n,i,a,s,o){let u=this._getExecutionOrder(i),l=Date.now(),c=o?{...a,metadata:o}:a,d={id:n,name:e.id[e.id.length-1],parent_run_id:i,start_time:l,serialized:e,events:[{name:"start",time:l}],inputs:{messages:r},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:c??{},tags:s||[]};this._startTrace(d),await this.onLLMStart?.(d)}async handleLLMEnd(e,r){let n=this.runMap.get(r);if(!n||n?.run_type!=="llm")throw new Error("No LLM run to end.");n.end_time=Date.now(),n.outputs=e,n.events.push({name:"end",time:n.end_time}),await this.onLLMEnd?.(n),await this._endTrace(n)}async handleLLMError(e,r){let n=this.runMap.get(r);if(!n||n?.run_type!=="llm")throw new Error("No LLM run to end.");n.end_time=Date.now(),n.error=e.message,n.events.push({name:"error",time:n.end_time}),await this.onLLMError?.(n),await this._endTrace(n)}async handleChainStart(e,r,n,i,a,s,o){let u=this._getExecutionOrder(i),l=Date.now(),c={id:n,name:e.id[e.id.length-1],parent_run_id:i,start_time:l,serialized:e,events:[{name:"start",time:l}],inputs:r,execution_order:u,child_execution_order:u,run_type:o??"chain",child_runs:[],extra:s?{metadata:s}:{},tags:a||[]};this._startTrace(c),await this.onChainStart?.(c)}async handleChainEnd(e,r){let n=this.runMap.get(r);if(!n)throw new Error("No chain run to end.");n.end_time=Date.now(),n.outputs=e,n.events.push({name:"end",time:n.end_time}),await this.onChainEnd?.(n),await this._endTrace(n)}async handleChainError(e,r){let n=this.runMap.get(r);if(!n)throw new Error("No chain run to end.");n.end_time=Date.now(),n.error=e.message,n.events.push({name:"error",time:n.end_time}),await this.onChainError?.(n),await this._endTrace(n)}async handleToolStart(e,r,n,i,a,s){let o=this._getExecutionOrder(i),u=Date.now(),l={id:n,name:e.id[e.id.length-1],parent_run_id:i,start_time:u,serialized:e,events:[{name:"start",time:u}],inputs:{input:r},execution_order:o,child_execution_order:o,run_type:"tool",child_runs:[],extra:s?{metadata:s}:{},tags:a||[]};this._startTrace(l),await this.onToolStart?.(l)}async handleToolEnd(e,r){let n=this.runMap.get(r);if(!n||n?.run_type!=="tool")throw new Error("No tool run to end");n.end_time=Date.now(),n.outputs={output:e},n.events.push({name:"end",time:n.end_time}),await this.onToolEnd?.(n),await this._endTrace(n)}async handleToolError(e,r){let n=this.runMap.get(r);if(!n||n?.run_type!=="tool")throw new Error("No tool run to end");n.end_time=Date.now(),n.error=e.message,n.events.push({name:"error",time:n.end_time}),await this.onToolError?.(n),await this._endTrace(n)}async handleAgentAction(e,r){let n=this.runMap.get(r);if(!n||n?.run_type!=="chain")return;let i=n;i.actions=i.actions||[],i.actions.push(e),i.events.push({name:"agent_action",time:Date.now(),kwargs:{action:e}}),await this.onAgentAction?.(n)}async handleAgentEnd(e,r){let n=this.runMap.get(r);!n||n?.run_type!=="chain"||(n.events.push({name:"agent_end",time:Date.now(),kwargs:{action:e}}),await this.onAgentEnd?.(n))}async handleRetrieverStart(e,r,n,i,a,s){let o=this._getExecutionOrder(i),u=Date.now(),l={id:n,name:e.id[e.id.length-1],parent_run_id:i,start_time:u,serialized:e,events:[{name:"start",time:u}],inputs:{query:r},execution_order:o,child_execution_order:o,run_type:"retriever",child_runs:[],extra:s?{metadata:s}:{},tags:a||[]};this._startTrace(l),await this.onRetrieverStart?.(l)}async handleRetrieverEnd(e,r){let n=this.runMap.get(r);if(!n||n?.run_type!=="retriever")throw new Error("No retriever run to end");n.end_time=Date.now(),n.outputs={documents:e},n.events.push({name:"end",time:n.end_time}),await this.onRetrieverEnd?.(n),await this._endTrace(n)}async handleRetrieverError(e,r){let n=this.runMap.get(r);if(!n||n?.run_type!=="retriever")throw new Error("No retriever run to end");n.end_time=Date.now(),n.error=e.message,n.events.push({name:"error",time:n.end_time}),await this.onRetrieverError?.(n),await this._endTrace(n)}async handleText(e,r){let n=this.runMap.get(r);!n||n?.run_type!=="chain"||(n.events.push({name:"text",time:Date.now(),kwargs:{text:e}}),await this.onText?.(n))}async handleLLMNewToken(e,r,n){let i=this.runMap.get(n);!i||i?.run_type!=="llm"||(i.events.push({name:"new_token",time:Date.now(),kwargs:{token:e,idx:r}}),await this.onLLMNewToken?.(i))}}});function kh(t,e){return`${t.open}${e}${t.close}`}var Ku,Fw,_i,Rh=R(()=>{Ku=ge(jh(),1);$a();({color:Fw}=Ku.default),_i=class extends Xt{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){let r=[],n=e;for(;n.parent_run_id;){let i=this.runMap.get(n.parent_run_id);if(i)r.push(i),n=i;else break}return r}getBreadcrumbs(e){let n=[...this.getParents(e).reverse(),e].map((i,a,s)=>{let o=`${i.execution_order}:${i.run_type}:${i.name}`;return a===s.length-1?kh(Ku.default.bold,o):o}).join(" > ");return kh(Fw.grey,n)}onChainStart(e){let r=this.getBreadcrumbs(e)}onChainEnd(e){let r=this.getBreadcrumbs(e)}onChainError(e){let r=this.getBreadcrumbs(e)}onLLMStart(e){let r=this.getBreadcrumbs(e),n="prompts"in e.inputs?{prompts:e.inputs.prompts.map(i=>i.trim())}:e.inputs}onLLMEnd(e){let r=this.getBreadcrumbs(e)}onLLMError(e){let r=this.getBreadcrumbs(e)}onToolStart(e){let r=this.getBreadcrumbs(e)}onToolEnd(e){let r=this.getBreadcrumbs(e)}onToolError(e){let r=this.getBreadcrumbs(e)}onRetrieverStart(e){let r=this.getBreadcrumbs(e)}onRetrieverEnd(e){let r=this.getBreadcrumbs(e)}onRetrieverError(e){let r=this.getBreadcrumbs(e)}onAgentAction(e){let r=e,n=this.getBreadcrumbs(e)}}});var Nh,Za,Uw,Ha,Mh=R(()=>{Nh=ge(Tu(),1),Za=ge(La(),1),Uw=[400,401,403,404,405,406,407,408,409],Ha=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6;let r="default"in Za.default?Za.default.default:Za.default;this.queue=new r({concurrency:this.maxConcurrency})}call(e,...r){return this.queue.add(()=>(0,Nh.default)(()=>e(...r).catch(n=>{throw n instanceof Error?n:new Error(n)}),{onFailedAttempt(n){if(n.message.startsWith("Cancel")||n.message.startsWith("TimeoutError")||n.message.startsWith("AbortError")||n?.code==="ECONNABORTED")throw n;let i=n?.response?.status;if(i&&Uw.includes(+i))throw n},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,r,...n){return e.signal?Promise.race([this.call(r,...n),new Promise((i,a)=>{e.signal?.addEventListener("abort",()=>{a(new Error("AbortError"))})})]):this.call(r,...n)}fetch(...e){return this.call(()=>fetch(...e).then(r=>r.ok?r:Promise.reject(r)))}}});async function Zu(){return $u===void 0&&($u={library:"langsmith",runtime:$w()}),$u}function Ja(t){try{return typeof process<"u"?process.env?.[t]:void 0}catch{return}}var Vw,zw,Bw,Lh,Kw,$w,$u,Hu=R(()=>{Vw=()=>typeof window<"u"&&typeof window.document<"u",zw=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",Bw=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),Lh=()=>typeof Deno<"u",Kw=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!Lh(),$w=()=>{let t;return Vw()?t="browser":Kw()?t="node":zw()?t="webworker":Bw()?t="jsdom":Lh()?t="deno":t="other",t}});async function Zw(t){let e=[];for await(let r of t)e.push(r);return e}function qh(t){if(t!==void 0)return t.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}var Dh,vi,er,Ju=R(()=>{Ka();Mh();Hu();Dh=t=>{let r=t.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return r==="localhost"||r==="127.0.0.1"||r==="::1"},vi=async(t,e)=>{let r=await t.text();if(!t.ok)throw new Error(`Failed to ${e}: ${t.status} ${t.statusText} ${r}`)};er=class{constructor(e={}){Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let r=er.getDefaultClientConfig();this.apiUrl=qh(e.apiUrl??r.apiUrl)??"",this.apiKey=qh(e.apiKey??r.apiKey),this.validateApiKeyIfHosted(),this.timeout_ms=e.timeout_ms??4e3,this.caller=new Ha(e.callerOptions??{})}static getDefaultClientConfig(){let e=Ja("LANGCHAIN_API_KEY");return{apiUrl:Ja("LANGCHAIN_ENDPOINT")??(e?"https://api.smith.langchain.com":"http://localhost:1984"),apiKey:e}}validateApiKeyIfHosted(){if(!Dh(this.apiUrl)&&!this.apiKey)throw new Error("API key must be provided when using hosted LangSmith API")}getHostUrl(){return Dh(this.apiUrl)?"http://localhost":this.apiUrl.split(".",1)[0].includes("dev")?"https://dev.smith.langchain.com":"https://smith.langchain.com"}get headers(){let e={};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}async _get(e,r){let n=r?.toString()??"",i=`${this.apiUrl}${e}?${n}`,a=await this.caller.call(fetch,i,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!a.ok)throw new Error(`Failed to fetch ${e}: ${a.status} ${a.statusText}`);return a.json()}async*_getPaginated(e,r=new URLSearchParams){let n=Number(r.get("offset"))||0,i=Number(r.get("limit"))||100;for(;;){r.set("offset",String(n)),r.set("limit",String(i));let a=`${this.apiUrl}${e}?${r}`,s=await this.caller.call(fetch,a,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!s.ok)throw new Error(`Failed to fetch ${e}: ${s.status} ${s.statusText}`);let o=await s.json();if(o.length===0||(yield o,o.length<i))break;n+=o.length}}async createRun(e){let r={...this.headers,"Content-Type":"application/json"},n=e.extra??{},i=await Zu(),a=e.project_name;delete e.project_name;let s={session_name:a,...e,extra:{...e.extra,runtime:{...i,...n.runtime}}},o=await this.caller.call(fetch,`${this.apiUrl}/runs`,{method:"POST",headers:r,body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms)});await vi(o,"create run")}async updateRun(e,r){let n={...this.headers,"Content-Type":"application/json"},i=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:n,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms)});await vi(i,"update run")}async readRun(e,{loadChildRuns:r}={loadChildRuns:!1}){let n=await this._get(`/runs/${e}`);return r&&n.child_run_ids&&(n=await this._loadChildRuns(n)),n}async getRunUrl({runId:e}){let r=await this.readRun(e);return r.app_path?`${this.getHostUrl()}${r.app_path}`:void 0}async _loadChildRuns(e){let r=await Zw(this.listRuns({id:e.child_run_ids})),n={},i={};r.sort((a,s)=>a.execution_order-s.execution_order);for(let a of r){if(a.parent_run_id===null||a.parent_run_id===void 0)throw new Error(`Child run ${a.id} has no parent`);a.parent_run_id in n||(n[a.parent_run_id]=[]),n[a.parent_run_id].push(a),i[a.id]=a}e.child_runs=n[e.id]||[];for(let a in n)a!==e.id&&(i[a].child_runs=n[a]);return e}async*listRuns({projectId:e,projectName:r,parentRunId:n,referenceExampleId:i,datasetId:a,startTime:s,endTime:o,executionOrder:u,runType:l,error:c,id:d,limit:y,offset:w,query:h,filter:_,orderBy:P}){let S=new URLSearchParams,I=e;if(r){if(e)throw new Error("Only one of projectId or projectName may be given");I=(await this.readProject({projectName:r})).id}if(I&&S.append("session",I),n&&S.append("parent_run",n),i&&S.append("reference_example",i),a&&S.append("dataset",a),s&&S.append("start_time",s.toISOString()),o&&S.append("end_time",o.toISOString()),u&&S.append("execution_order",u.toString()),l&&S.append("run_type",l),c!==void 0&&S.append("error",c.toString()),d!==void 0)for(let F of d)S.append("id",F);y!==void 0&&S.append("limit",y.toString()),w!==void 0&&S.append("offset",w.toString()),h!==void 0&&S.append("query",h),_!==void 0&&S.append("filter",_),P!==void 0&&P.map(F=>S.append("order_by",F));for await(let F of this._getPaginated("/runs",S))yield*F}async deleteRun(e){let r=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await vi(r,"delete run")}async shareRun(e,{shareId:r}={}){let n={run_id:e,share_token:r||Qe()},a=await(await this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms)})).json();if(a===null||!("share_token"in a))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${a.share_token}/r`}async unshareRun(e){let r=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await vi(r,"unshare run")}async readRunSharedLink(e){let n=await(await this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)})).json();if(!(n===null||!("share_token"in n)))return`${this.getHostUrl()}/public/${n.share_token}/r`}async createProject({projectName:e,projectExtra:r,upsert:n}){let i=n?"?upsert=true":"",a=`${this.apiUrl}/sessions${i}`,s={name:e};r!==void 0&&(s.extra=r);let o=await this.caller.call(fetch,a,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms)}),u=await o.json();if(!o.ok)throw new Error(`Failed to create session ${e}: ${o.status} ${o.statusText}`);return u}async readProject({projectId:e,projectName:r}){let n="/sessions",i=new URLSearchParams;if(e!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)n+=`/${e}`;else if(r!==void 0)i.append("name",r);else throw new Error("Must provide projectName or projectId");let a=await this._get(n,i),s;if(Array.isArray(a)){if(a.length===0)throw new Error(`Project[id=${e}, name=${r}] not found`);s=a[0]}else s=a;return s}async*listProjects(){for await(let e of this._getPaginated("/sessions"))yield*e}async deleteProject({projectId:e,projectName:r}){let n;if(e===void 0&&r===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?n=(await this.readProject({projectName:r})).id:n=e;let i=await this.caller.call(fetch,`${this.apiUrl}/sessions/${n}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await vi(i,`delete session ${n} (${r})`)}async uploadCsv({csvFile:e,fileName:r,inputKeys:n,outputKeys:i,description:a,dataType:s,name:o}){let u=`${this.apiUrl}/datasets/upload`,l=new FormData;l.append("file",e,r),n.forEach(y=>{l.append("input_keys",y)}),i.forEach(y=>{l.append("output_keys",y)}),a&&l.append("description",a),s&&l.append("data_type",s),o&&l.append("name",o);let c=await this.caller.call(fetch,u,{method:"POST",headers:this.headers,body:l,signal:AbortSignal.timeout(this.timeout_ms)});if(!c.ok){let y=await c.json();throw y.detail&&y.detail.includes("already exists")?new Error(`Dataset ${r} already exists`):new Error(`Failed to upload CSV: ${c.status} ${c.statusText}`)}return await c.json()}async createDataset(e,{description:r,dataType:n}={}){let i={name:e,description:r};n&&(i.data_type=n);let a=await this.caller.call(fetch,`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms)});if(!a.ok){let o=await a.json();throw o.detail&&o.detail.includes("already exists")?new Error(`Dataset ${e} already exists`):new Error(`Failed to create dataset ${a.status} ${a.statusText}`)}return await a.json()}async readDataset({datasetId:e,datasetName:r}){let n="/datasets",i=new URLSearchParams({limit:"1"});if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)n+=`/${e}`;else if(r!==void 0)i.append("name",r);else throw new Error("Must provide datasetName or datasetId");let a=await this._get(n,i),s;if(Array.isArray(a)){if(a.length===0)throw new Error(`Dataset[id=${e}, name=${r}] not found`);s=a[0]}else s=a;return s}async*listDatasets({limit:e=100,offset:r=0}={}){let n="/datasets",i=new URLSearchParams({limit:e.toString(),offset:r.toString()});for await(let a of this._getPaginated(n,i))yield*a}async deleteDataset({datasetId:e,datasetName:r}){let n="/datasets",i=e;if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(r!==void 0&&(i=(await this.readDataset({datasetName:r})).id),i!==void 0)n+=`/${i}`;else throw new Error("Must provide datasetName or datasetId");let a=await this.caller.call(fetch,this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!a.ok)throw new Error(`Failed to delete ${n}: ${a.status} ${a.statusText}`);await a.json()}async createExample(e,r,{datasetId:n,datasetName:i,createdAt:a}){let s=n;if(s===void 0&&i===void 0)throw new Error("Must provide either datasetName or datasetId");if(s!==void 0&&i!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");s===void 0&&(s=(await this.readDataset({datasetName:i})).id);let u={dataset_id:s,inputs:e,outputs:r,created_at:(a||new Date).toISOString()},l=await this.caller.call(fetch,`${this.apiUrl}/examples`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms)});if(!l.ok)throw new Error(`Failed to create example: ${l.status} ${l.statusText}`);return await l.json()}async readExample(e){let r=`/examples/${e}`;return await this._get(r)}async*listExamples({datasetId:e,datasetName:r}={}){let n;if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)n=e;else if(r!==void 0)n=(await this.readDataset({datasetName:r})).id;else throw new Error("Must provide a datasetName or datasetId");let i=new URLSearchParams({dataset:n});for await(let a of this._getPaginated("/examples",i))yield*a}async deleteExample(e){let r=`/examples/${e}`,n=await this.caller.call(fetch,this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!n.ok)throw new Error(`Failed to delete ${r}: ${n.status} ${n.statusText}`);await n.json()}async updateExample(e,r){let n=await this.caller.call(fetch,`${this.apiUrl}/examples/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms)});if(!n.ok)throw new Error(`Failed to update example ${e}: ${n.status} ${n.statusText}`);return await n.json()}async evaluateRun(e,r,{sourceInfo:n,loadChildRuns:i}={loadChildRuns:!1}){let a;if(typeof e=="string")a=await this.readRun(e,{loadChildRuns:i});else if(typeof e=="object"&&"id"in e)a=e;else throw new Error(`Invalid run type: ${typeof e}`);let s;a.reference_example_id!==null&&a.reference_example_id!==void 0&&(s=await this.readExample(a.reference_example_id));let o=await r.evaluateRun(a,s),u=n??{};return o.evaluatorInfo&&(u={...u,...o.evaluatorInfo}),await this.createFeedback(a.id,o.key,{score:o.score,value:o.value,comment:o.comment,correction:o.correction,sourceInfo:u,feedbackSourceType:"MODEL"})}async createFeedback(e,r,{score:n,value:i,correction:a,comment:s,sourceInfo:o,feedbackSourceType:u="API"}){let l;if(u==="API")l={type:"api",metadata:o??{}};else if(u==="MODEL")l={type:"model",metadata:o??{}};else throw new Error(`Unknown feedback source type ${u}`);let c={id:Qe(),run_id:e,key:r,score:n,value:i,correction:a,comment:s,feedback_source:l},d=await this.caller.call(fetch,`${this.apiUrl}/feedback`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms)});if(!d.ok)throw new Error(`Failed to create feedback for run ${e}: ${d.status} ${d.statusText}`);return await d.json()}async readFeedback(e){let r=`/feedback/${e}`;return await this._get(r)}async deleteFeedback(e){let r=`/feedback/${e}`,n=await this.caller.call(fetch,this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!n.ok)throw new Error(`Failed to delete ${r}: ${n.status} ${n.statusText}`);await n.json()}async*listFeedback({runIds:e}={}){let r=new URLSearchParams;e&&r.append("run",e.join(","));for await(let n of this._getPaginated("/feedback",r))yield*n}}});var Fh=R(()=>{Hu();Ju()});var Uh=R(()=>{Ju();Fh()});var Vh=R(()=>{Uh()});var xi,Yu=R(()=>{Vh();kt();$a();xi=class extends Xt{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let{exampleId:r,projectName:n,client:i}=e;this.projectName=n??Y("LANGCHAIN_PROJECT")??Y("LANGCHAIN_SESSION"),this.exampleId=r,this.client=i??new er({})}async _convertToCreate(e,r=void 0){return{...e,extra:{...e.extra,runtime:await _d()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:r}}async persistRun(e){}async _persistRunSingle(e){let r=await this._convertToCreate(e,this.exampleId);await this.client.createRun(r)}async _updateRunSingle(e){let r={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events};await this.client.updateRun(e.id,r)}async onRetrieverStart(e){await this._persistRunSingle(e)}async onRetrieverEnd(e){await this._updateRunSingle(e)}async onRetrieverError(e){await this._updateRunSingle(e)}async onLLMStart(e){await this._persistRunSingle(e)}async onLLMEnd(e){await this._updateRunSingle(e)}async onLLMError(e){await this._updateRunSingle(e)}async onChainStart(e){await this._persistRunSingle(e)}async onChainEnd(e){await this._updateRunSingle(e)}async onChainError(e){await this._updateRunSingle(e)}async onToolStart(e){await this._persistRunSingle(e)}async onToolEnd(e){await this._updateRunSingle(e)}async onToolError(e){await this._updateRunSingle(e)}}});function Ir(t,e="Human",r="AI"){let n=[];for(let i of t){let a;if(i._getType()==="human")a=e;else if(i._getType()==="ai")a=r;else if(i._getType()==="system")a="System";else if(i._getType()==="function")a="Function";else if(i._getType()==="generic")a=i.role;else throw new Error(`Got unsupported message type: ${i}`);let s=i.name?`${i.name}, `:"";n.push(`${a}: ${s}${i.content}`)}return n.join(`
`)}var _n=R(()=>{});var Ya,zh=R(()=>{_n();kt();$a();Ya=class extends Xt{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"endpoint",{enumerable:!0,configurable:!0,writable:!0,value:Y("LANGCHAIN_ENDPOINT")||"http://localhost:1984"}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:{"Content-Type":"application/json"}}),Object.defineProperty(this,"session",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let e=Y("LANGCHAIN_API_KEY");e&&(this.headers["x-api-key"]=e)}async newSession(e){let r={start_time:Date.now(),name:e},n=await this.persistSession(r);return this.session=n,n}async loadSession(e){let r=`${this.endpoint}/sessions?name=${e}`;return this._handleSessionResponse(r)}async loadDefaultSession(){let e=`${this.endpoint}/sessions?name=default`;return this._handleSessionResponse(e)}async convertV2RunToRun(e){let r=this.session??await this.loadDefaultSession(),n=e.serialized,i;if(e.run_type==="llm"){let a=e.inputs.prompts?e.inputs.prompts:e.inputs.messages.map(o=>Ir(o));i={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:n,type:e.run_type,session_id:r.id,prompts:a,response:e.outputs}}else if(e.run_type==="chain"){let a=await Promise.all(e.child_runs.map(o=>this.convertV2RunToRun(o)));i={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:n,type:e.run_type,session_id:r.id,inputs:e.inputs,outputs:e.outputs,child_llm_runs:a.filter(o=>o.type==="llm"),child_chain_runs:a.filter(o=>o.type==="chain"),child_tool_runs:a.filter(o=>o.type==="tool")}}else if(e.run_type==="tool"){let a=await Promise.all(e.child_runs.map(o=>this.convertV2RunToRun(o)));i={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:n,type:e.run_type,session_id:r.id,tool_input:e.inputs.input,output:e.outputs?.output,action:JSON.stringify(n),child_llm_runs:a.filter(o=>o.type==="llm"),child_chain_runs:a.filter(o=>o.type==="chain"),child_tool_runs:a.filter(o=>o.type==="tool")}}else throw new Error(`Unknown run type: ${e.run_type}`);return i}async persistRun(e){let r,n;e.run_type!==void 0?n=await this.convertV2RunToRun(e):n=e,n.type==="llm"?r=`${this.endpoint}/llm-runs`:n.type==="chain"?r=`${this.endpoint}/chain-runs`:r=`${this.endpoint}/tool-runs`,(await fetch(r,{method:"POST",headers:this.headers,body:JSON.stringify(n)})).ok}async persistSession(e){let r=`${this.endpoint}/sessions`,n=await fetch(r,{method:"POST",headers:this.headers,body:JSON.stringify(e)});return n.ok?{id:(await n.json()).id,...e}:{id:1,...e}}async _handleSessionResponse(e){let r=await fetch(e,{method:"GET",headers:this.headers}),n;if(!r.ok)return n={id:1,start_time:Date.now()},this.session=n,n;let i=await r.json();return i.length===0?(n={id:1,start_time:Date.now()},this.session=n,n):([n]=i,this.session=n,n)}}});async function Bh(t){let e=new Ya;return t?await e.loadSession(t):await e.loadDefaultSession(),e}async function Kh(){return new xi}var $h=R(()=>{Yu();zh()});function Hw(){let t="default"in Wa.default?Wa.default.default:Wa.default;return new t({autoStart:!0,concurrency:1})}async function Te(t,e){e===!0?await t():(typeof Wu>"u"&&(Wu=Hw()),Wu.add(t))}var Wa,Wu,Zh=R(()=>{Wa=ge(La(),1)});function Qa(t){return t?Array.isArray(t)||"name"in t?{callbacks:t}:t:{}}function Hh(t){return"name"in t?t:Lt.fromMethods(t)}var Gu,vn,Qu,Ga,Xu,el,ce,xn=R(()=>{Ka();Bu();Rh();$h();_n();kt();Yu();Zh();Gu=class{setHandler(e){return this.setHandlers([e])}},vn=class{constructor(e,r,n,i,a,s,o,u){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:u})}async handleText(e){await Promise.all(this.handlers.map(r=>Te(async()=>{try{await r.handleText?.(e,this.runId,this._parentRunId,this.tags)}catch{}},r.awaitHandlers)))}},Qu=class extends vn{getChild(e){let r=new ce(this.runId);return r.setHandlers(this.inheritableHandlers),r.addTags(this.inheritableTags),r.addMetadata(this.inheritableMetadata),e&&r.addTags([e],!1),r}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(r=>Te(async()=>{if(!r.ignoreRetriever)try{await r.handleRetrieverEnd?.(e,this.runId,this._parentRunId,this.tags)}catch{}},r.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(r=>Te(async()=>{if(!r.ignoreRetriever)try{await r.handleRetrieverError?.(e,this.runId,this._parentRunId,this.tags)}catch{}},r.awaitHandlers)))}},Ga=class extends vn{async handleLLMNewToken(e,r={prompt:0,completion:0}){await Promise.all(this.handlers.map(n=>Te(async()=>{if(!n.ignoreLLM)try{await n.handleLLMNewToken?.(e,r,this.runId,this._parentRunId,this.tags)}catch{}},n.awaitHandlers)))}async handleLLMError(e){await Promise.all(this.handlers.map(r=>Te(async()=>{if(!r.ignoreLLM)try{await r.handleLLMError?.(e,this.runId,this._parentRunId,this.tags)}catch{}},r.awaitHandlers)))}async handleLLMEnd(e){await Promise.all(this.handlers.map(r=>Te(async()=>{if(!r.ignoreLLM)try{await r.handleLLMEnd?.(e,this.runId,this._parentRunId,this.tags)}catch{}},r.awaitHandlers)))}},Xu=class extends vn{getChild(e){let r=new ce(this.runId);return r.setHandlers(this.inheritableHandlers),r.addTags(this.inheritableTags),r.addMetadata(this.inheritableMetadata),e&&r.addTags([e],!1),r}async handleChainError(e){await Promise.all(this.handlers.map(r=>Te(async()=>{if(!r.ignoreChain)try{await r.handleChainError?.(e,this.runId,this._parentRunId,this.tags)}catch{}},r.awaitHandlers)))}async handleChainEnd(e){await Promise.all(this.handlers.map(r=>Te(async()=>{if(!r.ignoreChain)try{await r.handleChainEnd?.(e,this.runId,this._parentRunId,this.tags)}catch{}},r.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(r=>Te(async()=>{if(!r.ignoreAgent)try{await r.handleAgentAction?.(e,this.runId,this._parentRunId,this.tags)}catch{}},r.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(r=>Te(async()=>{if(!r.ignoreAgent)try{await r.handleAgentEnd?.(e,this.runId,this._parentRunId,this.tags)}catch{}},r.awaitHandlers)))}},el=class extends vn{getChild(e){let r=new ce(this.runId);return r.setHandlers(this.inheritableHandlers),r.addTags(this.inheritableTags),r.addMetadata(this.inheritableMetadata),e&&r.addTags([e],!1),r}async handleToolError(e){await Promise.all(this.handlers.map(r=>Te(async()=>{if(!r.ignoreAgent)try{await r.handleToolError?.(e,this.runId,this._parentRunId,this.tags)}catch{}},r.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(r=>Te(async()=>{if(!r.ignoreAgent)try{await r.handleToolEnd?.(e,this.runId,this._parentRunId,this.tags)}catch{}},r.awaitHandlers)))}},ce=class extends Gu{constructor(e){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=[],this.inheritableHandlers=[],this._parentRunId=e}async handleLLMStart(e,r,n=void 0,i=void 0,a=void 0){return Promise.all(r.map(async s=>{let o=Qe();return await Promise.all(this.handlers.map(u=>Te(async()=>{if(!u.ignoreLLM)try{await u.handleLLMStart?.(e,[s],o,this._parentRunId,a,this.tags,this.metadata)}catch{}},u.awaitHandlers))),new Ga(o,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,r,n=void 0,i=void 0,a=void 0){return Promise.all(r.map(async s=>{let o=Qe();return await Promise.all(this.handlers.map(u=>Te(async()=>{if(!u.ignoreLLM)try{if(u.handleChatModelStart)await u.handleChatModelStart?.(e,[s],o,this._parentRunId,a,this.tags,this.metadata);else if(u.handleLLMStart){let l=Ir(s);await u.handleLLMStart?.(e,[l],o,this._parentRunId,a,this.tags,this.metadata)}}catch{}},u.awaitHandlers))),new Ga(o,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,r,n=Qe(),i=void 0){return await Promise.all(this.handlers.map(a=>Te(async()=>{if(!a.ignoreChain)try{await a.handleChainStart?.(e,r,n,this._parentRunId,this.tags,this.metadata,i)}catch{}},a.awaitHandlers))),new Xu(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,r,n=Qe()){return await Promise.all(this.handlers.map(i=>Te(async()=>{if(!i.ignoreAgent)try{await i.handleToolStart?.(e,r,n,this._parentRunId,this.tags,this.metadata)}catch{}},i.awaitHandlers))),new el(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,r,n=Qe(),i=void 0){return await Promise.all(this.handlers.map(a=>Te(async()=>{if(!a.ignoreRetriever)try{await a.handleRetrieverStart?.(e,r,n,this._parentRunId,this.tags,this.metadata)}catch{}},a.awaitHandlers))),new Qu(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}addHandler(e,r=!0){this.handlers.push(e),r&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(r=>r!==e),this.inheritableHandlers=this.inheritableHandlers.filter(r=>r!==e)}setHandlers(e,r=!0){this.handlers=[],this.inheritableHandlers=[];for(let n of e)this.addHandler(n,r)}addTags(e,r=!0){this.removeTags(e),this.tags.push(...e),r&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(r=>!e.includes(r)),this.inheritableTags=this.inheritableTags.filter(r=>!e.includes(r))}addMetadata(e,r=!0){this.metadata={...this.metadata,...e},r&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(let r of Object.keys(e))delete this.metadata[r],delete this.inheritableMetadata[r]}copy(e=[],r=!0){let n=new ce(this._parentRunId);for(let i of this.handlers){let a=this.inheritableHandlers.includes(i);n.addHandler(i,a)}for(let i of this.tags){let a=this.inheritableTags.includes(i);n.addTags([i],a)}for(let i of Object.keys(this.metadata)){let a=Object.keys(this.inheritableMetadata).includes(i);n.addMetadata({[i]:this.metadata[i]},a)}for(let i of e)n.handlers.filter(a=>a.name==="console_callback_handler").some(a=>a.name===i.name)||n.addHandler(i,r);return n}static fromHandlers(e){class r extends Lt{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Qe()}),Object.assign(this,e)}}let n=new this;return n.addHandler(new r),n}static async configure(e,r,n,i,a,s,o){let u;(e||r)&&(Array.isArray(e)||!e?(u=new ce,u.setHandlers(e?.map(Hh)??[],!0)):u=e,u=u.copy(Array.isArray(r)?r.map(Hh):r?.handlers,!1));let l=Y("LANGCHAIN_VERBOSE")||o?.verbose,c=Y("LANGCHAIN_TRACING_V2")??!1,d=c||(Y("LANGCHAIN_TRACING")??!1);if(l||d){if(u||(u=new ce),l&&!u.handlers.some(y=>y.name===_i.prototype.name)){let y=new _i;u.addHandler(y,!0)}if(d&&!u.handlers.some(y=>y.name==="langchain_tracer"))if(c)u.addHandler(await Kh(),!0);else{let y=Y("LANGCHAIN_PROJECT")&&Y("LANGCHAIN_SESSION");u.addHandler(await Bh(y),!0)}}return(n||i)&&u&&(u.addTags(n??[]),u.addTags(i??[],!1)),(a||s)&&u&&(u.addMetadata(a??{}),u.addMetadata(s??{},!1)),u}}});function On(t,e=!1){if(t[Symbol.asyncIterator])return t[Symbol.asyncIterator]();let r=t.getReader();return{async next(){try{let n=await r.read();return n.done&&r.releaseLock(),n}catch(n){throw r.releaseLock(),n}},async return(){if(e)r.releaseLock();else{let n=r.cancel();r.releaseLock(),await n}return{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}var Cr,Oi=R(()=>{Cr=class extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{let e=await this.reader.read();return e.done&&this.reader.releaseLock(),e}catch(e){throw this.reader.releaseLock(),e}}async return(){this.ensureReader();let e=this.reader.cancel();return this.reader.releaseLock(),await e,{done:!0,value:void 0}}[Symbol.asyncIterator](){return this}static fromReadableStream(e){let r=e.getReader();return new Cr({start(n){return i();function i(){return r.read().then(({done:a,value:s})=>{if(a){n.close();return}return n.enqueue(s),i()})}}})}static fromAsyncGenerator(e){return new Cr({async pull(r){let{value:n,done:i}=await e.next();i?r.close():n&&r.enqueue(n)}})}}});function xt(t,e){return t&&!Array.isArray(t)&&typeof t=="object"?t:{[e]:t}}function Sr(t){if(typeof t=="function")return new rl({func:t});if(Ie.isRunnable(t))return t;if(!Array.isArray(t)&&typeof t=="object"){let e={};for(let[r,n]of Object.entries(t))e[r]=Sr(n);return new tl({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}var Ie,tr,tl,rl,Ai,An=R(()=>{xn();br();Oi();Ie=class extends je{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}bind(e){return new Ai({bound:this,kwargs:e})}_getOptionsList(e,r=0){if(Array.isArray(e)){if(e.length!==r)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${r} inputs`);return e}return Array.from({length:r},()=>e)}async batch(e,r,n){let i=this._getOptionsList(r??{},e.length),a=n?.maxConcurrency&&n.maxConcurrency>0?n?.maxConcurrency:e.length,s=[];for(let o=0;o<e.length;o+=a){let u=e.slice(o,o+a).map((c,d)=>this.invoke(c,i[d])),l=await Promise.all(u);s.push(l)}return s.flat()}async*_streamIterator(e,r){yield this.invoke(e,r)}async stream(e,r){return Cr.fromAsyncGenerator(this._streamIterator(e,r))}_separateRunnableConfigFromCallOptions(e={}){let r={callbacks:e.callbacks,tags:e.tags,metadata:e.metadata},n={...e};return delete n.callbacks,delete n.tags,delete n.metadata,[r,n]}async _callWithConfig(e,r,n){let a=await(await ce.configure(n?.callbacks,void 0,n?.tags,void 0,n?.metadata))?.handleChainStart(this.toJSON(),xt(r,"input"),void 0,n?.runType),s;try{s=await e.bind(this)(r)}catch(o){throw await a?.handleChainError(o),o}return await a?.handleChainEnd(xt(s,"output")),s}async*_streamWithConfig(e,r){let i=await(await ce.configure(r?.callbacks,void 0,r?.tags,void 0,r?.metadata))?.handleChainStart(this.toJSON(),xt("<streamed value>","input"),void 0,r?.runType),a,s=!0;try{for await(let o of e)if(yield o,s)if(a===void 0)a=o;else try{a=a.concat(o)}catch{a=void 0,s=!1}}catch(o){throw await i?.handleChainError(o),o}await i?.handleChainEnd(xt(a,"output"))}_patchConfig(e={},r=void 0){return{...e,callbacks:r}}pipe(e){return new tr({first:this,last:Sr(e)})}static isRunnable(e){return e.lc_runnable}},tr=class extends Ie{constructor(e){super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["schema","runnable"]}),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,r){let i=await(await ce.configure(r?.callbacks,void 0,r?.tags,void 0,r?.metadata))?.handleChainStart(this.toJSON(),xt(e,"input")),a=e,s;try{for(let o of[this.first,...this.middle])a=await o.invoke(a,this._patchConfig(r,i?.getChild()));s=await this.last.invoke(a,this._patchConfig(r,i?.getChild()))}catch(o){throw await i?.handleChainError(o),o}return await i?.handleChainEnd(xt(s,"output")),s}async batch(e,r,n){let i=this._getOptionsList(r??{},e.length),a=await Promise.all(i.map(l=>ce.configure(l?.callbacks,void 0,l?.tags,void 0,l?.metadata))),s=await Promise.all(a.map((l,c)=>l?.handleChainStart(this.toJSON(),xt(e[c],"input")))),o=e,u;try{for(let l=0;l<[this.first,...this.middle].length;l+=1)o=await this.steps[l].batch(o,s.map(d=>this._patchConfig(i[l],d?.getChild()),n));u=await this.last.batch(o,s.map(l=>this._patchConfig(i[this.steps.length-1],l?.getChild()),n))}catch(l){throw await Promise.all(s.map(c=>c?.handleChainError(l))),l}return await Promise.all(s.map((l,c)=>l?.handleChainEnd(xt(u[c],"output")))),u}async*_streamIterator(e,r){let i=await(await ce.configure(r?.callbacks,void 0,r?.tags,void 0,r?.metadata))?.handleChainStart(this.toJSON(),xt(e,"input")),a=e,s=[this.first,...this.middle,this.last],o=s.length-[...s].reverse().findIndex(c=>typeof c.transform!="function")-1;try{for(let c of s.slice(0,o))a=await c.invoke(a,this._patchConfig(r,i?.getChild()))}catch(c){throw await i?.handleChainError(c),c}let u=!0,l;try{let c=await s[o]._streamIterator(a,this._patchConfig(r,i?.getChild()));for(let d of s.slice(o+1))c=await d.transform(c,this._patchConfig(r,i?.getChild()));for await(let d of c)if(yield d,u)if(l===void 0)l=d;else try{l=l.concat(d)}catch{l=void 0,u=!1}}catch(c){throw await i?.handleChainError(c),c}await i?.handleChainEnd(xt(l,"output"))}pipe(e){return tr.isRunnableSequence(e)?new tr({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last}):new tr({first:this.first,middle:[...this.middle,this.last],last:Sr(e)})}static isRunnableSequence(e){return Array.isArray(e.middle)&&Ie.isRunnable(e)}static from([e,...r]){return new tr({first:Sr(e),middle:r.slice(0,-1).map(Sr),last:Sr(r[r.length-1])})}},tl=class extends Ie{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["schema","runnable"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(let[r,n]of Object.entries(e.steps))this.steps[r]=Sr(n)}async invoke(e,r){let i=await(await ce.configure(r?.callbacks,void 0,r?.tags,void 0,r?.metadata))?.handleChainStart(this.toJSON(),{input:e}),a={};try{for(let[s,o]of Object.entries(this.steps)){let u=await o.invoke(e,this._patchConfig(r,i?.getChild()));a[s]=u}}catch(s){throw await i?.handleChainError(s),s}return await i?.handleChainEnd(a),a}},rl=class extends Ie{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["schema","runnable"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.func=e.func}async invoke(e,r){return this._callWithConfig(async n=>this.func(n),e,r)}};Ai=class extends Ie{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["schema","runnable"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs}bind(e){return new Ai({bound:this.bound,kwargs:{...this.kwargs,...e}})}async invoke(e,r){return this.bound.invoke(e,{...r,...this.kwargs})}async batch(e,r,n){let i=Array.isArray(r)?r.map(a=>({...a,...this.kwargs})):{...r,...this.kwargs};return this.bound.batch(e,i,n)}async stream(e,r){return this.bound.stream(e,{...r,...this.kwargs})}}});var Jh,il,nl,Jw,Pn,al,Pi,En=R(()=>{Jh=t=>{let e=t.split(""),r=[],n=(a,s)=>{for(let o=s;o<e.length;o+=1)if(a.includes(e[o]))return o;return-1},i=0;for(;i<e.length;)if(e[i]==="{"&&i+1<e.length&&e[i+1]==="{")r.push({type:"literal",text:"{"}),i+=2;else if(e[i]==="}"&&i+1<e.length&&e[i+1]==="}")r.push({type:"literal",text:"}"}),i+=2;else if(e[i]==="{"){let a=n("}",i);if(a<0)throw new Error("Unclosed '{' in template.");r.push({type:"variable",name:e.slice(i+1,a).join("")}),i=a+1}else{if(e[i]==="}")throw new Error("Single '}' in template.");{let a=n("{}",i),s=(a<0?e.slice(i):e.slice(i,a)).join("");r.push({type:"literal",text:s}),i=a<0?e.length:a}}return r},il=(t,e)=>Jh(t).reduce((r,n)=>{if(n.type==="variable"){if(n.name in e)return r+e[n.name];throw new Error(`Missing value for input ${n.name}`)}return r+n.text},""),nl={"f-string":il,jinja2:(t,e)=>""},Jw={"f-string":Jh,jinja2:t=>[]},Pn=(t,e,r)=>nl[e](t,r),al=(t,e)=>Jw[e](t),Pi=(t,e,r)=>{if(!(e in nl)){let n=Object.keys(nl);throw new Error(`Invalid template format. Got \`${e}\`;
                         should be one of ${n}`)}try{let n=r.reduce((i,a)=>(i[a]="foo",i),{});Pn(t,e,n)}catch(n){throw new Error(`Invalid prompt schema: ${n.message}`)}}});var sl={};dt(sl,{PromptTemplate:()=>ee});var ee,_e=R(()=>{Ot();En();ee=class extends jr{constructor(e){if(super(e),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),this.validateTemplate){let r=this.inputVariables;this.partialVariables&&(r=r.concat(Object.keys(this.partialVariables))),Pi(this.template,this.templateFormat,r)}}_getPromptType(){return"prompt"}async format(e){let r=await this.mergePartialAndUserVariables(e);return Pn(this.template,this.templateFormat,r)}static fromExamples(e,r,n,i=`

`,a=""){let s=[a,...e,r].join(i);return new ee({inputVariables:n,template:s})}static fromTemplate(e,{templateFormat:r="f-string",...n}={}){let i=new Set;return al(e,r).forEach(a=>{a.type==="variable"&&i.add(a.name)}),new ee({inputVariables:[...i],templateFormat:r,template:e,...n})}async partial(e){let r={...this};return r.inputVariables=this.inputVariables.filter(n=>!(n in e)),r.partialVariables={...this.partialVariables??{},...e},new ee(r)}serialize(){if(this.outputParser!==void 0)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(e){if(!e.template)throw new Error("Prompt template must have a template");return new ee({inputVariables:e.input_variables,template:e.template,templateFormat:e.template_format})}}});var Yh={};dt(Yh,{FewShotPromptTemplate:()=>rr});var rr,Xa=R(()=>{Ot();En();_e();rr=class extends jr{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"examples",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleSelector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"examplePrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"suffix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"exampleSeparator",{enumerable:!0,configurable:!0,writable:!0,value:`

`}),Object.defineProperty(this,"prefix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),this.examples!==void 0&&this.exampleSelector!==void 0)throw new Error("Only one of 'examples' and 'example_selector' should be provided");if(this.examples===void 0&&this.exampleSelector===void 0)throw new Error("One of 'examples' and 'example_selector' should be provided");if(this.validateTemplate){let r=this.inputVariables;this.partialVariables&&(r=r.concat(Object.keys(this.partialVariables))),Pi(this.prefix+this.suffix,this.templateFormat,r)}}_getPromptType(){return"few_shot"}async getExamples(e){if(this.examples!==void 0)return this.examples;if(this.exampleSelector!==void 0)return this.exampleSelector.selectExamples(e);throw new Error("One of 'examples' and 'example_selector' should be provided")}async partial(e){let r={...this};return r.inputVariables=this.inputVariables.filter(n=>!(n in e)),r.partialVariables={...this.partialVariables??{},...e},new rr(r)}async format(e){let r=await this.mergePartialAndUserVariables(e),n=await this.getExamples(r),i=await Promise.all(n.map(s=>this.examplePrompt.format(s))),a=[this.prefix,...i,this.suffix].join(this.exampleSeparator);return Pn(a,this.templateFormat,r)}serialize(){if(this.exampleSelector||!this.examples)throw new Error("Serializing an example selector is not currently supported");if(this.outputParser!==void 0)throw new Error("Serializing an output parser is not currently supported");return{_type:this._getPromptType(),input_variables:this.inputVariables,example_prompt:this.examplePrompt.serialize(),example_separator:this.exampleSeparator,suffix:this.suffix,prefix:this.prefix,template_format:this.templateFormat,examples:this.examples}}static async deserialize(e){let{example_prompt:r}=e;if(!r)throw new Error("Missing example prompt");let n=await ee.deserialize(r),i;if(Array.isArray(e.examples))i=e.examples;else throw new Error("Invalid examples format. Only list or string are supported.");return new rr({inputVariables:e.input_variables,examplePrompt:n,examples:i,exampleSeparator:e.example_separator,prefix:e.prefix,suffix:e.suffix,templateFormat:e.template_format})}}});var Tn,Dt,jr,Ot=R(()=>{nt();br();An();Tn=class extends yn{constructor(e){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts","base"]}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new ft(this.value)]}},Dt=class extends Ie{get lc_attributes(){return{partialVariables:void 0}}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts",this._getPromptType()]}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"partialVariables",{enumerable:!0,configurable:!0,writable:!0,value:{}});let{inputVariables:r}=e;if(r.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,e)}async mergePartialAndUserVariables(e){let r=this.partialVariables??{},n={};for(let[a,s]of Object.entries(r))typeof s=="string"?n[a]=s:n[a]=await s();return{...n,...e}}async invoke(e,r){return this._callWithConfig(n=>this.formatPromptValue(n),e,{...r,runType:"prompt"})}serialize(){throw new Error("Use .toJSON() instead")}static async deserialize(e){switch(e._type){case"prompt":{let{PromptTemplate:r}=await Promise.resolve().then(()=>(_e(),sl));return r.deserialize(e)}case void 0:{let{PromptTemplate:r}=await Promise.resolve().then(()=>(_e(),sl));return r.deserialize({...e,_type:"prompt"})}case"few_shot":{let{FewShotPromptTemplate:r}=await Promise.resolve().then(()=>(Xa(),Yh));return r.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}}},jr=class extends Dt{async formatPromptValue(e){let r=await this.format(e);return new Tn(r)}}});var ol,Ei,Ti,es,mt,Ii,nr,De,kr=R(()=>{nt();br();Ot();_e();ol=class extends je{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}},Ei=class extends yn{constructor(e){Array.isArray(e)&&(e={messages:e}),super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return JSON.stringify(this.messages)}toChatMessages(){return this.messages}},Ti=class extends ol{constructor(e){"prompt"in e||(e={prompt:e}),super(e),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt}get inputVariables(){return this.prompt.inputVariables}async formatMessages(e){return[await this.format(e)]}},es=class extends Dt{constructor(e){super(e)}async format(e){return(await this.formatPromptValue(e)).toString()}async formatPromptValue(e){let r=await this.formatMessages(e);return new Ei(r)}},mt=class extends Ti{async format(e){return new ft(await this.prompt.format(e))}static fromTemplate(e){return new this(ee.fromTemplate(e))}},Ii=class extends Ti{async format(e){return new _t(await this.prompt.format(e))}static fromTemplate(e){return new this(ee.fromTemplate(e))}},nr=class extends Ti{async format(e){return new hn(await this.prompt.format(e))}static fromTemplate(e){return new this(ee.fromTemplate(e))}},De=class extends es{get lc_aliases(){return{promptMessages:"messages"}}constructor(e){if(super(e),Object.defineProperty(this,"promptMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),this.validateTemplate){let r=new Set;for(let s of this.promptMessages)for(let o of s.inputVariables)r.add(o);let n=new Set(this.partialVariables?this.inputVariables.concat(Object.keys(this.partialVariables)):this.inputVariables),i=new Set([...n].filter(s=>!r.has(s)));if(i.size>0)throw new Error(`Input variables \`${[...i]}\` are not used in any of the prompt messages.`);let a=new Set([...r].filter(s=>!n.has(s)));if(a.size>0)throw new Error(`Input variables \`${[...a]}\` are used in prompt messages but not in the prompt template.`)}}_getPromptType(){return"chat"}async formatMessages(e){let r=await this.mergePartialAndUserVariables(e),n=[];for(let i of this.promptMessages){let a=i.inputVariables.reduce((o,u)=>{if(!(u in r))throw new Error(`Missing value for input variable \`${u}\``);return o[u]=r[u],o},{}),s=await i.formatMessages(a);n=n.concat(s)}return n}async partial(e){let r={...this};return r.inputVariables=this.inputVariables.filter(n=>!(n in e)),r.partialVariables={...this.partialVariables??{},...e},new De(r)}static fromPromptMessages(e){let r=e.reduce((a,s)=>a.concat(s instanceof De?s.promptMessages:[s]),[]),n=e.reduce((a,s)=>s instanceof De?Object.assign(a,s.partialVariables):a,Object.create(null)),i=new Set;for(let a of r)for(let s of a.inputVariables)s in n||i.add(s);return new De({inputVariables:[...i],promptMessages:r,partialVariables:n})}}});var ir,Wh=R(()=>{nt();Ci();xn();ir=class extends ar{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]})}_separateRunnableConfigFromCallOptions(e){let[r,n]=super._separateRunnableConfigFromCallOptions(e);return n?.timeout&&!n.signal&&(n.signal=AbortSignal.timeout(n.timeout)),[r,n]}async invoke(e,r){let n=ir._convertInputToPromptValue(e);return(await this.generatePrompt([n],r,r?.callbacks)).generations[0][0].message}async*_streamResponseChunks(e,r,n){throw new Error("Not implemented.")}async*_streamIterator(e,r){if(this._streamResponseChunks===ir.prototype._streamResponseChunks)yield this.invoke(e,r);else{let i=ir._convertInputToPromptValue(e).toChatMessages(),[a,s]=this._separateRunnableConfigFromCallOptions(r),o=await ce.configure(a.callbacks,this.callbacks,a.tags,this.tags,a.metadata,this.metadata,{verbose:this.verbose}),u={options:s,invocation_params:this?.invocationParams(s)},l=await o?.handleChatModelStart(this.toJSON(),[i],void 0,void 0,u),c;try{for await(let d of this._streamResponseChunks(i,s,l?.[0]))yield d.message,c?c=c.concat(d):c=d}catch(d){throw await Promise.all((l??[]).map(y=>y?.handleLLMError(d))),d}await Promise.all((l??[]).map(d=>d?.handleLLMEnd({generations:[[c]]})))}}async generate(e,r,n){let i;Array.isArray(r)?i={stop:r}:i=r;let[a,s]=this._separateRunnableConfigFromCallOptions(i),o=await ce.configure(a.callbacks??n,this.callbacks,a.tags,this.tags,a.metadata,this.metadata,{verbose:this.verbose}),u={options:s,invocation_params:this?.invocationParams(i)},l=await o?.handleChatModelStart(this.toJSON(),e,void 0,void 0,u),c=await Promise.allSettled(e.map((h,_)=>this._generate(h,{...s,promptIndex:_},l?.[_]))),d=[],y=[];await Promise.all(c.map(async(h,_)=>{if(h.status==="fulfilled"){let P=h.value;return d[_]=P.generations,y[_]=P.llmOutput,l?.[_]?.handleLLMEnd({generations:[P.generations],llmOutput:P.llmOutput})}else return await l?.[_]?.handleLLMError(h.reason),Promise.reject(h.reason)}));let w={generations:d,llmOutput:y.length?this._combineLLMOutput?.(...y):void 0};return Object.defineProperty(w,gn,{value:l?{runIds:l?.map(h=>h.runId)}:void 0,configurable:!0}),w}invocationParams(e){return{}}_modelType(){return"base_chat_model"}async generatePrompt(e,r,n){let i=e.map(a=>a.toChatMessages());return this.generate(i,r,n)}async call(e,r,n){return(await this.generate([e],r,n)).generations[0][0].message}async callPrompt(e,r,n){let i=e.toChatMessages();return this.call(i,r,n)}async predictMessages(e,r,n){return this.call(e,r,n)}async predict(e,r,n){let i=new ft(e);return(await this.call([i],r,n)).content}}});var In,ts=R(()=>{In=async(t,e,r,n,i,a,s,o,u)=>(await t.call(fetch,"https://api.promptlayer.com/track-request",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({function_name:e,provider:"langchain",args:r,kwargs:n,tags:i,request_response:a,request_start_time:Math.floor(s/1e3),request_end_time:Math.floor(o/1e3),api_key:u})})).json()});var Si=N(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.getParsedType=le.ZodParsedType=le.objectUtil=le.util=void 0;var Gh;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{let a={};for(let s of i)a[s]=s;return a},t.getValidEnumValues=i=>{let a=t.objectKeys(i).filter(o=>typeof i[i[o]]!="number"),s={};for(let o of a)s[o]=i[o];return t.objectValues(s)},t.objectValues=i=>t.objectKeys(i).map(function(a){return i[a]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let a=[];for(let s in i)Object.prototype.hasOwnProperty.call(i,s)&&a.push(s);return a},t.find=(i,a)=>{for(let s of i)if(a(s))return s},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,a=" | "){return i.map(s=>typeof s=="string"?`'${s}'`:s).join(a)}t.joinValues=n,t.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(Gh=le.util||(le.util={}));var Yw;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(Yw=le.objectUtil||(le.objectUtil={}));le.ZodParsedType=Gh.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]);var Ww=t=>{switch(typeof t){case"undefined":return le.ZodParsedType.undefined;case"string":return le.ZodParsedType.string;case"number":return isNaN(t)?le.ZodParsedType.nan:le.ZodParsedType.number;case"boolean":return le.ZodParsedType.boolean;case"function":return le.ZodParsedType.function;case"bigint":return le.ZodParsedType.bigint;case"symbol":return le.ZodParsedType.symbol;case"object":return Array.isArray(t)?le.ZodParsedType.array:t===null?le.ZodParsedType.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?le.ZodParsedType.promise:typeof Map<"u"&&t instanceof Map?le.ZodParsedType.map:typeof Set<"u"&&t instanceof Set?le.ZodParsedType.set:typeof Date<"u"&&t instanceof Date?le.ZodParsedType.date:le.ZodParsedType.object;default:return le.ZodParsedType.unknown}};le.getParsedType=Ww});var rs=N(sr=>{"use strict";Object.defineProperty(sr,"__esModule",{value:!0});sr.ZodError=sr.quotelessJson=sr.ZodIssueCode=void 0;var Qh=Si();sr.ZodIssueCode=Qh.util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);var Gw=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");sr.quotelessJson=Gw;var ji=class extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let r=e||function(a){return a.message},n={_errors:[]},i=a=>{for(let s of a.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)n._errors.push(r(s));else{let o=n,u=0;for(;u<s.path.length;){let l=s.path[u];u===s.path.length-1?(o[l]=o[l]||{_errors:[]},o[l]._errors.push(r(s))):o[l]=o[l]||{_errors:[]},o=o[l],u++}}};return i(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,Qh.util.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};sr.ZodError=ji;ji.create=t=>new ji(t)});var ll=N(ul=>{"use strict";Object.defineProperty(ul,"__esModule",{value:!0});var Rr=Si(),qe=rs(),Qw=(t,e)=>{let r;switch(t.code){case qe.ZodIssueCode.invalid_type:t.received===Rr.ZodParsedType.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case qe.ZodIssueCode.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Rr.util.jsonStringifyReplacer)}`;break;case qe.ZodIssueCode.unrecognized_keys:r=`Unrecognized key(s) in object: ${Rr.util.joinValues(t.keys,", ")}`;break;case qe.ZodIssueCode.invalid_union:r="Invalid input";break;case qe.ZodIssueCode.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Rr.util.joinValues(t.options)}`;break;case qe.ZodIssueCode.invalid_enum_value:r=`Invalid enum value. Expected ${Rr.util.joinValues(t.options)}, received '${t.received}'`;break;case qe.ZodIssueCode.invalid_arguments:r="Invalid function arguments";break;case qe.ZodIssueCode.invalid_return_type:r="Invalid function return type";break;case qe.ZodIssueCode.invalid_date:r="Invalid date";break;case qe.ZodIssueCode.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Rr.util.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case qe.ZodIssueCode.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case qe.ZodIssueCode.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case qe.ZodIssueCode.custom:r="Invalid input";break;case qe.ZodIssueCode.invalid_intersection_types:r="Intersection results could not be merged";break;case qe.ZodIssueCode.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case qe.ZodIssueCode.not_finite:r="Number must be finite";break;default:r=e.defaultError,Rr.util.assertNever(t)}return{message:r}};ul.default=Qw});var ns=N(At=>{"use strict";var Xw=At&&At.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(At,"__esModule",{value:!0});At.getErrorMap=At.setErrorMap=At.defaultErrorMap=void 0;var Xh=Xw(ll());At.defaultErrorMap=Xh.default;var ef=Xh.default;function e_(t){ef=t}At.setErrorMap=e_;function t_(){return ef}At.getErrorMap=t_});var cl=N(ae=>{"use strict";var r_=ae&&ae.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ae,"__esModule",{value:!0});ae.isAsync=ae.isValid=ae.isDirty=ae.isAborted=ae.OK=ae.DIRTY=ae.INVALID=ae.ParseStatus=ae.addIssueToContext=ae.EMPTY_PATH=ae.makeIssue=void 0;var n_=ns(),i_=r_(ll()),a_=t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,a=[...r,...i.path||[]],s={...i,path:a},o="",u=n.filter(l=>!!l).slice().reverse();for(let l of u)o=l(s,{data:e,defaultError:o}).message;return{...i,path:a,message:i.message||o}};ae.makeIssue=a_;ae.EMPTY_PATH=[];function s_(t,e){let r=(0,ae.makeIssue)({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,(0,n_.getErrorMap)(),i_.default].filter(n=>!!n)});t.common.issues.push(r)}ae.addIssueToContext=s_;var ki=class{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return ae.INVALID;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r)n.push({key:await i.key,value:await i.value});return ki.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:a,value:s}=i;if(a.status==="aborted"||s.status==="aborted")return ae.INVALID;a.status==="dirty"&&e.dirty(),s.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(n[a.value]=s.value)}return{status:e.value,value:n}}};ae.ParseStatus=ki;ae.INVALID=Object.freeze({status:"aborted"});var o_=t=>({status:"dirty",value:t});ae.DIRTY=o_;var u_=t=>({status:"valid",value:t});ae.OK=u_;var l_=t=>t.status==="aborted";ae.isAborted=l_;var c_=t=>t.status==="dirty";ae.isDirty=c_;var d_=t=>t.status==="valid";ae.isValid=d_;var p_=t=>typeof Promise<"u"&&t instanceof Promise;ae.isAsync=p_});var rf=N(tf=>{"use strict";Object.defineProperty(tf,"__esModule",{value:!0})});var nf=N(Ri=>{"use strict";Object.defineProperty(Ri,"__esModule",{value:!0});Ri.errorUtil=void 0;var h_;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(h_=Ri.errorUtil||(Ri.errorUtil={}))});var df=N(O=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});O.date=O.boolean=O.bigint=O.array=O.any=O.coerce=O.ZodFirstPartyTypeKind=O.late=O.ZodSchema=O.Schema=O.custom=O.ZodReadonly=O.ZodPipeline=O.ZodBranded=O.BRAND=O.ZodNaN=O.ZodCatch=O.ZodDefault=O.ZodNullable=O.ZodOptional=O.ZodTransformer=O.ZodEffects=O.ZodPromise=O.ZodNativeEnum=O.ZodEnum=O.ZodLiteral=O.ZodLazy=O.ZodFunction=O.ZodSet=O.ZodMap=O.ZodRecord=O.ZodTuple=O.ZodIntersection=O.ZodDiscriminatedUnion=O.ZodUnion=O.ZodObject=O.ZodArray=O.ZodVoid=O.ZodNever=O.ZodUnknown=O.ZodAny=O.ZodNull=O.ZodUndefined=O.ZodSymbol=O.ZodDate=O.ZodBoolean=O.ZodBigInt=O.ZodNumber=O.ZodString=O.ZodType=void 0;O.NEVER=O.void=O.unknown=O.union=O.undefined=O.tuple=O.transformer=O.symbol=O.string=O.strictObject=O.set=O.record=O.promise=O.preprocess=O.pipeline=O.ostring=O.optional=O.onumber=O.oboolean=O.object=O.number=O.nullable=O.null=O.never=O.nativeEnum=O.nan=O.map=O.literal=O.lazy=O.intersection=O.instanceof=O.function=O.enum=O.effect=O.discriminatedUnion=void 0;var is=ns(),$=nf(),T=cl(),q=Si(),D=rs(),st=class{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},af=(t,e)=>{if((0,T.isValid)(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new D.ZodError(t.common.issues);return this._error=r,this._error}}};function G(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(s,o)=>s.code!=="invalid_type"?{message:o.defaultError}:typeof o.data>"u"?{message:n??o.defaultError}:{message:r??o.defaultError},description:i}}var Q=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return(0,q.getParsedType)(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:(0,q.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new T.ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:(0,q.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if((0,T.isAsync)(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,q.getParsedType)(e)},a=this._parseSync({data:e,path:i.path,parent:i});return af(i,a)}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,q.getParsedType)(e)},i=this._parse({data:e,path:n.path,parent:n}),a=await((0,T.isAsync)(i)?i:Promise.resolve(i));return af(n,a)}refine(e,r){let n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,a)=>{let s=e(i),o=()=>a.addIssue({code:D.ZodIssueCode.custom,...n(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(u=>u?!0:(o(),!1)):s?!0:(o(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new tt({schema:this,typeName:H.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return yt.create(this,this._def)}nullable(){return Vt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return et.create(this,this._def)}promise(){return lr.create(this,this._def)}or(e){return Dr.create([this,e],this._def)}and(e){return qr.create(this,e,this._def)}transform(e){return new tt({...G(this._def),schema:this,typeName:H.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new Br({...G(this._def),innerType:this,defaultValue:r,typeName:H.ZodDefault})}brand(){return new ss({typeName:H.ZodBranded,type:this,...G(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new Nn({...G(this._def),innerType:this,catchValue:r,typeName:H.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Kr.create(this,e)}readonly(){return Ln.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}};O.ZodType=Q;O.Schema=Q;O.ZodSchema=Q;var f_=/^c[^\s-]{8,}$/i,m_=/^[a-z][a-z0-9]*$/,y_=/[0-9A-HJKMNP-TV-Z]{26}/,g_=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,b_=/^([A-Z0-9_+-]+\.?)*[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,w_=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,__=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,v_=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,x_=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function O_(t,e){return!!((e==="v4"||!e)&&__.test(t)||(e==="v6"||!e)&&v_.test(t))}var Xe=class extends Q{constructor(){super(...arguments),this._regex=(e,r,n)=>this.refinement(i=>e.test(i),{validation:r,code:D.ZodIssueCode.invalid_string,...$.errorUtil.errToObj(n)}),this.nonempty=e=>this.min(1,$.errorUtil.errToObj(e)),this.trim=()=>new Xe({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new Xe({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new Xe({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==q.ZodParsedType.string){let a=this._getOrReturnCtx(e);return(0,T.addIssueToContext)(a,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.string,received:a.parsedType}),T.INVALID}let n=new T.ParseStatus,i;for(let a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),(0,T.addIssueToContext)(i,{code:D.ZodIssueCode.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),(0,T.addIssueToContext)(i,{code:D.ZodIssueCode.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){let s=e.data.length>a.value,o=e.data.length<a.value;(s||o)&&(i=this._getOrReturnCtx(e,i),s?(0,T.addIssueToContext)(i,{code:D.ZodIssueCode.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):o&&(0,T.addIssueToContext)(i,{code:D.ZodIssueCode.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")b_.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,T.addIssueToContext)(i,{validation:"email",code:D.ZodIssueCode.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")w_.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,T.addIssueToContext)(i,{validation:"emoji",code:D.ZodIssueCode.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")g_.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,T.addIssueToContext)(i,{validation:"uuid",code:D.ZodIssueCode.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")f_.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,T.addIssueToContext)(i,{validation:"cuid",code:D.ZodIssueCode.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")m_.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,T.addIssueToContext)(i,{validation:"cuid2",code:D.ZodIssueCode.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")y_.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,T.addIssueToContext)(i,{validation:"ulid",code:D.ZodIssueCode.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),(0,T.addIssueToContext)(i,{validation:"url",code:D.ZodIssueCode.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,T.addIssueToContext)(i,{validation:"regex",code:D.ZodIssueCode.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),(0,T.addIssueToContext)(i,{code:D.ZodIssueCode.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),(0,T.addIssueToContext)(i,{code:D.ZodIssueCode.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),(0,T.addIssueToContext)(i,{code:D.ZodIssueCode.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?x_(a).test(e.data)||(i=this._getOrReturnCtx(e,i),(0,T.addIssueToContext)(i,{code:D.ZodIssueCode.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="ip"?O_(e.data,a.version)||(i=this._getOrReturnCtx(e,i),(0,T.addIssueToContext)(i,{validation:"ip",code:D.ZodIssueCode.invalid_string,message:a.message}),n.dirty()):q.util.assertNever(a);return{status:n.value,value:e.data}}_addCheck(e){return new Xe({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...$.errorUtil.errToObj(e)})}url(e){return this._addCheck({kind:"url",...$.errorUtil.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...$.errorUtil.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...$.errorUtil.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...$.errorUtil.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...$.errorUtil.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...$.errorUtil.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...$.errorUtil.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,...$.errorUtil.errToObj(e?.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...$.errorUtil.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...$.errorUtil.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...$.errorUtil.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...$.errorUtil.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...$.errorUtil.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...$.errorUtil.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...$.errorUtil.errToObj(r)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};O.ZodString=Xe;Xe.create=t=>{var e;return new Xe({checks:[],typeName:H.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...G(t)})};function A_(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,a=parseInt(t.toFixed(i).replace(".","")),s=parseInt(e.toFixed(i).replace(".",""));return a%s/Math.pow(10,i)}var Pt=class extends Q{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==q.ZodParsedType.number){let a=this._getOrReturnCtx(e);return(0,T.addIssueToContext)(a,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.number,received:a.parsedType}),T.INVALID}let n,i=new T.ParseStatus;for(let a of this._def.checks)a.kind==="int"?q.util.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),(0,T.addIssueToContext)(n,{code:D.ZodIssueCode.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),(0,T.addIssueToContext)(n,{code:D.ZodIssueCode.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),(0,T.addIssueToContext)(n,{code:D.ZodIssueCode.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?A_(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),(0,T.addIssueToContext)(n,{code:D.ZodIssueCode.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),(0,T.addIssueToContext)(n,{code:D.ZodIssueCode.not_finite,message:a.message}),i.dirty()):q.util.assertNever(a);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,$.errorUtil.toString(r))}gt(e,r){return this.setLimit("min",e,!1,$.errorUtil.toString(r))}lte(e,r){return this.setLimit("max",e,!0,$.errorUtil.toString(r))}lt(e,r){return this.setLimit("max",e,!1,$.errorUtil.toString(r))}setLimit(e,r,n,i){return new Pt({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:$.errorUtil.toString(i)}]})}_addCheck(e){return new Pt({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:$.errorUtil.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:$.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:$.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:$.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:$.errorUtil.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:$.errorUtil.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:$.errorUtil.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:$.errorUtil.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:$.errorUtil.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&q.util.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};O.ZodNumber=Pt;Pt.create=t=>new Pt({checks:[],typeName:H.ZodNumber,coerce:t?.coerce||!1,...G(t)});var Et=class extends Q{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==q.ZodParsedType.bigint){let a=this._getOrReturnCtx(e);return(0,T.addIssueToContext)(a,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.bigint,received:a.parsedType}),T.INVALID}let n,i=new T.ParseStatus;for(let a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),(0,T.addIssueToContext)(n,{code:D.ZodIssueCode.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),(0,T.addIssueToContext)(n,{code:D.ZodIssueCode.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),(0,T.addIssueToContext)(n,{code:D.ZodIssueCode.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):q.util.assertNever(a);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,$.errorUtil.toString(r))}gt(e,r){return this.setLimit("min",e,!1,$.errorUtil.toString(r))}lte(e,r){return this.setLimit("max",e,!0,$.errorUtil.toString(r))}lt(e,r){return this.setLimit("max",e,!1,$.errorUtil.toString(r))}setLimit(e,r,n,i){return new Et({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:$.errorUtil.toString(i)}]})}_addCheck(e){return new Et({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:$.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:$.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:$.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:$.errorUtil.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:$.errorUtil.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};O.ZodBigInt=Et;Et.create=t=>{var e;return new Et({checks:[],typeName:H.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...G(t)})};var Nr=class extends Q{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==q.ZodParsedType.boolean){let n=this._getOrReturnCtx(e);return(0,T.addIssueToContext)(n,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.boolean,received:n.parsedType}),T.INVALID}return(0,T.OK)(e.data)}};O.ZodBoolean=Nr;Nr.create=t=>new Nr({typeName:H.ZodBoolean,coerce:t?.coerce||!1,...G(t)});var Ft=class extends Q{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==q.ZodParsedType.date){let a=this._getOrReturnCtx(e);return(0,T.addIssueToContext)(a,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.date,received:a.parsedType}),T.INVALID}if(isNaN(e.data.getTime())){let a=this._getOrReturnCtx(e);return(0,T.addIssueToContext)(a,{code:D.ZodIssueCode.invalid_date}),T.INVALID}let n=new T.ParseStatus,i;for(let a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),(0,T.addIssueToContext)(i,{code:D.ZodIssueCode.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),(0,T.addIssueToContext)(i,{code:D.ZodIssueCode.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):q.util.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ft({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:$.errorUtil.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:$.errorUtil.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};O.ZodDate=Ft;Ft.create=t=>new Ft({checks:[],coerce:t?.coerce||!1,typeName:H.ZodDate,...G(t)});var Sn=class extends Q{_parse(e){if(this._getType(e)!==q.ZodParsedType.symbol){let n=this._getOrReturnCtx(e);return(0,T.addIssueToContext)(n,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.symbol,received:n.parsedType}),T.INVALID}return(0,T.OK)(e.data)}};O.ZodSymbol=Sn;Sn.create=t=>new Sn({typeName:H.ZodSymbol,...G(t)});var Mr=class extends Q{_parse(e){if(this._getType(e)!==q.ZodParsedType.undefined){let n=this._getOrReturnCtx(e);return(0,T.addIssueToContext)(n,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.undefined,received:n.parsedType}),T.INVALID}return(0,T.OK)(e.data)}};O.ZodUndefined=Mr;Mr.create=t=>new Mr({typeName:H.ZodUndefined,...G(t)});var Lr=class extends Q{_parse(e){if(this._getType(e)!==q.ZodParsedType.null){let n=this._getOrReturnCtx(e);return(0,T.addIssueToContext)(n,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.null,received:n.parsedType}),T.INVALID}return(0,T.OK)(e.data)}};O.ZodNull=Lr;Lr.create=t=>new Lr({typeName:H.ZodNull,...G(t)});var ur=class extends Q{constructor(){super(...arguments),this._any=!0}_parse(e){return(0,T.OK)(e.data)}};O.ZodAny=ur;ur.create=t=>new ur({typeName:H.ZodAny,...G(t)});var qt=class extends Q{constructor(){super(...arguments),this._unknown=!0}_parse(e){return(0,T.OK)(e.data)}};O.ZodUnknown=qt;qt.create=t=>new qt({typeName:H.ZodUnknown,...G(t)});var gt=class extends Q{_parse(e){let r=this._getOrReturnCtx(e);return(0,T.addIssueToContext)(r,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.never,received:r.parsedType}),T.INVALID}};O.ZodNever=gt;gt.create=t=>new gt({typeName:H.ZodNever,...G(t)});var jn=class extends Q{_parse(e){if(this._getType(e)!==q.ZodParsedType.undefined){let n=this._getOrReturnCtx(e);return(0,T.addIssueToContext)(n,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.void,received:n.parsedType}),T.INVALID}return(0,T.OK)(e.data)}};O.ZodVoid=jn;jn.create=t=>new jn({typeName:H.ZodVoid,...G(t)});var et=class extends Q{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==q.ZodParsedType.array)return(0,T.addIssueToContext)(r,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.array,received:r.parsedType}),T.INVALID;if(i.exactLength!==null){let s=r.data.length>i.exactLength.value,o=r.data.length<i.exactLength.value;(s||o)&&((0,T.addIssueToContext)(r,{code:s?D.ZodIssueCode.too_big:D.ZodIssueCode.too_small,minimum:o?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&((0,T.addIssueToContext)(r,{code:D.ZodIssueCode.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&((0,T.addIssueToContext)(r,{code:D.ZodIssueCode.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((s,o)=>i.type._parseAsync(new st(r,s,r.path,o)))).then(s=>T.ParseStatus.mergeArray(n,s));let a=[...r.data].map((s,o)=>i.type._parseSync(new st(r,s,r.path,o)));return T.ParseStatus.mergeArray(n,a)}get element(){return this._def.type}min(e,r){return new et({...this._def,minLength:{value:e,message:$.errorUtil.toString(r)}})}max(e,r){return new et({...this._def,maxLength:{value:e,message:$.errorUtil.toString(r)}})}length(e,r){return new et({...this._def,exactLength:{value:e,message:$.errorUtil.toString(r)}})}nonempty(e){return this.min(1,e)}};O.ZodArray=et;et.create=(t,e)=>new et({type:t,minLength:null,maxLength:null,exactLength:null,typeName:H.ZodArray,...G(e)});function Cn(t){if(t instanceof pe){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=yt.create(Cn(n))}return new pe({...t._def,shape:()=>e})}else return t instanceof et?new et({...t._def,type:Cn(t.element)}):t instanceof yt?yt.create(Cn(t.unwrap())):t instanceof Vt?Vt.create(Cn(t.unwrap())):t instanceof ot?ot.create(t.items.map(e=>Cn(e))):t}var pe=class extends Q{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=q.util.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==q.ZodParsedType.object){let l=this._getOrReturnCtx(e);return(0,T.addIssueToContext)(l,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.object,received:l.parsedType}),T.INVALID}let{status:n,ctx:i}=this._processInputParams(e),{shape:a,keys:s}=this._getCached(),o=[];if(!(this._def.catchall instanceof gt&&this._def.unknownKeys==="strip"))for(let l in i.data)s.includes(l)||o.push(l);let u=[];for(let l of s){let c=a[l],d=i.data[l];u.push({key:{status:"valid",value:l},value:c._parse(new st(i,d,i.path,l)),alwaysSet:l in i.data})}if(this._def.catchall instanceof gt){let l=this._def.unknownKeys;if(l==="passthrough")for(let c of o)u.push({key:{status:"valid",value:c},value:{status:"valid",value:i.data[c]}});else if(l==="strict")o.length>0&&((0,T.addIssueToContext)(i,{code:D.ZodIssueCode.unrecognized_keys,keys:o}),n.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let l=this._def.catchall;for(let c of o){let d=i.data[c];u.push({key:{status:"valid",value:c},value:l._parse(new st(i,d,i.path,c)),alwaysSet:c in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let l=[];for(let c of u){let d=await c.key;l.push({key:d,value:await c.value,alwaysSet:c.alwaysSet})}return l}).then(l=>T.ParseStatus.mergeObjectSync(n,l)):T.ParseStatus.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return $.errorUtil.errToObj,new pe({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,a,s,o;let u=(s=(a=(i=this._def).errorMap)===null||a===void 0?void 0:a.call(i,r,n).message)!==null&&s!==void 0?s:n.defaultError;return r.code==="unrecognized_keys"?{message:(o=$.errorUtil.errToObj(e).message)!==null&&o!==void 0?o:u}:{message:u}}}:{}})}strip(){return new pe({...this._def,unknownKeys:"strip"})}passthrough(){return new pe({...this._def,unknownKeys:"passthrough"})}extend(e){return new pe({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new pe({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:H.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new pe({...this._def,catchall:e})}pick(e){let r={};return q.util.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new pe({...this._def,shape:()=>r})}omit(e){let r={};return q.util.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new pe({...this._def,shape:()=>r})}deepPartial(){return Cn(this)}partial(e){let r={};return q.util.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new pe({...this._def,shape:()=>r})}required(e){let r={};return q.util.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof yt;)a=a._def.innerType;r[n]=a}}),new pe({...this._def,shape:()=>r})}keyof(){return sf(q.util.objectKeys(this.shape))}};O.ZodObject=pe;pe.create=(t,e)=>new pe({shape:()=>t,unknownKeys:"strip",catchall:gt.create(),typeName:H.ZodObject,...G(e)});pe.strictCreate=(t,e)=>new pe({shape:()=>t,unknownKeys:"strict",catchall:gt.create(),typeName:H.ZodObject,...G(e)});pe.lazycreate=(t,e)=>new pe({shape:t,unknownKeys:"strip",catchall:gt.create(),typeName:H.ZodObject,...G(e)});var Dr=class extends Q{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(a){for(let o of a)if(o.result.status==="valid")return o.result;for(let o of a)if(o.result.status==="dirty")return r.common.issues.push(...o.ctx.common.issues),o.result;let s=a.map(o=>new D.ZodError(o.ctx.common.issues));return(0,T.addIssueToContext)(r,{code:D.ZodIssueCode.invalid_union,unionErrors:s}),T.INVALID}if(r.common.async)return Promise.all(n.map(async a=>{let s={...r,common:{...r.common,issues:[]},parent:null};return{result:await a._parseAsync({data:r.data,path:r.path,parent:s}),ctx:s}})).then(i);{let a,s=[];for(let u of n){let l={...r,common:{...r.common,issues:[]},parent:null},c=u._parseSync({data:r.data,path:r.path,parent:l});if(c.status==="valid")return c;c.status==="dirty"&&!a&&(a={result:c,ctx:l}),l.common.issues.length&&s.push(l.common.issues)}if(a)return r.common.issues.push(...a.ctx.common.issues),a.result;let o=s.map(u=>new D.ZodError(u));return(0,T.addIssueToContext)(r,{code:D.ZodIssueCode.invalid_union,unionErrors:o}),T.INVALID}}get options(){return this._def.options}};O.ZodUnion=Dr;Dr.create=(t,e)=>new Dr({options:t,typeName:H.ZodUnion,...G(e)});var as=t=>t instanceof Ur?as(t.schema):t instanceof tt?as(t.innerType()):t instanceof Vr?[t.value]:t instanceof Tt?t.options:t instanceof zr?Object.keys(t.enum):t instanceof Br?as(t._def.innerType):t instanceof Mr?[void 0]:t instanceof Lr?[null]:null,kn=class extends Q{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==q.ZodParsedType.object)return(0,T.addIssueToContext)(r,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.object,received:r.parsedType}),T.INVALID;let n=this.discriminator,i=r.data[n],a=this.optionsMap.get(i);return a?r.common.async?a._parseAsync({data:r.data,path:r.path,parent:r}):a._parseSync({data:r.data,path:r.path,parent:r}):((0,T.addIssueToContext)(r,{code:D.ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),T.INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let a of r){let s=as(a.shape[e]);if(!s)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let o of s){if(i.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);i.set(o,a)}}return new kn({typeName:H.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...G(n)})}};O.ZodDiscriminatedUnion=kn;function dl(t,e){let r=(0,q.getParsedType)(t),n=(0,q.getParsedType)(e);if(t===e)return{valid:!0,data:t};if(r===q.ZodParsedType.object&&n===q.ZodParsedType.object){let i=q.util.objectKeys(e),a=q.util.objectKeys(t).filter(o=>i.indexOf(o)!==-1),s={...t,...e};for(let o of a){let u=dl(t[o],e[o]);if(!u.valid)return{valid:!1};s[o]=u.data}return{valid:!0,data:s}}else if(r===q.ZodParsedType.array&&n===q.ZodParsedType.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let a=0;a<t.length;a++){let s=t[a],o=e[a],u=dl(s,o);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return r===q.ZodParsedType.date&&n===q.ZodParsedType.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var qr=class extends Q{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=(a,s)=>{if((0,T.isAborted)(a)||(0,T.isAborted)(s))return T.INVALID;let o=dl(a.value,s.value);return o.valid?(((0,T.isDirty)(a)||(0,T.isDirty)(s))&&r.dirty(),{status:r.value,value:o.data}):((0,T.addIssueToContext)(n,{code:D.ZodIssueCode.invalid_intersection_types}),T.INVALID)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,s])=>i(a,s)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};O.ZodIntersection=qr;qr.create=(t,e,r)=>new qr({left:t,right:e,typeName:H.ZodIntersection,...G(r)});var ot=class extends Q{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==q.ZodParsedType.array)return(0,T.addIssueToContext)(n,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.array,received:n.parsedType}),T.INVALID;if(n.data.length<this._def.items.length)return(0,T.addIssueToContext)(n,{code:D.ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),T.INVALID;!this._def.rest&&n.data.length>this._def.items.length&&((0,T.addIssueToContext)(n,{code:D.ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let a=[...n.data].map((s,o)=>{let u=this._def.items[o]||this._def.rest;return u?u._parse(new st(n,s,n.path,o)):null}).filter(s=>!!s);return n.common.async?Promise.all(a).then(s=>T.ParseStatus.mergeArray(r,s)):T.ParseStatus.mergeArray(r,a)}get items(){return this._def.items}rest(e){return new ot({...this._def,rest:e})}};O.ZodTuple=ot;ot.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ot({items:t,typeName:H.ZodTuple,rest:null,...G(e)})};var Fr=class extends Q{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==q.ZodParsedType.object)return(0,T.addIssueToContext)(n,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.object,received:n.parsedType}),T.INVALID;let i=[],a=this._def.keyType,s=this._def.valueType;for(let o in n.data)i.push({key:a._parse(new st(n,o,n.path,o)),value:s._parse(new st(n,n.data[o],n.path,o))});return n.common.async?T.ParseStatus.mergeObjectAsync(r,i):T.ParseStatus.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof Q?new Fr({keyType:e,valueType:r,typeName:H.ZodRecord,...G(n)}):new Fr({keyType:Xe.create(),valueType:e,typeName:H.ZodRecord,...G(r)})}};O.ZodRecord=Fr;var Rn=class extends Q{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==q.ZodParsedType.map)return(0,T.addIssueToContext)(n,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.map,received:n.parsedType}),T.INVALID;let i=this._def.keyType,a=this._def.valueType,s=[...n.data.entries()].map(([o,u],l)=>({key:i._parse(new st(n,o,n.path,[l,"key"])),value:a._parse(new st(n,u,n.path,[l,"value"]))}));if(n.common.async){let o=new Map;return Promise.resolve().then(async()=>{for(let u of s){let l=await u.key,c=await u.value;if(l.status==="aborted"||c.status==="aborted")return T.INVALID;(l.status==="dirty"||c.status==="dirty")&&r.dirty(),o.set(l.value,c.value)}return{status:r.value,value:o}})}else{let o=new Map;for(let u of s){let l=u.key,c=u.value;if(l.status==="aborted"||c.status==="aborted")return T.INVALID;(l.status==="dirty"||c.status==="dirty")&&r.dirty(),o.set(l.value,c.value)}return{status:r.value,value:o}}}};O.ZodMap=Rn;Rn.create=(t,e,r)=>new Rn({valueType:e,keyType:t,typeName:H.ZodMap,...G(r)});var Ut=class extends Q{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==q.ZodParsedType.set)return(0,T.addIssueToContext)(n,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.set,received:n.parsedType}),T.INVALID;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&((0,T.addIssueToContext)(n,{code:D.ZodIssueCode.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&((0,T.addIssueToContext)(n,{code:D.ZodIssueCode.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let a=this._def.valueType;function s(u){let l=new Set;for(let c of u){if(c.status==="aborted")return T.INVALID;c.status==="dirty"&&r.dirty(),l.add(c.value)}return{status:r.value,value:l}}let o=[...n.data.values()].map((u,l)=>a._parse(new st(n,u,n.path,l)));return n.common.async?Promise.all(o).then(u=>s(u)):s(o)}min(e,r){return new Ut({...this._def,minSize:{value:e,message:$.errorUtil.toString(r)}})}max(e,r){return new Ut({...this._def,maxSize:{value:e,message:$.errorUtil.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};O.ZodSet=Ut;Ut.create=(t,e)=>new Ut({valueType:t,minSize:null,maxSize:null,typeName:H.ZodSet,...G(e)});var or=class extends Q{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==q.ZodParsedType.function)return(0,T.addIssueToContext)(r,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.function,received:r.parsedType}),T.INVALID;function n(o,u){return(0,T.makeIssue)({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,(0,is.getErrorMap)(),is.defaultErrorMap].filter(l=>!!l),issueData:{code:D.ZodIssueCode.invalid_arguments,argumentsError:u}})}function i(o,u){return(0,T.makeIssue)({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,(0,is.getErrorMap)(),is.defaultErrorMap].filter(l=>!!l),issueData:{code:D.ZodIssueCode.invalid_return_type,returnTypeError:u}})}let a={errorMap:r.common.contextualErrorMap},s=r.data;if(this._def.returns instanceof lr){let o=this;return(0,T.OK)(async function(...u){let l=new D.ZodError([]),c=await o._def.args.parseAsync(u,a).catch(w=>{throw l.addIssue(n(u,w)),l}),d=await Reflect.apply(s,this,c);return await o._def.returns._def.type.parseAsync(d,a).catch(w=>{throw l.addIssue(i(d,w)),l})})}else{let o=this;return(0,T.OK)(function(...u){let l=o._def.args.safeParse(u,a);if(!l.success)throw new D.ZodError([n(u,l.error)]);let c=Reflect.apply(s,this,l.data),d=o._def.returns.safeParse(c,a);if(!d.success)throw new D.ZodError([i(c,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new or({...this._def,args:ot.create(e).rest(qt.create())})}returns(e){return new or({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new or({args:e||ot.create([]).rest(qt.create()),returns:r||qt.create(),typeName:H.ZodFunction,...G(n)})}};O.ZodFunction=or;var Ur=class extends Q{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};O.ZodLazy=Ur;Ur.create=(t,e)=>new Ur({getter:t,typeName:H.ZodLazy,...G(e)});var Vr=class extends Q{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return(0,T.addIssueToContext)(r,{received:r.data,code:D.ZodIssueCode.invalid_literal,expected:this._def.value}),T.INVALID}return{status:"valid",value:e.data}}get value(){return this._def.value}};O.ZodLiteral=Vr;Vr.create=(t,e)=>new Vr({value:t,typeName:H.ZodLiteral,...G(e)});function sf(t,e){return new Tt({values:t,typeName:H.ZodEnum,...G(e)})}var Tt=class extends Q{_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return(0,T.addIssueToContext)(r,{expected:q.util.joinValues(n),received:r.parsedType,code:D.ZodIssueCode.invalid_type}),T.INVALID}if(this._def.values.indexOf(e.data)===-1){let r=this._getOrReturnCtx(e),n=this._def.values;return(0,T.addIssueToContext)(r,{received:r.data,code:D.ZodIssueCode.invalid_enum_value,options:n}),T.INVALID}return(0,T.OK)(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e){return Tt.create(e)}exclude(e){return Tt.create(this.options.filter(r=>!e.includes(r)))}};O.ZodEnum=Tt;Tt.create=sf;var zr=class extends Q{_parse(e){let r=q.util.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==q.ZodParsedType.string&&n.parsedType!==q.ZodParsedType.number){let i=q.util.objectValues(r);return(0,T.addIssueToContext)(n,{expected:q.util.joinValues(i),received:n.parsedType,code:D.ZodIssueCode.invalid_type}),T.INVALID}if(r.indexOf(e.data)===-1){let i=q.util.objectValues(r);return(0,T.addIssueToContext)(n,{received:n.data,code:D.ZodIssueCode.invalid_enum_value,options:i}),T.INVALID}return(0,T.OK)(e.data)}get enum(){return this._def.values}};O.ZodNativeEnum=zr;zr.create=(t,e)=>new zr({values:t,typeName:H.ZodNativeEnum,...G(e)});var lr=class extends Q{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==q.ZodParsedType.promise&&r.common.async===!1)return(0,T.addIssueToContext)(r,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.promise,received:r.parsedType}),T.INVALID;let n=r.parsedType===q.ZodParsedType.promise?r.data:Promise.resolve(r.data);return(0,T.OK)(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};O.ZodPromise=lr;lr.create=(t,e)=>new lr({type:t,typeName:H.ZodPromise,...G(e)});var tt=class extends Q{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===H.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:s=>{(0,T.addIssueToContext)(n,s),s.fatal?r.abort():r.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){let s=i.transform(n.data,a);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(s).then(o=>this._def.schema._parseAsync({data:o,path:n.path,parent:n})):this._def.schema._parseSync({data:s,path:n.path,parent:n})}if(i.type==="refinement"){let s=o=>{let u=i.refinement(o,a);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(n.common.async===!1){let o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?T.INVALID:(o.status==="dirty"&&r.dirty(),s(o.value),{status:r.value,value:o.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>o.status==="aborted"?T.INVALID:(o.status==="dirty"&&r.dirty(),s(o.value).then(()=>({status:r.value,value:o.value}))))}if(i.type==="transform")if(n.common.async===!1){let s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!(0,T.isValid)(s))return s;let o=i.transform(s.value,a);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:o}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(s=>(0,T.isValid)(s)?Promise.resolve(i.transform(s.value,a)).then(o=>({status:r.value,value:o})):s);q.util.assertNever(i)}};O.ZodEffects=tt;O.ZodTransformer=tt;tt.create=(t,e,r)=>new tt({schema:t,typeName:H.ZodEffects,effect:e,...G(r)});tt.createWithPreprocess=(t,e,r)=>new tt({schema:e,effect:{type:"preprocess",transform:t},typeName:H.ZodEffects,...G(r)});var yt=class extends Q{_parse(e){return this._getType(e)===q.ZodParsedType.undefined?(0,T.OK)(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};O.ZodOptional=yt;yt.create=(t,e)=>new yt({innerType:t,typeName:H.ZodOptional,...G(e)});var Vt=class extends Q{_parse(e){return this._getType(e)===q.ZodParsedType.null?(0,T.OK)(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};O.ZodNullable=Vt;Vt.create=(t,e)=>new Vt({innerType:t,typeName:H.ZodNullable,...G(e)});var Br=class extends Q{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===q.ZodParsedType.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};O.ZodDefault=Br;Br.create=(t,e)=>new Br({innerType:t,typeName:H.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...G(e)});var Nn=class extends Q{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return(0,T.isAsync)(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new D.ZodError(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new D.ZodError(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};O.ZodCatch=Nn;Nn.create=(t,e)=>new Nn({innerType:t,typeName:H.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...G(e)});var Mn=class extends Q{_parse(e){if(this._getType(e)!==q.ZodParsedType.nan){let n=this._getOrReturnCtx(e);return(0,T.addIssueToContext)(n,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.nan,received:n.parsedType}),T.INVALID}return{status:"valid",value:e.data}}};O.ZodNaN=Mn;Mn.create=t=>new Mn({typeName:H.ZodNaN,...G(t)});O.BRAND=Symbol("zod_brand");var ss=class extends Q{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}};O.ZodBranded=ss;var Kr=class extends Q{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?T.INVALID:a.status==="dirty"?(r.dirty(),(0,T.DIRTY)(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?T.INVALID:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new Kr({in:e,out:r,typeName:H.ZodPipeline})}};O.ZodPipeline=Kr;var Ln=class extends Q{_parse(e){let r=this._def.innerType._parse(e);return(0,T.isValid)(r)&&(r.value=Object.freeze(r.value)),r}};O.ZodReadonly=Ln;Ln.create=(t,e)=>new Ln({innerType:t,typeName:H.ZodReadonly,...G(e)});var P_=(t,e={},r)=>t?ur.create().superRefine((n,i)=>{var a,s;if(!t(n)){let o=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,u=(s=(a=o.fatal)!==null&&a!==void 0?a:r)!==null&&s!==void 0?s:!0,l=typeof o=="string"?{message:o}:o;i.addIssue({code:"custom",...l,fatal:u})}}):ur.create();O.custom=P_;O.late={object:pe.lazycreate};var H;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(H=O.ZodFirstPartyTypeKind||(O.ZodFirstPartyTypeKind={}));var E_=(t,e={message:`Input not instance of ${t.name}`})=>(0,O.custom)(r=>r instanceof t,e);O.instanceof=E_;var of=Xe.create;O.string=of;var uf=Pt.create;O.number=uf;var T_=Mn.create;O.nan=T_;var I_=Et.create;O.bigint=I_;var lf=Nr.create;O.boolean=lf;var C_=Ft.create;O.date=C_;var S_=Sn.create;O.symbol=S_;var j_=Mr.create;O.undefined=j_;var k_=Lr.create;O.null=k_;var R_=ur.create;O.any=R_;var N_=qt.create;O.unknown=N_;var M_=gt.create;O.never=M_;var L_=jn.create;O.void=L_;var D_=et.create;O.array=D_;var q_=pe.create;O.object=q_;var F_=pe.strictCreate;O.strictObject=F_;var U_=Dr.create;O.union=U_;var V_=kn.create;O.discriminatedUnion=V_;var z_=qr.create;O.intersection=z_;var B_=ot.create;O.tuple=B_;var K_=Fr.create;O.record=K_;var $_=Rn.create;O.map=$_;var Z_=Ut.create;O.set=Z_;var H_=or.create;O.function=H_;var J_=Ur.create;O.lazy=J_;var Y_=Vr.create;O.literal=Y_;var W_=Tt.create;O.enum=W_;var G_=zr.create;O.nativeEnum=G_;var Q_=lr.create;O.promise=Q_;var cf=tt.create;O.effect=cf;O.transformer=cf;var X_=yt.create;O.optional=X_;var ev=Vt.create;O.nullable=ev;var tv=tt.createWithPreprocess;O.preprocess=tv;var rv=Kr.create;O.pipeline=rv;var nv=()=>of().optional();O.ostring=nv;var iv=()=>uf().optional();O.onumber=iv;var av=()=>lf().optional();O.oboolean=av;O.coerce={string:t=>Xe.create({...t,coerce:!0}),number:t=>Pt.create({...t,coerce:!0}),boolean:t=>Nr.create({...t,coerce:!0}),bigint:t=>Et.create({...t,coerce:!0}),date:t=>Ft.create({...t,coerce:!0})};O.NEVER=T.INVALID});var pl=N(ut=>{"use strict";var sv=ut&&ut.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Dn=ut&&ut.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&sv(e,t,r)};Object.defineProperty(ut,"__esModule",{value:!0});Dn(ns(),ut);Dn(cl(),ut);Dn(rf(),ut);Dn(Si(),ut);Dn(df(),ut);Dn(rs(),ut)});var os=N(Je=>{"use strict";var pf=Je&&Je.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ov=Je&&Je.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),uv=Je&&Je.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&pf(e,t,r);return ov(e,t),e},lv=Je&&Je.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&pf(e,t,r)};Object.defineProperty(Je,"__esModule",{value:!0});Je.z=void 0;var hf=uv(pl());Je.z=hf;lv(pl(),Je);Je.default=hf});var ff=N(us=>{"use strict";Object.defineProperty(us,"__esModule",{value:!0});us.parseAnyDef=void 0;function cv(){return{}}us.parseAnyDef=cv});var $r=N(qn=>{"use strict";Object.defineProperty(qn,"__esModule",{value:!0});qn.setResponseValueAndErrors=qn.addErrorMessage=void 0;function mf(t,e,r,n){n?.errorMessages&&r&&(t.errorMessage=Object.assign(Object.assign({},t.errorMessage),{[e]:r}))}qn.addErrorMessage=mf;function dv(t,e,r,n,i){t[e]=r,mf(t,e,n,i)}qn.setResponseValueAndErrors=dv});var yf=N(cs=>{"use strict";Object.defineProperty(cs,"__esModule",{value:!0});cs.parseArrayDef=void 0;var pv=os(),ls=$r(),hv=Ce();function fv(t,e){var r,n;let i={type:"array"};return((n=(r=t.type)===null||r===void 0?void 0:r._def)===null||n===void 0?void 0:n.typeName)!==pv.ZodFirstPartyTypeKind.ZodAny&&(i.items=(0,hv.parseDef)(t.type._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"items"]}))),t.minLength&&(0,ls.setResponseValueAndErrors)(i,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&(0,ls.setResponseValueAndErrors)(i,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&((0,ls.setResponseValueAndErrors)(i,"minItems",t.exactLength.value,t.exactLength.message,e),(0,ls.setResponseValueAndErrors)(i,"maxItems",t.exactLength.value,t.exactLength.message,e)),i}cs.parseArrayDef=fv});var gf=N(ds=>{"use strict";Object.defineProperty(ds,"__esModule",{value:!0});ds.parseBigintDef=void 0;var Zr=$r();function mv(t,e){let r={type:"integer",format:"int64"};if(!t.checks)return r;for(let n of t.checks)switch(n.kind){case"min":e.target==="jsonSchema7"?n.inclusive?(0,Zr.setResponseValueAndErrors)(r,"minimum",n.value,n.message,e):(0,Zr.setResponseValueAndErrors)(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),(0,Zr.setResponseValueAndErrors)(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?(0,Zr.setResponseValueAndErrors)(r,"maximum",n.value,n.message,e):(0,Zr.setResponseValueAndErrors)(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),(0,Zr.setResponseValueAndErrors)(r,"maximum",n.value,n.message,e));break;case"multipleOf":(0,Zr.setResponseValueAndErrors)(r,"multipleOf",n.value,n.message,e);break}return r}ds.parseBigintDef=mv});var bf=N(ps=>{"use strict";Object.defineProperty(ps,"__esModule",{value:!0});ps.parseBooleanDef=void 0;function yv(){return{type:"boolean"}}ps.parseBooleanDef=yv});var wf=N(hs=>{"use strict";Object.defineProperty(hs,"__esModule",{value:!0});hs.parseBrandedDef=void 0;var gv=Ce();function bv(t,e){return(0,gv.parseDef)(t.type._def,e)}hs.parseBrandedDef=bv});var _f=N(fs=>{"use strict";Object.defineProperty(fs,"__esModule",{value:!0});fs.parseCatchDef=void 0;var wv=Ce(),_v=(t,e)=>(0,wv.parseDef)(t.innerType._def,e);fs.parseCatchDef=_v});var xf=N(ms=>{"use strict";Object.defineProperty(ms,"__esModule",{value:!0});ms.parseDateDef=void 0;var vf=$r();function vv(t,e){return e.dateStrategy=="integer"?xv(t,e):{type:"string",format:"date-time"}}ms.parseDateDef=vv;var xv=(t,e)=>{let r={type:"integer",format:"unix-time"};for(let n of t.checks)switch(n.kind){case"min":e.target==="jsonSchema7"&&(0,vf.setResponseValueAndErrors)(r,"minimum",n.value,n.message,e);break;case"max":e.target==="jsonSchema7"&&(0,vf.setResponseValueAndErrors)(r,"maximum",n.value,n.message,e);break}return r}});var Of=N(ys=>{"use strict";Object.defineProperty(ys,"__esModule",{value:!0});ys.parseDefaultDef=void 0;var Ov=Ce();function Av(t,e){return Object.assign(Object.assign({},(0,Ov.parseDef)(t.innerType._def,e)),{default:t.defaultValue()})}ys.parseDefaultDef=Av});var Af=N(gs=>{"use strict";Object.defineProperty(gs,"__esModule",{value:!0});gs.parseEffectsDef=void 0;var Pv=Ce();function Ev(t,e){return e.effectStrategy==="input"?(0,Pv.parseDef)(t.schema._def,e):{}}gs.parseEffectsDef=Ev});var Pf=N(bs=>{"use strict";Object.defineProperty(bs,"__esModule",{value:!0});bs.parseEnumDef=void 0;function Tv(t){return{type:"string",enum:t.values}}bs.parseEnumDef=Tv});var Tf=N(Fn=>{"use strict";var Iv=Fn&&Fn.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.parseIntersectionDef=void 0;var Ef=Ce(),Cv=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function Sv(t,e){let r=[(0,Ef.parseDef)(t.left._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"allOf","0"]})),(0,Ef.parseDef)(t.right._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"allOf","1"]}))].filter(a=>!!a),n=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,i=[];return r.forEach(a=>{if(Cv(a))i.push(...a.allOf),a.unevaluatedProperties===void 0&&(n=void 0);else{let s=a;if("additionalProperties"in a&&a.additionalProperties===!1){let{additionalProperties:o}=a;s=Iv(a,["additionalProperties"])}else n=void 0;i.push(s)}}),i.length?Object.assign({allOf:i},n):void 0}Fn.parseIntersectionDef=Sv});var If=N(ws=>{"use strict";Object.defineProperty(ws,"__esModule",{value:!0});ws.parseLiteralDef=void 0;function jv(t,e){let r=typeof t.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[t.value]}:{type:r==="bigint"?"integer":r,const:t.value}}ws.parseLiteralDef=jv});var Sf=N(_s=>{"use strict";Object.defineProperty(_s,"__esModule",{value:!0});_s.parseMapDef=void 0;var Cf=Ce();function kv(t,e){let r=(0,Cf.parseDef)(t.keyType._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"items","items","0"]}))||{},n=(0,Cf.parseDef)(t.valueType._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"items","items","1"]}))||{};return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}_s.parseMapDef=kv});var jf=N(vs=>{"use strict";Object.defineProperty(vs,"__esModule",{value:!0});vs.parseNativeEnumDef=void 0;function Rv(t){let e=t.values,n=Object.keys(t.values).filter(a=>typeof e[e[a]]!="number").map(a=>e[a]),i=Array.from(new Set(n.map(a=>typeof a)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:n}}vs.parseNativeEnumDef=Rv});var kf=N(xs=>{"use strict";Object.defineProperty(xs,"__esModule",{value:!0});xs.parseNeverDef=void 0;function Nv(){return{not:{}}}xs.parseNeverDef=Nv});var Rf=N(Os=>{"use strict";Object.defineProperty(Os,"__esModule",{value:!0});Os.parseNullDef=void 0;function Mv(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}Os.parseNullDef=Mv});var hl=N(cr=>{"use strict";Object.defineProperty(cr,"__esModule",{value:!0});cr.parseUnionDef=cr.primitiveMappings=void 0;var Lv=Ce();cr.primitiveMappings={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Dv(t,e){if(e.target==="openApi3")return Nf(t,e);let r=t.options instanceof Map?Array.from(t.options.values()):t.options;if(r.every(n=>n._def.typeName in cr.primitiveMappings&&(!n._def.checks||!n._def.checks.length))){let n=r.reduce((i,a)=>{let s=cr.primitiveMappings[a._def.typeName];return s&&!i.includes(s)?[...i,s]:i},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){let n=r.reduce((i,a)=>{let s=typeof a._def.value;switch(s){case"string":case"number":case"boolean":return[...i,s];case"bigint":return[...i,"integer"];case"object":if(a._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(n.length===r.length){let i=n.filter((a,s,o)=>o.indexOf(a)===s);return{type:i.length>1?i:i[0],enum:r.reduce((a,s)=>a.includes(s._def.value)?a:[...a,s._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,i)=>[...n,...i._def.values.filter(a=>!n.includes(a))],[])};return Nf(t,e)}cr.parseUnionDef=Dv;var Nf=(t,e)=>{let r=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((n,i)=>(0,Lv.parseDef)(n._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"anyOf",`${i}`]}))).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0}});var Df=N(As=>{"use strict";Object.defineProperty(As,"__esModule",{value:!0});As.parseNullableDef=void 0;var Mf=Ce(),Lf=hl();function qv(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:Lf.primitiveMappings[t.innerType._def.typeName],nullable:!0}:{type:[Lf.primitiveMappings[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){let n=(0,Mf.parseDef)(t.innerType._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath]}));return n&&Object.assign(Object.assign({},n),{nullable:!0})}let r=(0,Mf.parseDef)(t.innerType._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"anyOf","0"]}));return r&&{anyOf:[r,{type:"null"}]}}As.parseNullableDef=qv});var qf=N(Ps=>{"use strict";Object.defineProperty(Ps,"__esModule",{value:!0});Ps.parseNumberDef=void 0;var dr=$r();function Fv(t,e){let r={type:"number"};if(!t.checks)return r;for(let n of t.checks)switch(n.kind){case"int":r.type="integer",(0,dr.addErrorMessage)(r,"type",n.message,e);break;case"min":e.target==="jsonSchema7"?n.inclusive?(0,dr.setResponseValueAndErrors)(r,"minimum",n.value,n.message,e):(0,dr.setResponseValueAndErrors)(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),(0,dr.setResponseValueAndErrors)(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?(0,dr.setResponseValueAndErrors)(r,"maximum",n.value,n.message,e):(0,dr.setResponseValueAndErrors)(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),(0,dr.setResponseValueAndErrors)(r,"maximum",n.value,n.message,e));break;case"multipleOf":(0,dr.setResponseValueAndErrors)(r,"multipleOf",n.value,n.message,e);break}return r}Ps.parseNumberDef=Fv});var Ff=N(Vn=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});Vn.parseObjectDef=Vn.parseObjectDefX=void 0;var Un=Ce();function Uv(t,e){var r,n;Object.keys(t.shape()).reduce((a,s)=>{let o=t.shape()[s],u=o.isOptional();u||(o=Object.assign({},o._def.innerSchema));let l=(0,Un.parseDef)(o._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"properties",s],propertyPath:[...e.currentPath,"properties",s]}));return l!==void 0&&(a.properties[s]=l,u||(a.required||(a.required=[]),a.required.push(s))),a},{type:"object",properties:{},additionalProperties:t.catchall._def.typeName==="ZodNever"?t.unknownKeys==="passthrough":(r=(0,Un.parseDef)(t.catchall._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"additionalProperties"]})))!==null&&r!==void 0?r:!0});let i=Object.assign(Object.assign({type:"object"},Object.entries(t.shape()).reduce((a,[s,o])=>{if(o===void 0||o._def===void 0)return a;let u=(0,Un.parseDef)(o._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"properties",s],propertyPath:[...e.currentPath,"properties",s]}));return u===void 0?a:{properties:Object.assign(Object.assign({},a.properties),{[s]:u}),required:o.isOptional()?a.required:[...a.required,s]}},{properties:{},required:[]})),{additionalProperties:t.catchall._def.typeName==="ZodNever"?t.unknownKeys==="passthrough":(n=(0,Un.parseDef)(t.catchall._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"additionalProperties"]})))!==null&&n!==void 0?n:!0});return i.required.length||delete i.required,i}Vn.parseObjectDefX=Uv;function Vv(t,e){var r;let n=Object.assign(Object.assign({type:"object"},Object.entries(t.shape()).reduce((i,[a,s])=>{if(s===void 0||s._def===void 0)return i;let o=(0,Un.parseDef)(s._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"properties",a],propertyPath:[...e.currentPath,"properties",a]}));return o===void 0?i:{properties:Object.assign(Object.assign({},i.properties),{[a]:o}),required:s.isOptional()?i.required:[...i.required,a]}},{properties:{},required:[]})),{additionalProperties:t.catchall._def.typeName==="ZodNever"?t.unknownKeys==="passthrough":(r=(0,Un.parseDef)(t.catchall._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"additionalProperties"]})))!==null&&r!==void 0?r:!0});return n.required.length||delete n.required,n}Vn.parseObjectDef=Vv});var Vf=N(Es=>{"use strict";Object.defineProperty(Es,"__esModule",{value:!0});Es.parseOptionalDef=void 0;var Uf=Ce(),zv=(t,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)===null||r===void 0?void 0:r.toString()))return(0,Uf.parseDef)(t.innerType._def,e);let n=(0,Uf.parseDef)(t.innerType._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"anyOf","1"]}));return n?{anyOf:[{not:{}},n]}:{}};Es.parseOptionalDef=zv});var zf=N(Ts=>{"use strict";Object.defineProperty(Ts,"__esModule",{value:!0});Ts.parsePipelineDef=void 0;var fl=Ce(),Bv=(t,e)=>{if(e.pipeStrategy==="input")return(0,fl.parseDef)(t.in._def,e);let r=(0,fl.parseDef)(t.in._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"allOf","0"]})),n=(0,fl.parseDef)(t.out._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"allOf",r?"1":"0"]}));return{allOf:[r,n].filter(i=>i!==void 0)}};Ts.parsePipelineDef=Bv});var Bf=N(Is=>{"use strict";Object.defineProperty(Is,"__esModule",{value:!0});Is.parsePromiseDef=void 0;var Kv=Ce();function $v(t,e){return(0,Kv.parseDef)(t.type._def,e)}Is.parsePromiseDef=$v});var yl=N(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.parseStringDef=Oe.emojiPattern=Oe.ulidPattern=Oe.cuid2Pattern=Oe.cuidPattern=Oe.emailPattern=void 0;var zn=$r();Oe.emailPattern='^(([^<>()[\\]\\\\.,;:\\s@\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\"]+)*)|(\\".+\\"))@((\\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\])|(\\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\\.[A-Za-z]{2,})+))$';Oe.cuidPattern="^c[^\\s-]{8,}$";Oe.cuid2Pattern="^[a-z][a-z0-9]*$";Oe.ulidPattern="/[0-9A-HJKMNP-TV-Z]{26}/";Oe.emojiPattern="/^(p{Extended_Pictographic}|p{Emoji_Component})+$/u";function Zv(t,e){let r={type:"string"};if(t.checks)for(let n of t.checks)switch(n.kind){case"min":(0,zn.setResponseValueAndErrors)(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,e);break;case"max":(0,zn.setResponseValueAndErrors)(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,e);break;case"email":switch(e.emailStrategy){case"format:email":Hr(r,"email",n.message,e);break;case"format:idn-email":Hr(r,"idn-email",n.message,e);break;case"pattern:zod":zt(r,Oe.emailPattern,n.message,e);break}break;case"url":Hr(r,"uri",n.message,e);break;case"uuid":Hr(r,"uuid",n.message,e);break;case"regex":zt(r,n.regex.source,n.message,e);break;case"cuid":zt(r,Oe.cuidPattern,n.message,e);break;case"cuid2":zt(r,Oe.cuid2Pattern,n.message,e);break;case"startsWith":zt(r,"^"+ml(n.value),n.message,e);break;case"endsWith":zt(r,ml(n.value)+"$",n.message,e);break;case"datetime":Hr(r,"date-time",n.message,e);break;case"length":(0,zn.setResponseValueAndErrors)(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,e),(0,zn.setResponseValueAndErrors)(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,e);break;case"includes":{zt(r,ml(n.value),n.message,e);break}case"ip":{n.version!=="v6"&&Hr(r,"ipv4",n.message,e),n.version!=="v4"&&Hr(r,"ipv6",n.message,e);break}case"emoji":zt(r,Oe.emojiPattern,n.message,e);break;case"ulid":{zt(r,Oe.ulidPattern,n.message,e);break}case"toLowerCase":case"toUpperCase":case"trim":break;default:(i=>{})(n)}return r}Oe.parseStringDef=Zv;var ml=t=>Array.from(t).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),Hr=(t,e,r,n)=>{var i;t.format||!((i=t.anyOf)===null||i===void 0)&&i.some(a=>a.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push(Object.assign({format:t.format},t.errorMessage&&n.errorMessages&&{errorMessage:{format:t.errorMessage.format}})),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push(Object.assign({format:e},r&&n.errorMessages&&{errorMessage:{format:r}}))):(0,zn.setResponseValueAndErrors)(t,"format",e,r,n)},zt=(t,e,r,n)=>{var i;t.pattern||!((i=t.allOf)===null||i===void 0)&&i.some(a=>a.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push(Object.assign({pattern:t.pattern},t.errorMessage&&n.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}})),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push(Object.assign({pattern:e},r&&n.errorMessages&&{errorMessage:{pattern:r}}))):(0,zn.setResponseValueAndErrors)(t,"pattern",e,r,n)}});var $f=N(Cs=>{"use strict";Object.defineProperty(Cs,"__esModule",{value:!0});Cs.parseRecordDef=void 0;var gl=os(),Kf=Ce(),Hv=yl();function Jv(t,e){var r,n,i,a,s;if(e.target==="openApi3"&&((r=t.keyType)===null||r===void 0?void 0:r._def.typeName)===gl.ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((u,l)=>{var c;return Object.assign(Object.assign({},u),{[l]:(c=(0,Kf.parseDef)(t.valueType._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"properties",l]})))!==null&&c!==void 0?c:{}})},{}),additionalProperties:!1};let o={type:"object",additionalProperties:(n=(0,Kf.parseDef)(t.valueType._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"additionalProperties"]})))!==null&&n!==void 0?n:{}};if(e.target==="openApi3")return o;if(((i=t.keyType)===null||i===void 0?void 0:i._def.typeName)===gl.ZodFirstPartyTypeKind.ZodString&&(!((a=t.keyType._def.checks)===null||a===void 0)&&a.length)){let u=Object.entries((0,Hv.parseStringDef)(t.keyType._def,e)).reduce((l,[c,d])=>c==="type"?l:Object.assign(Object.assign({},l),{[c]:d}),{});return Object.assign(Object.assign({},o),{propertyNames:u})}else if(((s=t.keyType)===null||s===void 0?void 0:s._def.typeName)===gl.ZodFirstPartyTypeKind.ZodEnum)return Object.assign(Object.assign({},o),{propertyNames:{enum:t.keyType._def.values}});return o}Cs.parseRecordDef=Jv});var Hf=N(Ss=>{"use strict";Object.defineProperty(Ss,"__esModule",{value:!0});Ss.parseSetDef=void 0;var Zf=$r(),Yv=Ce();function Wv(t,e){let n={type:"array",uniqueItems:!0,items:(0,Yv.parseDef)(t.valueType._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"items"]}))};return t.minSize&&(0,Zf.setResponseValueAndErrors)(n,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&(0,Zf.setResponseValueAndErrors)(n,"maxItems",t.maxSize.value,t.maxSize.message,e),n}Ss.parseSetDef=Wv});var Jf=N(js=>{"use strict";Object.defineProperty(js,"__esModule",{value:!0});js.parseTupleDef=void 0;var bl=Ce();function Gv(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((r,n)=>(0,bl.parseDef)(r._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"items",`${n}`]}))).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:(0,bl.parseDef)(t.rest._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"additionalItems"]}))}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((r,n)=>(0,bl.parseDef)(r._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"items",`${n}`]}))).reduce((r,n)=>n===void 0?r:[...r,n],[])}}js.parseTupleDef=Gv});var Yf=N(ks=>{"use strict";Object.defineProperty(ks,"__esModule",{value:!0});ks.parseUndefinedDef=void 0;function Qv(){return{not:{}}}ks.parseUndefinedDef=Qv});var Wf=N(Rs=>{"use strict";Object.defineProperty(Rs,"__esModule",{value:!0});Rs.parseUnknownDef=void 0;function Xv(){return{}}Rs.parseUnknownDef=Xv});var Ce=N(Ns=>{"use strict";Object.defineProperty(Ns,"__esModule",{value:!0});Ns.parseDef=void 0;var ne=os(),e0=ff(),t0=yf(),r0=gf(),n0=bf(),i0=wf(),a0=_f(),s0=xf(),o0=Of(),u0=Af(),l0=Pf(),c0=Tf(),d0=If(),p0=Sf(),h0=jf(),f0=kf(),m0=Rf(),y0=Df(),g0=qf(),b0=Ff(),w0=Vf(),_0=zf(),v0=Bf(),x0=$f(),O0=Hf(),A0=yl(),P0=Jf(),E0=Yf(),T0=hl(),I0=Wf();function Gf(t,e,r=!1){let n=e.seen.get(t);if(n&&!r){let s=C0(n,e);if(s!==void 0)return s}let i={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,i);let a=j0(t,t.typeName,e);return a&&k0(t,e,a),i.jsonSchema=a,a}Ns.parseDef=Gf;var C0=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.length===0?"":t.path.length===1?`${t.path[0]}/`:t.path.join("/")};case"relative":return{$ref:S0(e.currentPath,t.path)};case"none":return t.path.length<e.currentPath.length&&t.path.every((r,n)=>e.currentPath[n]===r)?{}:void 0;case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,n)=>e.currentPath[n]===r)?{}:t.jsonSchema}},S0=(t,e)=>{let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];r++);return[(t.length-r).toString(),...e.slice(r)].join("/")},j0=(t,e,r)=>{switch(e){case ne.ZodFirstPartyTypeKind.ZodString:return(0,A0.parseStringDef)(t,r);case ne.ZodFirstPartyTypeKind.ZodNumber:return(0,g0.parseNumberDef)(t,r);case ne.ZodFirstPartyTypeKind.ZodObject:return(0,b0.parseObjectDef)(t,r);case ne.ZodFirstPartyTypeKind.ZodBigInt:return(0,r0.parseBigintDef)(t,r);case ne.ZodFirstPartyTypeKind.ZodBoolean:return(0,n0.parseBooleanDef)();case ne.ZodFirstPartyTypeKind.ZodDate:return(0,s0.parseDateDef)(t,r);case ne.ZodFirstPartyTypeKind.ZodUndefined:return(0,E0.parseUndefinedDef)();case ne.ZodFirstPartyTypeKind.ZodNull:return(0,m0.parseNullDef)(r);case ne.ZodFirstPartyTypeKind.ZodArray:return(0,t0.parseArrayDef)(t,r);case ne.ZodFirstPartyTypeKind.ZodUnion:case ne.ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return(0,T0.parseUnionDef)(t,r);case ne.ZodFirstPartyTypeKind.ZodIntersection:return(0,c0.parseIntersectionDef)(t,r);case ne.ZodFirstPartyTypeKind.ZodTuple:return(0,P0.parseTupleDef)(t,r);case ne.ZodFirstPartyTypeKind.ZodRecord:return(0,x0.parseRecordDef)(t,r);case ne.ZodFirstPartyTypeKind.ZodLiteral:return(0,d0.parseLiteralDef)(t,r);case ne.ZodFirstPartyTypeKind.ZodEnum:return(0,l0.parseEnumDef)(t);case ne.ZodFirstPartyTypeKind.ZodNativeEnum:return(0,h0.parseNativeEnumDef)(t);case ne.ZodFirstPartyTypeKind.ZodNullable:return(0,y0.parseNullableDef)(t,r);case ne.ZodFirstPartyTypeKind.ZodOptional:return(0,w0.parseOptionalDef)(t,r);case ne.ZodFirstPartyTypeKind.ZodMap:return(0,p0.parseMapDef)(t,r);case ne.ZodFirstPartyTypeKind.ZodSet:return(0,O0.parseSetDef)(t,r);case ne.ZodFirstPartyTypeKind.ZodLazy:return Gf(t.getter()._def,r);case ne.ZodFirstPartyTypeKind.ZodPromise:return(0,v0.parsePromiseDef)(t,r);case ne.ZodFirstPartyTypeKind.ZodNaN:case ne.ZodFirstPartyTypeKind.ZodNever:return(0,f0.parseNeverDef)();case ne.ZodFirstPartyTypeKind.ZodEffects:return(0,u0.parseEffectsDef)(t,r);case ne.ZodFirstPartyTypeKind.ZodAny:return(0,e0.parseAnyDef)();case ne.ZodFirstPartyTypeKind.ZodUnknown:return(0,I0.parseUnknownDef)();case ne.ZodFirstPartyTypeKind.ZodDefault:return(0,o0.parseDefaultDef)(t,r);case ne.ZodFirstPartyTypeKind.ZodBranded:return(0,i0.parseBrandedDef)(t,r);case ne.ZodFirstPartyTypeKind.ZodCatch:return(0,a0.parseCatchDef)(t,r);case ne.ZodFirstPartyTypeKind.ZodPipeline:return(0,_0.parsePipelineDef)(t,r);case ne.ZodFirstPartyTypeKind.ZodFunction:case ne.ZodFirstPartyTypeKind.ZodVoid:case ne.ZodFirstPartyTypeKind.ZodSymbol:return;default:return(n=>{})(e)}},k0=(t,e,r)=>(t.description&&(r.description=t.description,e.markdownDescription&&(r.markdownDescription=t.description)),r)});var Qf=N(pr=>{"use strict";Object.defineProperty(pr,"__esModule",{value:!0});pr.getDefaultOptions=pr.defaultOptions=void 0;pr.defaultOptions={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"string",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,emailStrategy:"format:email"};var R0=t=>typeof t=="string"?Object.assign(Object.assign({},pr.defaultOptions),{name:t}):Object.assign(Object.assign({},pr.defaultOptions),t);pr.getDefaultOptions=R0});var Xf=N(Ms=>{"use strict";Object.defineProperty(Ms,"__esModule",{value:!0});Ms.getRefs=void 0;var N0=Qf(),M0=t=>{let e=(0,N0.getDefaultOptions)(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return Object.assign(Object.assign({},e),{currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,i])=>[i._def,{def:i._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))})};Ms.getRefs=M0});var tm=N(Ls=>{"use strict";Object.defineProperty(Ls,"__esModule",{value:!0});Ls.zodToJsonSchema=void 0;var em=Ce(),L0=Xf(),D0=(t,e)=>{var r;let n=(0,L0.getRefs)(e),i=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((u,[l,c])=>{var d;return Object.assign(Object.assign({},u),{[l]:(d=(0,em.parseDef)(c._def,Object.assign(Object.assign({},n),{currentPath:[...n.basePath,n.definitionPath,l]}),!0))!==null&&d!==void 0?d:{}})},{}):void 0,a=typeof e=="string"?e:e?.name,s=(r=(0,em.parseDef)(t._def,a===void 0?n:Object.assign(Object.assign({},n),{currentPath:[...n.basePath,n.definitionPath,a]}),!1))!==null&&r!==void 0?r:{},o=a===void 0?i?Object.assign(Object.assign({},s),{[n.definitionPath]:i}):s:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,a].join("/"),[n.definitionPath]:Object.assign(Object.assign({},i),{[a]:s})};return n.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":n.target==="jsonSchema2019-09"&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),o};Ls.zodToJsonSchema=D0});var Mi=N(Ni=>{"use strict";Object.defineProperty(Ni,"__esModule",{value:!0});Ni.zodToJsonSchema=void 0;var rm=tm();Object.defineProperty(Ni,"zodToJsonSchema",{enumerable:!0,get:function(){return rm.zodToJsonSchema}});Ni.default=rm.zodToJsonSchema});function im(t){return{name:t.name,description:t.description,parameters:(0,nm.zodToJsonSchema)(t.schema)}}var nm,am=R(()=>{nm=ge(Mi(),1)});function hr(t){let{azureOpenAIApiDeploymentName:e,azureOpenAIApiInstanceName:r,azureOpenAIApiKey:n,azureOpenAIBasePath:i,basePath:a}=t;if(n&&i&&e)return`${i}/${e}`;if(n){if(!r)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!e)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${r}.openai.azure.com/openai/deployments/${e}`}return a}var Li=R(()=>{});var sm={};dt(sm,{ChatOpenAI:()=>Di,PromptLayerChatOpenAI:()=>wl});function q0(t){return t.role!=="system"&&t.role!=="assistant"&&t.role!=="user"&&t.role,t.role}function Ds(t){let e=t._getType();switch(e){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"generic":{if(!fn.isInstance(t))throw new Error("Invalid generic chat message");return q0(t)}default:throw new Error(`Unknown message type: ${e}`)}}function F0(t){switch(t.role){case"user":return new ft(t.content||"");case"assistant":return new _t(t.content||"",{function_call:t.function_call});case"system":return new hn(t.content||"");default:return new fn(t.content||"",t.role??"unknown")}}function U0(t,e){let r=t.role??e,n=t.content??"",i;return t.function_call?i={function_call:t.function_call}:i={},r==="user"?new vr({content:n}):r==="assistant"?new xr({content:n,additional_kwargs:i}):r==="system"?new Or({content:n}):r==="function"?new Ar({content:n,additional_kwargs:i,name:t.name}):new Pr({content:n,role:r})}var qs,Di,wl,_l=R(()=>{qs=ge(an(),1);kt();pn();Wh();nt();wi();ts();am();Li();Oi();Di=class extends ir{get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","promptIndex"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",azureOpenAIApiKey:"AZURE_OPENAI_API_KEY"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",azureOpenAIApiVersion:"azure_openai_api_version",azureOpenAIApiKey:"azure_openai_api_key",azureOpenAIApiInstanceName:"azure_openai_api_instance_name",azureOpenAIApiDeploymentName:"azure_openai_api_deployment_name"}}constructor(e,r){if(super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.openAIApiKey=e?.openAIApiKey??Y("OPENAI_API_KEY"),this.azureOpenAIApiKey=e?.azureOpenAIApiKey??Y("AZURE_OPENAI_API_KEY"),!this.azureOpenAIApiKey&&!this.openAIApiKey)throw new Error("OpenAI or Azure OpenAI API key not found");if(this.azureOpenAIApiInstanceName=e?.azureOpenAIApiInstanceName??Y("AZURE_OPENAI_API_INSTANCE_NAME"),this.azureOpenAIApiDeploymentName=e?.azureOpenAIApiDeploymentName??Y("AZURE_OPENAI_API_DEPLOYMENT_NAME"),this.azureOpenAIApiVersion=e?.azureOpenAIApiVersion??Y("AZURE_OPENAI_API_VERSION"),this.azureOpenAIBasePath=e?.azureOpenAIBasePath??Y("AZURE_OPENAI_BASE_PATH"),this.modelName=e?.modelName??this.modelName,this.modelKwargs=e?.modelKwargs??{},this.timeout=e?.timeout,this.temperature=e?.temperature??this.temperature,this.topP=e?.topP??this.topP,this.frequencyPenalty=e?.frequencyPenalty??this.frequencyPenalty,this.presencePenalty=e?.presencePenalty??this.presencePenalty,this.maxTokens=e?.maxTokens,this.n=e?.n??this.n,this.logitBias=e?.logitBias,this.stop=e?.stop,this.streaming=e?.streaming??!1,this.azureOpenAIApiKey){if(!this.azureOpenAIApiInstanceName&&!this.azureOpenAIBasePath)throw new Error("Azure OpenAI API instance name not found");if(!this.azureOpenAIApiDeploymentName)throw new Error("Azure OpenAI API deployment name not found");if(!this.azureOpenAIApiVersion)throw new Error("Azure OpenAI API version not found")}this.clientConfig={apiKey:this.openAIApiKey,...r,...e?.configuration}}invocationParams(e){return{model:this.modelName,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,max_tokens:this.maxTokens===-1?void 0:this.maxTokens,n:this.n,logit_bias:this.logitBias,stop:e?.stop??this.stop,stream:this.streaming,functions:e?.functions??(e?.tools?e?.tools.map(im):void 0),function_call:e?.function_call,...this.modelKwargs}}_identifyingParams(){return{model_name:this.modelName,...this.invocationParams(),...this.clientConfig}}async*_streamResponseChunks(e,r,n){let i=e.map(u=>({role:Ds(u),content:u.content,name:u.name,function_call:u.additional_kwargs.function_call})),a={...this.invocationParams(r),messages:i,stream:!0},s="assistant",o=this.startStream(a,r);for await(let u of o){let c=JSON.parse(u).choices?.[0];if(!c)continue;let{delta:d}=c,y=U0(d,s);s=d.role??s;let w=new mn({message:y,text:y.content});yield w,n?.handleLLMNewToken(w.text??"")}}startStream(e,r){let n=!1,i=new TransformStream,a=i.writable.getWriter(),s=On(i.readable),o;return this.completionWithRetry(e,{...r,adapter:Me,responseType:"stream",onmessage:u=>{if(!n)if(u.data?.trim?.()==="[DONE]")n=!0,a.close();else{let l=JSON.parse(u.data);if(l.error)throw n=!0,l.error;a.write(u.data)}}}).catch(u=>{n||(o=u,n=!0,a.close())}),{async next(){let u=await s.next();if(o)throw o;return u},[Symbol.asyncIterator](){return this}}}identifyingParams(){return this._identifyingParams()}async _generate(e,r,n){let i={},a=this.invocationParams(r),s=e.map(y=>({role:Ds(y),content:y.content,name:y.name,function_call:y.additional_kwargs.function_call})),o=a.stream?await new Promise((y,w)=>{let h,_=!1,P=!1;this.completionWithRetry({...a,messages:s},{signal:r?.signal,...r?.options,adapter:Me,responseType:"stream",onmessage:S=>{if(S.data?.trim?.()==="[DONE]"){if(P||_)return;P=!0,y(h)}else{let I=JSON.parse(S.data);if(!I.id)return;if(I?.error){if(_)return;_=!0,w(I.error);return}let F=I;h||(h={id:F.id,object:F.object,created:F.created,model:F.model,choices:[]});for(let v of F.choices??[])if(v!=null){let j=h.choices.find(m=>m.index===v.index);j||(j={index:v.index,finish_reason:v.finish_reason??void 0},h.choices[v.index]=j),j.message||(j.message={role:v.delta?.role,content:""}),v.delta.function_call&&!j.message.function_call&&(j.message.function_call={name:"",arguments:""}),j.message.content+=v.delta?.content??"",j.message.function_call&&(j.message.function_call.name+=v.delta?.function_call?.name??"",j.message.function_call.arguments+=v.delta?.function_call?.arguments??""),n?.handleLLMNewToken(v.delta?.content??"",{prompt:r.promptIndex??0,completion:v.index})}!P&&!_&&F.choices?.every(v=>v.finish_reason!=null)&&(P=!0,y(h))}}}).catch(S=>{_||(_=!0,w(S))})}):await this.completionWithRetry({...a,messages:s},{signal:r?.signal,...r?.options}),{completion_tokens:u,prompt_tokens:l,total_tokens:c}=o.usage??{};u&&(i.completionTokens=(i.completionTokens??0)+u),l&&(i.promptTokens=(i.promptTokens??0)+l),c&&(i.totalTokens=(i.totalTokens??0)+c);let d=[];for(let y of o.choices){let w=y.message?.content??"";d.push({text:w,message:F0(y.message??{role:"assistant"})})}return{generations:d,llmOutput:{tokenUsage:i}}}async getNumTokensFromMessages(e){let r=0,n=0,i=0;wn(this.modelName)==="gpt-3.5-turbo"?(n=4,i=-1):wn(this.modelName).startsWith("gpt-4")&&(n=3,i=1);let a=await Promise.all(e.map(async s=>{let o=await this.getNumTokens(s.content),u=await this.getNumTokens(Ds(s)),l=s.name!==void 0?i+await this.getNumTokens(s.name):0,c=o+n+u+l;return r+=c,c}));return r+=3,{totalCount:r,countPerMessage:a}}async completionWithRetry(e,r){if(!this.client){let i={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,basePath:this.clientConfig.basePath},a=hr(i),s=new qs.Configuration({...this.clientConfig,basePath:a,baseOptions:{timeout:this.timeout,...this.clientConfig.baseOptions}});this.client=new qs.OpenAIApi(s)}let n={adapter:jt()?void 0:Me,...this.clientConfig.baseOptions,...r};return this.azureOpenAIApiKey&&(n.headers={"api-key":this.azureOpenAIApiKey,...n.headers},n.params={"api-version":this.azureOpenAIApiVersion,...n.params}),this.caller.call(this.client.createChatCompletion.bind(this.client),e,n).then(i=>i.data)}_llmType(){return"openai"}_combineLLMOutput(...e){return e.reduce((r,n)=>(n&&n.tokenUsage&&(r.tokenUsage.completionTokens+=n.tokenUsage.completionTokens??0,r.tokenUsage.promptTokens+=n.tokenUsage.promptTokens??0,r.tokenUsage.totalTokens+=n.tokenUsage.totalTokens??0),r),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}},wl=class extends Di{constructor(e){super(e),Object.defineProperty(this,"promptLayerApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"plTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnPromptLayerId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.promptLayerApiKey=e?.promptLayerApiKey??(typeof process<"u"?process.env?.PROMPTLAYER_API_KEY:void 0),this.plTags=e?.plTags??[],this.returnPromptLayerId=e?.returnPromptLayerId??!1}async _generate(e,r,n){let i=Date.now(),a;Array.isArray(r)?a={stop:r}:r?.timeout&&!r.signal?a={...r,signal:AbortSignal.timeout(r.timeout)}:a=r??{};let s=await super._generate(e,a,n),o=Date.now(),u=c=>{let d;if(c._getType()==="human")d={role:"user",content:c.content};else if(c._getType()==="ai")d={role:"assistant",content:c.content};else if(c._getType()==="function")d={role:"assistant",content:c.content};else if(c._getType()==="system")d={role:"system",content:c.content};else if(c._getType()==="generic")d={role:c.role,content:c.content};else throw new Error(`Got unknown type ${c}`);return d},l=(c,d)=>{let y={...this.invocationParams(),model:this.modelName};if(d?.stop&&Object.keys(y).includes("stop"))throw new Error("`stop` found in both the input and default params.");return c.map(h=>u(h))};for(let c=0;c<s.generations.length;c+=1){let d=s.generations[c],y=l(e,a),w,h=[{content:d.text,role:Ds(d.message)}],_=await In(this.caller,"langchain.PromptLayerChatOpenAI",y,this._identifyingParams(),this.plTags,h,i,o,this.promptLayerApiKey);this.returnPromptLayerId===!0&&(_.success===!0&&(w=_.request_id),(!d.generationInfo||typeof d.generationInfo!="object")&&(d.generationInfo={}),d.generationInfo.promptLayerRequestId=w)}return s}}});var V0,qi,ar,Ci=R(()=>{bi();wi();za();An();Ot();kr();wi();V0=()=>!1,qi=class extends Ie{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??V0(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}},ar=class extends qi{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:r,...n}){super({callbacks:e??r,...n}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.caller=new Mt(n??{})}async getNumTokens(e){let r=Math.ceil(e.length/4);if(!this._encoding)try{this._encoding=await Va("modelName"in this?wn(this.modelName):"gpt2")}catch{}return this._encoding&&(r=this._encoding.encode(e).length),r}static _convertInputToPromptValue(e){return typeof e=="string"?new Tn(e):Array.isArray(e)?new Ei(e):e}_identifyingParams(){return{}}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){let{_type:r,_model:n,...i}=e;if(n&&n!=="base_chat_model")throw new Error(`Cannot load LLM with model ${n}`);let a={openai:(await Promise.resolve().then(()=>(_l(),sm))).ChatOpenAI}[r];if(a===void 0)throw new Error(`Cannot load LLM with type ${r}`);return new a(i)}}});var Bt,Fs,vl=R(()=>{Qp();nt();Ci();xn();_n();Bt=class extends ar{constructor({cache:e,concurrency:r,...n}){super(r?{maxConcurrency:r,...n}:n),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","llms",this._llmType()]}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof e=="object"?this.cache=e:e?this.cache=bn.global():this.cache=void 0}async invoke(e,r){let n=Bt._convertInputToPromptValue(e);return(await this.generatePrompt([n],r,r?.callbacks)).generations[0][0].text}async*_streamResponseChunks(e,r,n){throw new Error("Not implemented.")}_separateRunnableConfigFromCallOptions(e){let[r,n]=super._separateRunnableConfigFromCallOptions(e);return n?.timeout&&!n.signal&&(n.signal=AbortSignal.timeout(n.timeout)),[r,n]}async*_streamIterator(e,r){if(this._streamResponseChunks===Bt.prototype._streamResponseChunks)yield this.invoke(e,r);else{let n=Bt._convertInputToPromptValue(e),[i,a]=this._separateRunnableConfigFromCallOptions(r),s=await ce.configure(i.callbacks,this.callbacks,i.tags,this.tags,i.metadata,this.metadata,{verbose:this.verbose}),o={options:a,invocation_params:this?.invocationParams(a)},u=await s?.handleLLMStart(this.toJSON(),[n.toString()],void 0,void 0,o),l=new ht({text:""});try{for await(let c of this._streamResponseChunks(e.toString(),a,u?.[0]))l?l=l.concat(c):l=c,yield c.text}catch(c){throw await Promise.all((u??[]).map(d=>d?.handleLLMError(c))),c}await Promise.all((u??[]).map(c=>c?.handleLLMEnd({generations:[[l]]})))}}async generatePrompt(e,r,n){let i=e.map(a=>a.toString());return this.generate(i,r,n)}invocationParams(e){return{}}_flattenLLMResult(e){let r=[];for(let n=0;n<e.generations.length;n+=1){let i=e.generations[n];if(n===0)r.push({generations:[i],llmOutput:e.llmOutput});else{let a=e.llmOutput?{...e.llmOutput,tokenUsage:{}}:void 0;r.push({generations:[i],llmOutput:a})}}return r}async _generateUncached(e,r,n){let i=await ce.configure(n.callbacks,this.callbacks,n.tags,this.tags,n.metadata,this.metadata,{verbose:this.verbose}),a={options:r,invocation_params:this?.invocationParams(r)},s=await i?.handleLLMStart(this.toJSON(),e,void 0,void 0,a),o;try{o=await this._generate(e,r,s?.[0])}catch(c){throw await Promise.all((s??[]).map(d=>d?.handleLLMError(c))),c}let u=this._flattenLLMResult(o);await Promise.all((s??[]).map((c,d)=>c?.handleLLMEnd(u[d])));let l=s?.map(c=>c.runId)||void 0;return Object.defineProperty(o,gn,{value:l?{runIds:l}:void 0,configurable:!0}),o}async generate(e,r,n){if(!Array.isArray(e))throw new Error("Argument 'prompts' is expected to be a string[]");let i;Array.isArray(r)?i={stop:r}:i=r;let[a,s]=this._separateRunnableConfigFromCallOptions(i);if(a.callbacks=a.callbacks??n,!this.cache)return this._generateUncached(e,s,a);let{cache:o}=this,u=this.serialize();u.stop=s.stop??u.stop;let l=`${Object.entries(u).sort()}`,c=[],d=await Promise.all(e.map(async(w,h)=>{let _=await o.lookup(w,l);return _||c.push(h),_})),y={};if(c.length>0){let w=await this._generateUncached(c.map(h=>e[h]),s,a);await Promise.all(w.generations.map(async(h,_)=>{let P=c[_];return d[P]=h,o.update(e[P],l,h)})),y=w.llmOutput??{}}return{generations:d,llmOutput:y}}async call(e,r,n){let{generations:i}=await this.generate([e],r,n);return i[0][0].text}async predict(e,r,n){return this.call(e,r,n)}async predictMessages(e,r,n){let i=Ir(e),a=await this.call(i,r,n);return new _t(a)}_identifyingParams(){return{}}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}_modelType(){return"base_llm"}static async deserialize(e){let{_type:r,_model:n,...i}=e;if(n&&n!=="base_llm")throw new Error(`Cannot load LLM with model ${n}`);let a={openai:(await Promise.resolve().then(()=>(xl(),om))).OpenAI}[r];if(a===void 0)throw new Error(`Cannot load  LLM with type ${r}`);return new a(i)}},Fs=class extends Bt{async _generate(e,r,n){return{generations:await Promise.all(e.map((a,s)=>this._call(a,{...r,promptIndex:s},n).then(o=>[{text:o}])))}}}});var Vs,Jr,Us,Ol=R(()=>{Vs=ge(an(),1);kt();pn();vl();nt();ts();Li();Oi();Jr=class extends Fs{get callKeys(){return[...super.callKeys,"options","promptIndex"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",azureOpenAIApiKey:"AZURE_OPENAI_API_KEY"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",azureOpenAIApiVersion:"azure_openai_api_version",azureOpenAIApiKey:"azure_openai_api_key",azureOpenAIApiInstanceName:"azure_openai_api_instance_name",azureOpenAIApiDeploymentName:"azure_openai_api_deployment_name"}}constructor(e,r){if(super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"prefixMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.openAIApiKey=e?.openAIApiKey??Y("OPENAI_API_KEY"),this.azureOpenAIApiKey=e?.azureOpenAIApiKey??Y("AZURE_OPENAI_API_KEY"),!this.azureOpenAIApiKey&&!this.openAIApiKey)throw new Error("OpenAI or Azure OpenAI API key not found");if(this.azureOpenAIApiInstanceName=e?.azureOpenAIApiInstanceName??Y("AZURE_OPENAI_API_INSTANCE_NAME"),this.azureOpenAIApiDeploymentName=(e?.azureOpenAIApiCompletionsDeploymentName||e?.azureOpenAIApiDeploymentName)??(Y("AZURE_OPENAI_API_COMPLETIONS_DEPLOYMENT_NAME")||Y("AZURE_OPENAI_API_DEPLOYMENT_NAME")),this.azureOpenAIApiVersion=e?.azureOpenAIApiVersion??Y("AZURE_OPENAI_API_VERSION"),this.azureOpenAIBasePath=e?.azureOpenAIBasePath??Y("AZURE_OPENAI_BASE_PATH"),this.modelName=e?.modelName??this.modelName,this.prefixMessages=e?.prefixMessages??this.prefixMessages,this.modelKwargs=e?.modelKwargs??{},this.timeout=e?.timeout,this.temperature=e?.temperature??this.temperature,this.topP=e?.topP??this.topP,this.frequencyPenalty=e?.frequencyPenalty??this.frequencyPenalty,this.presencePenalty=e?.presencePenalty??this.presencePenalty,this.n=e?.n??this.n,this.logitBias=e?.logitBias,this.maxTokens=e?.maxTokens,this.stop=e?.stop,this.streaming=e?.streaming??!1,this.n>1)throw new Error("Cannot use n > 1 in OpenAIChat LLM. Use ChatOpenAI Chat Model instead.");if(this.azureOpenAIApiKey){if(!this.azureOpenAIApiInstanceName&&!this.azureOpenAIBasePath)throw new Error("Azure OpenAI API instance name not found");if(!this.azureOpenAIApiDeploymentName)throw new Error("Azure OpenAI API deployment name not found");if(!this.azureOpenAIApiVersion)throw new Error("Azure OpenAI API version not found")}this.clientConfig={apiKey:this.openAIApiKey,...r,...e?.configuration}}invocationParams(e){return{model:this.modelName,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,n:this.n,logit_bias:this.logitBias,max_tokens:this.maxTokens===-1?void 0:this.maxTokens,stop:e?.stop??this.stop,stream:this.streaming,...this.modelKwargs}}_identifyingParams(){return{model_name:this.modelName,...this.invocationParams(),...this.clientConfig}}identifyingParams(){return{model_name:this.modelName,...this.invocationParams(),...this.clientConfig}}formatMessages(e){let r={role:"user",content:e};return this.prefixMessages?[...this.prefixMessages,r]:[r]}async*_streamResponseChunks(e,r,n){let i={...this.invocationParams(r),messages:this.formatMessages(e),stream:!0},a=this.startStream(i,r);for await(let s of a){let u=JSON.parse(s).choices?.[0];if(!u)continue;let{delta:l}=u,c=new ht({text:l.content??""});yield c,n?.handleLLMNewToken(c.text??"")}}startStream(e,r){let n=!1,i=new TransformStream,a=i.writable.getWriter(),s=On(i.readable),o;return this.completionWithRetry(e,{...r,adapter:Me,responseType:"stream",onmessage:u=>{if(!n)if(u.data?.trim?.()==="[DONE]")n=!0,a.close();else{let l=JSON.parse(u.data);if(l.error)throw n=!0,l.error;a.write(u.data)}}}).catch(u=>{n||(o=u,n=!0,a.close())}),{async next(){let u=await s.next();if(o)throw o;return u},[Symbol.asyncIterator](){return this}}}async _call(e,r,n){let i=this.invocationParams(r);return(i.stream?await new Promise((s,o)=>{let u,l=!1,c=!1;this.completionWithRetry({...i,messages:this.formatMessages(e)},{signal:r.signal,...r.options,adapter:Me,responseType:"stream",onmessage:d=>{if(d.data?.trim?.()==="[DONE]"){if(c||l)return;c=!0,s(u)}else{let y=JSON.parse(d.data);if(y?.error){if(l)return;l=!0,o(y.error);return}let w=y;u||(u={id:w.id,object:w.object,created:w.created,model:w.model,choices:[]});for(let h of w.choices)if(h!=null){let _=u.choices.find(P=>P.index===h.index);_||(_={index:h.index,finish_reason:h.finish_reason??void 0},u.choices.push(_)),_.message||(_.message={role:h.delta?.role,content:h.delta?.content??""}),_.message.content+=h.delta?.content??"",n?.handleLLMNewToken(h.delta?.content??"",{prompt:r.promptIndex??0,completion:h.index})}!c&&!l&&w.choices.every(h=>h.finish_reason!=null)&&(c=!0,s(u))}}}).catch(d=>{l||(l=!0,o(d))})}):await this.completionWithRetry({...i,messages:this.formatMessages(e)},{signal:r.signal,...r.options})).choices[0].message?.content??""}async completionWithRetry(e,r){if(!this.client){let i={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,basePath:this.clientConfig.basePath},a=hr(i),s=new Vs.Configuration({...this.clientConfig,basePath:a,baseOptions:{timeout:this.timeout,...this.clientConfig.baseOptions}});this.client=new Vs.OpenAIApi(s)}let n={adapter:jt()?void 0:Me,...this.clientConfig.baseOptions,...r};return this.azureOpenAIApiKey&&(n.headers={"api-key":this.azureOpenAIApiKey,...n.headers},n.params={"api-version":this.azureOpenAIApiVersion,...n.params}),this.caller.call(this.client.createChatCompletion.bind(this.client),e,n).then(i=>i.data)}_llmType(){return"openai"}},Us=class extends Jr{get lc_secrets(){return{promptLayerApiKey:"PROMPTLAYER_API_KEY"}}constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"promptLayerApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"plTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnPromptLayerId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.plTags=e?.plTags??[],this.returnPromptLayerId=e?.returnPromptLayerId??!1,this.promptLayerApiKey=e?.promptLayerApiKey??Y("PROMPTLAYER_API_KEY"),!this.promptLayerApiKey)throw new Error("Missing PromptLayer API key")}async completionWithRetry(e,r){return e.stream?super.completionWithRetry(e,r):await super.completionWithRetry(e)}async _generate(e,r,n){let i;return{generations:await Promise.all(e.map(async s=>{let o=Date.now(),u=await this._call(s,r,n),l=Date.now();i=[{text:u}];let c={text:u},d=await In(this.caller,"langchain.PromptLayerOpenAIChat",[s],this._identifyingParams(),this.plTags,c,o,l,this.promptLayerApiKey);return this.returnPromptLayerId===!0&&d.success===!0&&(i[0].generationInfo={promptLayerRequestId:d.request_id}),i}))}}}});var om={};dt(om,{OpenAI:()=>Bn,OpenAIChat:()=>Jr,PromptLayerOpenAI:()=>Al,PromptLayerOpenAIChat:()=>Us});var zs,Bn,Al,xl=R(()=>{zs=ge(an(),1);kt();pn();Au();vl();wi();Ol();nt();ts();Li();Oi();Ol();Bn=class extends Bt{get callKeys(){return[...super.callKeys,"options"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",azureOpenAIApiKey:"AZURE_OPENAI_API_KEY"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",azureOpenAIApiVersion:"azure_openai_api_version",azureOpenAIApiKey:"azure_openai_api_key",azureOpenAIApiInstanceName:"azure_openai_api_instance_name",azureOpenAIApiDeploymentName:"azure_openai_api_deployment_name"}}constructor(e,r){if(e?.modelName?.startsWith("gpt-3.5-turbo")||e?.modelName?.startsWith("gpt-4")||e?.modelName?.startsWith("gpt-4-32k"))return new Jr(e,r);if(super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:.7}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:256}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"bestOf",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"text-davinci-003"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchSize",{enumerable:!0,configurable:!0,writable:!0,value:20}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.openAIApiKey=e?.openAIApiKey??Y("OPENAI_API_KEY"),this.azureOpenAIApiKey=e?.azureOpenAIApiKey??Y("AZURE_OPENAI_API_KEY"),!this.azureOpenAIApiKey&&!this.openAIApiKey)throw new Error("OpenAI or Azure OpenAI API key not found");if(this.azureOpenAIApiInstanceName=e?.azureOpenAIApiInstanceName??Y("AZURE_OPENAI_API_INSTANCE_NAME"),this.azureOpenAIApiDeploymentName=(e?.azureOpenAIApiCompletionsDeploymentName||e?.azureOpenAIApiDeploymentName)??(Y("AZURE_OPENAI_API_COMPLETIONS_DEPLOYMENT_NAME")||Y("AZURE_OPENAI_API_DEPLOYMENT_NAME")),this.azureOpenAIApiVersion=e?.azureOpenAIApiVersion??Y("AZURE_OPENAI_API_VERSION"),this.azureOpenAIBasePath=e?.azureOpenAIBasePath??Y("AZURE_OPENAI_BASE_PATH"),this.modelName=e?.modelName??this.modelName,this.modelKwargs=e?.modelKwargs??{},this.batchSize=e?.batchSize??this.batchSize,this.timeout=e?.timeout,this.temperature=e?.temperature??this.temperature,this.maxTokens=e?.maxTokens??this.maxTokens,this.topP=e?.topP??this.topP,this.frequencyPenalty=e?.frequencyPenalty??this.frequencyPenalty,this.presencePenalty=e?.presencePenalty??this.presencePenalty,this.n=e?.n??this.n,this.bestOf=e?.bestOf??this.bestOf,this.logitBias=e?.logitBias,this.stop=e?.stop,this.streaming=e?.streaming??!1,this.streaming&&this.bestOf&&this.bestOf>1)throw new Error("Cannot stream results when bestOf > 1");if(this.azureOpenAIApiKey){if(!this.azureOpenAIApiInstanceName&&!this.azureOpenAIBasePath)throw new Error("Azure OpenAI API instance name not found");if(!this.azureOpenAIApiDeploymentName)throw new Error("Azure OpenAI API deployment name not found");if(!this.azureOpenAIApiVersion)throw new Error("Azure OpenAI API version not found")}this.clientConfig={apiKey:this.openAIApiKey,...r,...e?.configuration}}invocationParams(e){return{model:this.modelName,temperature:this.temperature,max_tokens:this.maxTokens,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,n:this.n,best_of:this.bestOf,logit_bias:this.logitBias,stop:e?.stop??this.stop,stream:this.streaming,...this.modelKwargs}}_identifyingParams(){return{model_name:this.modelName,...this.invocationParams(),...this.clientConfig}}identifyingParams(){return this._identifyingParams()}async _generate(e,r,n){let i=yi(e,this.batchSize),a=[],s={},o=this.invocationParams(r);if(o.max_tokens===-1){if(e.length!==1)throw new Error("max_tokens set to -1 not supported for multiple inputs");o.max_tokens=await Fu({prompt:e[0],modelName:this.modelName})}for(let l=0;l<i.length;l+=1){let c=o.stream?await new Promise((h,_)=>{let P=[],S,I=!1,F=!1;this.completionWithRetry({...o,prompt:i[l]},{signal:r.signal,...r.options,adapter:Me,responseType:"stream",onmessage:v=>{if(v.data?.trim?.()==="[DONE]"){if(F||I)return;F=!0,h({...S,choices:P})}else{let j=JSON.parse(v.data);if(j?.error){if(I)return;I=!0,_(j.error);return}let m=j;S||(S={id:m.id,object:m.object,created:m.created,model:m.model});for(let b of m.choices)if(b!=null&&b.index!=null){P[b.index]||(P[b.index]={});let f=P[b.index];f.text=(f.text??"")+(b.text??""),f.finish_reason=b.finish_reason,f.logprobs=b.logprobs,n?.handleLLMNewToken(b.text??"",{prompt:Math.floor(b.index/this.n),completion:b.index%this.n})}!F&&!I&&P.every(b=>b.finish_reason!=null)&&(F=!0,h({...S,choices:P}))}}}).catch(v=>{I||(I=!0,_(v))})}):await this.completionWithRetry({...o,prompt:i[l]},{signal:r.signal,...r.options});a.push(...c.choices);let{completion_tokens:d,prompt_tokens:y,total_tokens:w}=c.usage??{};d&&(s.completionTokens=(s.completionTokens??0)+d),y&&(s.promptTokens=(s.promptTokens??0)+y),w&&(s.totalTokens=(s.totalTokens??0)+w)}return{generations:yi(a,this.n).map(l=>l.map(c=>({text:c.text??"",generationInfo:{finishReason:c.finish_reason,logprobs:c.logprobs}}))),llmOutput:{tokenUsage:s}}}async*_streamResponseChunks(e,r,n){let i={...this.invocationParams(r),prompt:e,stream:!0},a=this.startStream(i,r);for await(let s of a){let u=JSON.parse(s).choices?.[0];if(!u)continue;let l=new ht({text:u.text,generationInfo:{finishReason:u.finish_reason,logprobs:u.logprobs}});yield l,n?.handleLLMNewToken(l.text??"")}}startStream(e,r){let n=!1,i=new TransformStream,a=i.writable.getWriter(),s=On(i.readable),o;return this.completionWithRetry(e,{...r,adapter:Me,responseType:"stream",onmessage:u=>{if(!n)if(u.data?.trim?.()==="[DONE]")n=!0,a.close();else{let l=JSON.parse(u.data);if(l.error)throw n=!0,l.error;a.write(u.data)}}}).catch(u=>{n||(o=u,n=!0,a.close())}),{async next(){let u=await s.next();if(o)throw o;return u},[Symbol.asyncIterator](){return this}}}async completionWithRetry(e,r){if(!this.client){let i={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,basePath:this.clientConfig.basePath},a=hr(i),s=new zs.Configuration({...this.clientConfig,basePath:a,baseOptions:{timeout:this.timeout,...this.clientConfig.baseOptions}});this.client=new zs.OpenAIApi(s)}let n={adapter:jt()?void 0:Me,...this.clientConfig.baseOptions,...r};return this.azureOpenAIApiKey&&(n.headers={"api-key":this.azureOpenAIApiKey,...n.headers},n.params={"api-version":this.azureOpenAIApiVersion,...n.params}),this.caller.call(this.client.createCompletion.bind(this.client),e,n).then(i=>i.data)}_llmType(){return"openai"}},Al=class extends Bn{get lc_secrets(){return{promptLayerApiKey:"PROMPTLAYER_API_KEY"}}constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"promptLayerApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"plTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnPromptLayerId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.plTags=e?.plTags??[],this.promptLayerApiKey=e?.promptLayerApiKey??Y("PROMPTLAYER_API_KEY"),this.returnPromptLayerId=e?.returnPromptLayerId,!this.promptLayerApiKey)throw new Error("Missing PromptLayer API key")}async completionWithRetry(e,r){return e.stream?super.completionWithRetry(e,r):await super.completionWithRetry(e)}async _generate(e,r,n){let i=Date.now(),a=await super._generate(e,r,n);for(let s=0;s<a.generations.length;s+=1){let o=Date.now(),u={text:a.generations[s][0].text,llm_output:a.llmOutput},l=await In(this.caller,"langchain.PromptLayerOpenAI",[e[s]],this._identifyingParams(),this.plTags,u,i,o,this.promptLayerApiKey),c;this.returnPromptLayerId===!0&&(l&&l.success===!0&&(c=l.request_id),a.generations[s][0].generationInfo={...a.generations[s][0].generationInfo,promptLayerRequestId:c})}return a}}});var lm=N((TR,um)=>{um.exports=function(t,e,r,n,i){var a,s;if(n===void 0)n=0;else if(n=n|0,n<0||n>=t.length)throw new RangeError("invalid lower bound");if(i===void 0)i=t.length-1;else if(i=i|0,i<n||i>=t.length)throw new RangeError("invalid upper bound");for(;n<=i;)if(a=n+(i-n>>>1),s=+r(t[a],e,a,t),s<0)n=a+1;else if(s>0)i=a-1;else return a;return~n}});var cm=N(Pl=>{"use strict";function Gs(t){if(typeof t!="number")throw new TypeError("Expected a number")}Pl.ascending=(t,e)=>(Gs(t),Gs(e),Number.isNaN(t)?-1:Number.isNaN(e)?1:t-e);Pl.descending=(t,e)=>(Gs(t),Gs(e),Number.isNaN(t)?1:Number.isNaN(e)?-1:e-t)});var Kt,to=R(()=>{Kt=class{constructor(e){Object.defineProperty(this,"pageContent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.pageContent=e.pageContent?e.pageContent.toString():this.pageContent,this.metadata=e.metadata??{}}}});var oo,Ki,$i=R(()=>{An();oo=class extends Ie{parseResultWithPrompt(e,r,n){return this.parseResult(e,n)}async invoke(e,r){return typeof e=="string"?this._callWithConfig(async n=>this.parseResult([{text:n}]),e,{...r,runType:"parser"}):this._callWithConfig(async n=>this.parseResult([{message:n,text:n.content}]),e,{...r,runType:"parser"})}},Ki=class extends oo{parseResult(e,r){return this.parse(e[0].text,r)}async parseWithPrompt(e,r,n){return this.parse(e,n)}_type(){throw new Error("_type not implemented")}}});var uo,mm=R(()=>{$i();uo=class extends Ki{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","default"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}parse(e){return Promise.resolve(e)}getFormatInstructions(){return""}}});var ym={};dt(ym,{LLMChain:()=>ie});var ie,Fe=R(()=>{Ue();Ot();Ci();mm();ie=class extends oe{get inputKeys(){return this.prompt.inputVariables}get outputKeys(){return[this.outputKey]}constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"llm",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"llmKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:"text"}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt,this.llm=e.llm,this.llmKwargs=e.llmKwargs,this.outputKey=e.outputKey??this.outputKey,this.outputParser=e.outputParser??new uo,this.prompt.outputParser){if(e.outputParser)throw new Error("Cannot set both outputParser and prompt.outputParser");this.outputParser=this.prompt.outputParser}}_selectMemoryInputs(e){let r=super._selectMemoryInputs(e);for(let n of this.llm.callKeys)n in e&&delete r[n];return r}async _getFinalOutput(e,r,n){let i;return this.outputParser?i=await this.outputParser.parseResultWithPrompt(e,r,n?.getChild()):i=e[0].text,i}call(e,r){return super.call(e,r)}async _call(e,r){let n={...e},i={...this.llmKwargs};for(let o of this.llm.callKeys)o in e&&(i[o]=e[o],delete n[o]);let a=await this.prompt.formatPromptValue(n),{generations:s}=await this.llm.generatePrompt([a],i,r?.getChild());return{[this.outputKey]:await this._getFinalOutput(s[0],a,r)}}async predict(e,r){return(await this.call(e,r))[this.outputKey]}_chainType(){return"llm"}static async deserialize(e){let{llm:r,prompt:n}=e;if(!r)throw new Error("LLMChain must have llm");if(!n)throw new Error("LLMChain must have prompt");return new ie({llm:await ar.deserialize(r),prompt:await Dt.deserialize(n)})}serialize(){return{_type:`${this._chainType()}_chain`,llm:this.llm.serialize(),prompt:this.prompt.serialize()}}}});function Ll(t,e){let r=new Set;for(let n of e)t.has(n)&&r.add(n);return r}function gm(t,e){let r=new Set(t);for(let n of e)r.add(n);return r}function Zi(t,e){let r=new Set(t);for(let n of e)r.delete(n);return r}var bm=R(()=>{});var Dl={};dt(Dl,{SequentialChain:()=>Yr,SimpleSequentialChain:()=>$n});function Hi(t){return Array.from(t).map(e=>`"${e}"`).join(", ")}var Yr,$n,Ji=R(()=>{Ue();bm();Yr=class extends oe{get inputKeys(){return this.inputVariables}get outputKeys(){return this.outputVariables}constructor(e){if(super(e),Object.defineProperty(this,"chains",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnAll",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.chains=e.chains,this.inputVariables=e.inputVariables,this.outputVariables=e.outputVariables??[],this.outputVariables.length>0&&e.returnAll)throw new Error("Either specify variables to return using `outputVariables` or use `returnAll` param. Cannot apply both conditions at the same time.");this.returnAll=e.returnAll??!1,this._validateChains()}_validateChains(){if(this.chains.length===0)throw new Error("Sequential chain must have at least one chain.");let e=this.memory?.memoryKeys??[],r=new Set(this.inputKeys),n=new Set(e),i=Ll(r,n);if(i.size>0)throw new Error(`The following keys: ${Hi(i)} are overlapping between memory and input keys of the chain variables. This can lead to unexpected behaviour. Please use input and memory keys that don't overlap.`);let a=gm(r,n);for(let s of this.chains){let o=Zi(new Set(s.inputKeys),a);if(s.memory&&(o=Zi(o,new Set(s.memory.memoryKeys))),o.size>0)throw new Error(`Missing variables for chain "${s._chainType()}": ${Hi(o)}. Only got the following variables: ${Hi(a)}.`);let u=new Set(s.outputKeys),l=Ll(a,u);if(l.size>0)throw new Error(`The following output variables for chain "${s._chainType()}" are overlapping: ${Hi(l)}. This can lead to unexpected behaviour.`);for(let c of u)a.add(c)}if(this.outputVariables.length===0)if(this.returnAll){let s=Zi(a,r);this.outputVariables=Array.from(s)}else this.outputVariables=this.chains[this.chains.length-1].outputKeys;else{let s=Zi(new Set(this.outputVariables),new Set(a));if(s.size>0)throw new Error(`The following output variables were expected to be in the final chain output but were not found: ${Hi(s)}.`)}}async _call(e,r){let n={},i=e,a=0;for(let o of this.chains){a+=1,n=await o.call(i,r?.getChild(`step_${a}`));for(let u of Object.keys(n))i[u]=n[u]}let s={};for(let o of this.outputVariables)s[o]=i[o];return s}_chainType(){return"sequential_chain"}static async deserialize(e){let r=[],n=e.input_variables,i=e.output_variables,a=e.chains;for(let s of a){let o=await oe.deserialize(s);r.push(o)}return new Yr({chains:r,inputVariables:n,outputVariables:i})}serialize(){let e=[];for(let r of this.chains)e.push(r.serialize());return{_type:this._chainType(),input_variables:this.inputVariables,output_variables:this.outputVariables,chains:e}}},$n=class extends oe{get inputKeys(){return[this.inputKey]}get outputKeys(){return[this.outputKey]}constructor(e){super(e),Object.defineProperty(this,"chains",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"input"}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:"output"}),Object.defineProperty(this,"trimOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.chains=e.chains,this.trimOutputs=e.trimOutputs??!1,this._validateChains()}_validateChains(){for(let e of this.chains){if(e.inputKeys.filter(r=>!e.memory?.memoryKeys.includes(r)).length!==1)throw new Error(`Chains used in SimpleSequentialChain should all have one input, got ${e.inputKeys.length} for ${e._chainType()}.`);if(e.outputKeys.length!==1)throw new Error(`Chains used in SimpleSequentialChain should all have one output, got ${e.outputKeys.length} for ${e._chainType()}.`)}}async _call(e,r){let n=e[this.inputKey],i=0;for(let a of this.chains)i+=1,n=(await a.call({[a.inputKeys[0]]:n,signal:e.signal},r?.getChild(`step_${i}`)))[a.outputKeys[0]],this.trimOutputs&&(n=n.trim()),await r?.handleText(n);return{[this.outputKey]:n}}_chainType(){return"simple_sequential_chain"}static async deserialize(e){let r=[],n=e.chains;for(let i of n){let a=await oe.deserialize(i);r.push(a)}return new $n({chains:r})}serialize(){let e=[];for(let r of this.chains)e.push(r.serialize());return{_type:this._chainType(),chains:e}}}});var lo={};dt(lo,{MapReduceDocumentsChain:()=>$t,RefineDocumentsChain:()=>It,StuffDocumentsChain:()=>lt});var lt,$t,It,Wr=R(()=>{Ue();Fe();_e();lt=class extends oe{get inputKeys(){return[this.inputKey,...this.llmChain.inputKeys].filter(e=>e!==this.documentVariableName)}get outputKeys(){return this.llmChain.outputKeys}constructor(e){super(e),Object.defineProperty(this,"llmChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"input_documents"}),Object.defineProperty(this,"documentVariableName",{enumerable:!0,configurable:!0,writable:!0,value:"context"}),this.llmChain=e.llmChain,this.documentVariableName=e.documentVariableName??this.documentVariableName,this.inputKey=e.inputKey??this.inputKey}_prepInputs(e){if(!(this.inputKey in e))throw new Error(`Document key ${this.inputKey} not found.`);let{[this.inputKey]:r,...n}=e,a=r.map(({pageContent:s})=>s).join(`

`);return{...n,[this.documentVariableName]:a}}async _call(e,r){return await this.llmChain.call(this._prepInputs(e),r?.getChild("combine_documents"))}_chainType(){return"stuff_documents_chain"}static async deserialize(e){if(!e.llm_chain)throw new Error("Missing llm_chain");return new lt({llmChain:await ie.deserialize(e.llm_chain)})}serialize(){return{_type:this._chainType(),llm_chain:this.llmChain.serialize()}}},$t=class extends oe{get inputKeys(){return[this.inputKey,...this.combineDocumentChain.inputKeys]}get outputKeys(){return this.combineDocumentChain.outputKeys}constructor(e){super(e),Object.defineProperty(this,"llmChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"input_documents"}),Object.defineProperty(this,"documentVariableName",{enumerable:!0,configurable:!0,writable:!0,value:"context"}),Object.defineProperty(this,"returnIntermediateSteps",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:3e3}),Object.defineProperty(this,"maxIterations",{enumerable:!0,configurable:!0,writable:!0,value:10}),Object.defineProperty(this,"ensureMapStep",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"combineDocumentChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.llmChain=e.llmChain,this.combineDocumentChain=e.combineDocumentChain,this.documentVariableName=e.documentVariableName??this.documentVariableName,this.ensureMapStep=e.ensureMapStep??this.ensureMapStep,this.inputKey=e.inputKey??this.inputKey,this.maxTokens=e.maxTokens??this.maxTokens,this.maxIterations=e.maxIterations??this.maxIterations,this.returnIntermediateSteps=e.returnIntermediateSteps??!1}async _call(e,r){if(!(this.inputKey in e))throw new Error(`Document key ${this.inputKey} not found.`);let{[this.inputKey]:n,...i}=e,a=n,s=[];for(let l=0;l<this.maxIterations;l+=1){let c=a.map(h=>({[this.documentVariableName]:h.pageContent,...i}));if(l!==0||!this.ensureMapStep){let h=await this.combineDocumentChain.llmChain.prompt.format(this.combineDocumentChain._prepInputs({[this.combineDocumentChain.inputKey]:a,...i}));if(await this.combineDocumentChain.llmChain.llm.getNumTokens(h)<this.maxTokens)break}let y=await this.llmChain.apply(c,r?Array.from({length:c.length},(h,_)=>r.getChild(`map_${_+1}`)):void 0),{outputKey:w}=this.llmChain;this.returnIntermediateSteps&&(s=s.concat(y.map(h=>h[w]))),a=y.map(h=>({pageContent:h[w],metadata:{}}))}let o={[this.combineDocumentChain.inputKey]:a,...i},u=await this.combineDocumentChain.call(o,r?.getChild("combine_documents"));return this.returnIntermediateSteps?{...u,intermediateSteps:s}:u}_chainType(){return"map_reduce_documents_chain"}static async deserialize(e){if(!e.llm_chain)throw new Error("Missing llm_chain");if(!e.combine_document_chain)throw new Error("Missing combine_document_chain");return new $t({llmChain:await ie.deserialize(e.llm_chain),combineDocumentChain:await lt.deserialize(e.combine_document_chain)})}serialize(){return{_type:this._chainType(),llm_chain:this.llmChain.serialize(),combine_document_chain:this.combineDocumentChain.serialize()}}},It=class extends oe{get defaultDocumentPrompt(){return new ee({inputVariables:["page_content"],template:"{page_content}"})}get inputKeys(){return[...new Set([this.inputKey,...this.llmChain.inputKeys,...this.refineLLMChain.inputKeys])].filter(e=>e!==this.documentVariableName&&e!==this.initialResponseName)}get outputKeys(){return[this.outputKey]}constructor(e){super(e),Object.defineProperty(this,"llmChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"input_documents"}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:"output_text"}),Object.defineProperty(this,"documentVariableName",{enumerable:!0,configurable:!0,writable:!0,value:"context"}),Object.defineProperty(this,"initialResponseName",{enumerable:!0,configurable:!0,writable:!0,value:"existing_answer"}),Object.defineProperty(this,"refineLLMChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"documentPrompt",{enumerable:!0,configurable:!0,writable:!0,value:this.defaultDocumentPrompt}),this.llmChain=e.llmChain,this.refineLLMChain=e.refineLLMChain,this.documentVariableName=e.documentVariableName??this.documentVariableName,this.inputKey=e.inputKey??this.inputKey,this.outputKey=e.outputKey??this.outputKey,this.documentPrompt=e.documentPrompt??this.documentPrompt,this.initialResponseName=e.initialResponseName??this.initialResponseName}async _constructInitialInputs(e,r){let n={page_content:e.pageContent,...e.metadata},i={};return this.documentPrompt.inputVariables.forEach(o=>{i[o]=n[o]}),{...{[this.documentVariableName]:await this.documentPrompt.format({...i})},...r}}async _constructRefineInputs(e,r){let n={page_content:e.pageContent,...e.metadata},i={};this.documentPrompt.inputVariables.forEach(o=>{i[o]=n[o]});let a={[this.documentVariableName]:await this.documentPrompt.format({...i})};return{[this.initialResponseName]:r,...a}}async _call(e,r){if(!(this.inputKey in e))throw new Error(`Document key ${this.inputKey} not found.`);let{[this.inputKey]:n,...i}=e,a=n,s=await this._constructInitialInputs(a[0],i),o=await this.llmChain.predict({...s},r?.getChild("answer")),u=[o];for(let l=1;l<a.length;l+=1){let d={...await this._constructRefineInputs(a[l],o),...i};o=await this.refineLLMChain.predict({...d},r?.getChild("refine")),u.push(o)}return{[this.outputKey]:o}}_chainType(){return"refine_documents_chain"}static async deserialize(e){let r=e.llm_chain;if(!r)throw new Error("Missing llm_chain");let n=e.refine_llm_chain;if(!n)throw new Error("Missing refine_llm_chain");return new It({llmChain:await ie.deserialize(r),refineLLMChain:await ie.deserialize(n)})}serialize(){return{_type:this._chainType(),llm_chain:this.llmChain.serialize(),refine_llm_chain:this.refineLLMChain.serialize()}}}});function Gr(t){return t._modelType()==="base_chat_model"}var co,Zt,Yi=R(()=>{co=class{async getPromptAsync(e,r){return this.getPrompt(e).partial(r?.partialVariables??{})}},Zt=class extends co{constructor(e,r=[]){super(),Object.defineProperty(this,"defaultPrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"conditionals",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.defaultPrompt=e,this.conditionals=r}getPrompt(e){for(let[r,n]of this.conditionals)if(r(e))return n;return this.defaultPrompt}}});var Z0,H0,J0,Y0,wm,_m=R(()=>{_e();kr();Yi();Z0=new ee({template:`Use the following pieces of context to answer the question at the end. If you don't know the answer, just say that you don't know, don't try to make up an answer.

{context}

Question: {question}
Helpful Answer:`,inputVariables:["context","question"]}),H0=`Use the following pieces of context to answer the users question. 
If you don't know the answer, just say that you don't know, don't try to make up an answer.
----------------
{context}`,J0=[nr.fromTemplate(H0),mt.fromTemplate("{question}")],Y0=De.fromPromptMessages(J0),wm=new Zt(Z0,[[Gr,Y0]])});var vm=R(()=>{_e();kr();Yi()});var Om=R(()=>{Ot()});var Am=R(()=>{to();Ot()});var Pm=R(()=>{Ot();kr()});var Em=R(()=>{Ot();_e();Yi();Om();Am();Xa();kr();En();Pm()});var W0,G0,Q0,X0,ex,Tm,tx,rx,nx,ix,ax,Im,Cm=R(()=>{Em();Yi();W0=`The original question is as follows: {question}
We have provided an existing answer: {existing_answer}
We have the opportunity to refine the existing answer
(only if needed) with some more context below.
------------
{context}
------------
Given the new context, refine the original answer to better answer the question. 
If the context isn't useful, return the original answer.`,G0=new ee({inputVariables:["question","existing_answer","context"],template:W0}),Q0=`The original question is as follows: {question}
We have provided an existing answer: {existing_answer}
We have the opportunity to refine the existing answer
(only if needed) with some more context below.
------------
{context}
------------
Given the new context, refine the original answer to better answer the question. 
If the context isn't useful, return the original answer.`,X0=[mt.fromTemplate("{question}"),Ii.fromTemplate("{existing_answer}"),mt.fromTemplate(Q0)],ex=De.fromPromptMessages(X0),Tm=new Zt(G0,[[Gr,ex]]),tx=`Context information is below. 
---------------------
{context}
---------------------
Given the context information and not prior knowledge, answer the question: {question}`,rx=new ee({inputVariables:["context","question"],template:tx}),nx=`Context information is below. 
---------------------
{context}
---------------------
Given the context information and not prior knowledge, answer any questions`,ix=[nr.fromTemplate(nx),mt.fromTemplate("{question}")],ax=De.fromPromptMessages(ix),Im=new Zt(rx,[[Gr,ax]])});function Zn(t,e={}){let{prompt:r=wm.getPrompt(t),verbose:n}=e,i=new ie({prompt:r,llm:t,verbose:n});return new lt({llmChain:i,verbose:n})}function ql(t,e={}){let{questionPrompt:r=Im.getPrompt(t),refinePrompt:n=Tm.getPrompt(t),verbose:i}=e,a=new ie({prompt:r,llm:t,verbose:i}),s=new ie({prompt:n,llm:t,verbose:i});return new It({llmChain:a,refineLLMChain:s,verbose:i})}var Hn=R(()=>{Fe();Wr();_m();vm();Cm()});var Sm={};dt(Sm,{VectorDBQAChain:()=>Jn});var Jn,Fl=R(()=>{Ue();Hn();Jn=class extends oe{get inputKeys(){return[this.inputKey]}get outputKeys(){return this.combineDocumentsChain.outputKeys.concat(this.returnSourceDocuments?["sourceDocuments"]:[])}constructor(e){super(e),Object.defineProperty(this,"k",{enumerable:!0,configurable:!0,writable:!0,value:4}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"query"}),Object.defineProperty(this,"vectorstore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"combineDocumentsChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSourceDocuments",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.vectorstore=e.vectorstore,this.combineDocumentsChain=e.combineDocumentsChain,this.inputKey=e.inputKey??this.inputKey,this.k=e.k??this.k,this.returnSourceDocuments=e.returnSourceDocuments??this.returnSourceDocuments}async _call(e,r){if(!(this.inputKey in e))throw new Error(`Question key ${this.inputKey} not found.`);let n=e[this.inputKey],i=await this.vectorstore.similaritySearch(n,this.k,e.filter,r?.getChild("vectorstore")),a={question:n,input_documents:i},s=await this.combineDocumentsChain.call(a,r?.getChild("combine_documents"));return this.returnSourceDocuments?{...s,sourceDocuments:i}:s}_chainType(){return"vector_db_qa"}static async deserialize(e,r){if(!("vectorstore"in r))throw new Error("Need to pass in a vectorstore to deserialize VectorDBQAChain");let{vectorstore:n}=r;if(!e.combine_documents_chain)throw new Error("VectorDBQAChain must have combine_documents_chain in serialized data");return new Jn({combineDocumentsChain:await oe.deserialize(e.combine_documents_chain),k:e.k,vectorstore:n})}serialize(){return{_type:this._chainType(),combine_documents_chain:this.combineDocumentsChain.serialize(),k:this.k}}static fromLLM(e,r,n){let i=Zn(e);return new this({vectorstore:r,combineDocumentsChain:i,...n})}}});var jm,km,sx,Rm,Nm=R(()=>{_e();jm=`You are given the below API Documentation:
{api_docs}
Using this documentation, generate the full API url to call for answering the user question.
You should build the API url in order to get a response that is as short as possible, while still getting the necessary information to answer the question. Pay attention to deliberately exclude any unnecessary pieces of data in the API call.

Question:{question}
API url:`,km=new ee({inputVariables:["api_docs","question"],template:jm}),sx=`${jm} {api_url}

Here is the response from the API:

{api_response}

Summarize this response to answer the original question.

Summary:`,Rm=new ee({inputVariables:["api_docs","question","api_url","api_response"],template:sx})});var Mm={};dt(Mm,{APIChain:()=>Yn});var Yn,Ul=R(()=>{Ue();Fe();Nm();Yn=class extends oe{get inputKeys(){return[this.inputKey]}get outputKeys(){return[this.outputKey]}constructor(e){super(e),Object.defineProperty(this,"apiAnswerChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiRequestChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiDocs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"question"}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:"output"}),this.apiRequestChain=e.apiRequestChain,this.apiAnswerChain=e.apiAnswerChain,this.apiDocs=e.apiDocs,this.inputKey=e.inputKey??this.inputKey,this.outputKey=e.outputKey??this.outputKey,this.headers=e.headers??this.headers}async _call(e,r){let n=e[this.inputKey],i=await this.apiRequestChain.predict({question:n,api_docs:this.apiDocs},r?.getChild("request")),s=await(await fetch(i,{headers:this.headers})).text(),o=await this.apiAnswerChain.predict({question:n,api_docs:this.apiDocs,api_url:i,api_response:s},r?.getChild("response"));return{[this.outputKey]:o}}_chainType(){return"api_chain"}static async deserialize(e){let{api_request_chain:r,api_answer_chain:n,api_docs:i}=e;if(!r)throw new Error("LLMChain must have api_request_chain");if(!n)throw new Error("LLMChain must have api_answer_chain");if(!i)throw new Error("LLMChain must have api_docs");return new Yn({apiAnswerChain:await ie.deserialize(n),apiRequestChain:await ie.deserialize(r),apiDocs:i})}serialize(){return{_type:this._chainType(),api_answer_chain:this.apiAnswerChain.serialize(),api_request_chain:this.apiRequestChain.serialize(),api_docs:this.apiDocs}}static fromLLMAndAPIDocs(e,r,n={}){let{apiUrlPrompt:i=km,apiResponsePrompt:a=Rm}=n,s=new ie({prompt:i,llm:e}),o=new ie({prompt:a,llm:e});return new this({apiAnswerChain:o,apiRequestChain:s,apiDocs:r,...n})}}});var oe,Ue=R(()=>{nt();xn();Ci();oe=class extends qi{get lc_namespace(){return["langchain","chains",this._chainType()]}constructor(e,r,n){if(arguments.length===1&&typeof e=="object"&&!("saveContext"in e)){let{memory:i,callbackManager:a,...s}=e;super({...s,callbacks:a??s.callbacks}),this.memory=i}else super({verbose:r,callbacks:n}),this.memory=e}_selectMemoryInputs(e){let r={...e};return"signal"in r&&delete r.signal,"timeout"in r&&delete r.timeout,r}async invoke(e,r){return this.call(e,r)}serialize(){throw new Error("Method not implemented.")}async run(e,r){let n=this.inputKeys.filter(u=>!this.memory?.memoryKeys.includes(u));if(!(n.length<=1))throw new Error(`Chain ${this._chainType()} expects multiple inputs, cannot use 'run' `);let a=n.length?{[n[0]]:e}:{},s=await this.call(a,r),o=Object.keys(s);if(o.length===1)return s[o[0]];throw new Error("return values have multiple keys, `run` only supported when one key currently")}async _formatValues(e){let r={...e};if(r.timeout&&!r.signal&&(r.signal=AbortSignal.timeout(r.timeout),delete r.timeout),this.memory!=null){let n=await this.memory.loadMemoryVariables(this._selectMemoryInputs(e));for(let[i,a]of Object.entries(n))r[i]=a}return r}async call(e,r,n){let i=await this._formatValues(e),a=Qa(r),o=await(await ce.configure(a.callbacks,this.callbacks,a.tags||n,this.tags,a.metadata,this.metadata,{verbose:this.verbose}))?.handleChainStart(this.toJSON(),i),u;try{u=await(e.signal?Promise.race([this._call(i,o),new Promise((l,c)=>{e.signal?.addEventListener("abort",()=>{c(new Error("AbortError"))})})]):this._call(i,o))}catch(l){throw await o?.handleChainError(l),l}return this.memory!=null&&await this.memory.saveContext(this._selectMemoryInputs(e),u),await o?.handleChainEnd(u),Object.defineProperty(u,gn,{value:o?{runId:o?.runId}:void 0,configurable:!0}),u}async apply(e,r){return Promise.all(e.map(async(n,i)=>this.call(n,r?.[i])))}static async deserialize(e,r={}){switch(e._type){case"llm_chain":{let{LLMChain:n}=await Promise.resolve().then(()=>(Fe(),ym));return n.deserialize(e)}case"sequential_chain":{let{SequentialChain:n}=await Promise.resolve().then(()=>(Ji(),Dl));return n.deserialize(e)}case"simple_sequential_chain":{let{SimpleSequentialChain:n}=await Promise.resolve().then(()=>(Ji(),Dl));return n.deserialize(e)}case"stuff_documents_chain":{let{StuffDocumentsChain:n}=await Promise.resolve().then(()=>(Wr(),lo));return n.deserialize(e)}case"map_reduce_documents_chain":{let{MapReduceDocumentsChain:n}=await Promise.resolve().then(()=>(Wr(),lo));return n.deserialize(e)}case"refine_documents_chain":{let{RefineDocumentsChain:n}=await Promise.resolve().then(()=>(Wr(),lo));return n.deserialize(e)}case"vector_db_qa":{let{VectorDBQAChain:n}=await Promise.resolve().then(()=>(Fl(),Sm));return n.deserialize(e,r)}case"api_chain":{let{APIChain:n}=await Promise.resolve().then(()=>(Ul(),Mm));return n.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}}}});xl();function Bs(t,e){let r=0,n=0;for(let i=0;i<t.length;i++)r+=Math.min(t[i],e[i]),n+=t[i]+e[i];return 2*r/n}function Ks(t,e){let r=0,n=0,i=0;for(let a=0;a<t.length;a++)r+=t[a]*t[a],n+=e[a]*e[a],i+=(t[a]-e[a])*(t[a]-e[a]);return i/(r+n)}function $s(t,e){let r=0;for(let n=0;n<t.length;n++)r+=Math.min(t[n],e[n]);return 1-r}function Zs(t,e){let r=0,n=0,i=0;for(let a=0;a<t.length;a++)r+=t[a]*e[a],n+=t[a]*t[a],i+=e[a]*e[a];return r/(n+i-r)}function Hs(t,e){let r=0,n=0;for(let i=0;i<t.length;i++)r+=Math.abs(t[i]-e[i]),n+=Math.min(t[i],e[i]);return r/n}function Js(t,e){let r=0,n=0;for(let i=0;i<t.length;i++)r+=Math.min(t[i],e[i]),n+=t[i]+e[i];return 1-r/n}function Ys(t,e){let r=0;for(let n=0;n<t.length;n++)r+=(Math.sqrt(t[n])-Math.sqrt(e[n]))**2;return r}function Ws(t,e,r){if(r){let n=0,i=0;for(let a=0;a<t.length;a++)n+=t[a]&&e[a],i+=t[a]||e[a];return i===0?1:n/i}else{let n=0,i=0,a=0;for(let s=0;s<t.length;s++)n+=t[s],i+=e[s],a+=Math.min(t[s],e[s]);return 1-(n+i-2*a)/(n+i-a)}}var Qs={};dt(Qs,{cosine:()=>zi,czekanowski:()=>Bs,dice:()=>Il,intersection:()=>Cl,kulczynski:()=>Sl,kumarHassebrook:()=>Zs,motyka:()=>jl,pearson:()=>Rl,squaredChord:()=>Nl,tanimoto:()=>Ws,tree:()=>Tl});var Tl={};dt(Tl,{createTree:()=>Ui,getFunction:()=>K0,treeSimilarity:()=>B0});var dm=ge(lm()),pm=ge(cm());function Ui(t,e={}){var r=t[0];let{minWindow:n=.16,threshold:i=.01,from:a=r[0],to:s=r[r.length-1]}=e;return Fi(t[0],t[1],a,s,n,i)}function Fi(t,e,r,n,i,a){if(n-r<i)return null;var s=(0,dm.default)(t,r,pm.ascending);s<0&&(s=~s);for(var o=0,u=0,l=s;l<t.length&&!(t[l]>=n);l++)o+=e[l],u+=t[l]*e[l];return o<a||(u/=o,u-r<1e-6||n-u<1e-6)?null:u-r<i/4?Fi(t,e,u,n,i,a):n-u<i/4?Fi(t,e,r,u,i,a):new El(o,u,Fi(t,e,r,u,i,a),Fi(t,e,u,n,i,a))}var El=class{constructor(e,r,n,i){this.sum=e,this.center=r,this.left=n,this.right=i}};function Vi(t,e,r={}){let{alpha:n=.1,beta:i=.33,gamma:a=.001}=r;if(t===null||e===null)return 0;Array.isArray(t)&&(t=Ui(t)),Array.isArray(e)&&(e=Ui(e));var s=n*Math.min(t.sum,e.sum)/Math.max(t.sum,e.sum)+(1-n)*Math.exp(-a*Math.abs(t.center-e.center));return i*s+(1-i)*(Vi(t.left,e.left,r)+Vi(t.right,e.right,r))/2}function B0(t,e,r={}){return Vi(t,e,r)}function K0(t={}){return(e,r)=>Vi(e,r,t)}function zi(t,e){let r=0,n=0,i=0;for(let a=0;a<t.length;a++)r+=t[a]*e[a],n+=t[a]*t[a],i+=e[a]*e[a];return r/(Math.sqrt(n)*Math.sqrt(i))}function Il(t,e){return 1-Ks(t,e)}function Cl(t,e){return 1-$s(t,e)}function Sl(t,e){return 1/Hs(t,e)}function jl(t,e){return 1-Js(t,e)}var $0=Object.prototype.toString;function hm(t){let e=$0.call(t);return e.endsWith("Array]")&&!e.includes("Big")}function fm(t){if(!hm(t))throw new TypeError("input must be an array");if(t.length===0)throw new TypeError("input must not be empty");for(var e=0,r=0;r<t.length;r++)e+=t[r];return e}function kl(t){return fm(t)/t.length}function Rl(t,e){let r=kl(t),n=kl(e),i=new Array(t.length),a=new Array(e.length);for(let s=0;s<i.length;s++)i[s]=t[s]-r,a[s]=e[s]-n;return zi(i,a)}function Nl(t,e){return 1-Ys(t,e)}xn();An();var Xs=class extends Ie{constructor(e){super(e),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.callbacks=e?.callbacks,this.tags=e?.tags??[],this.metadata=e?.metadata??{},this.verbose=e?.verbose??!1}_getRelevantDocuments(e,r){throw new Error("Not implemented!")}async invoke(e,r){return this.getRelevantDocuments(e,r)}async getRelevantDocuments(e,r){let n=Qa(r),a=await(await ce.configure(n.callbacks,this.callbacks,n.tags,this.tags,n.metadata,this.metadata,{verbose:this.verbose}))?.handleRetrieverStart(this.toJSON(),e);try{let s=await this._getRelevantDocuments(e,a);return await a?.handleRetrieverEnd(s),s}catch(s){throw await a?.handleRetrieverError(s),s}}};br();var Bi=class extends Xs{get lc_namespace(){return["langchain","retrievers","base"]}_vectorstoreType(){return this.vectorStore._vectorstoreType()}constructor(e){super(e),Object.defineProperty(this,"vectorStore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"k",{enumerable:!0,configurable:!0,writable:!0,value:4}),Object.defineProperty(this,"searchType",{enumerable:!0,configurable:!0,writable:!0,value:"similarity"}),Object.defineProperty(this,"searchKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.vectorStore=e.vectorStore,this.k=e.k??this.k,this.searchType=e.searchType??this.searchType,this.filter=e.filter,e.searchType==="mmr"&&(this.searchKwargs=e.searchKwargs)}async _getRelevantDocuments(e,r){if(this.searchType==="mmr"){if(typeof this.vectorStore.maxMarginalRelevanceSearch!="function")throw new Error(`The vector store backing this retriever, ${this._vectorstoreType()} does not support max marginal relevance search.`);return this.vectorStore.maxMarginalRelevanceSearch(e,{k:this.k,filter:this.filter,...this.searchKwargs},r?.getChild("vectorstore"))}return this.vectorStore.similaritySearch(e,this.k,this.filter,r?.getChild("vectorstore"))}async addDocuments(e,r){return this.vectorStore.addDocuments(e,r)}},eo=class extends je{constructor(e,r){super(r),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","vectorstores",this._vectorstoreType()]}),Object.defineProperty(this,"embeddings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.embeddings=e}async delete(e){throw new Error("Not implemented.")}async similaritySearch(e,r=4,n=void 0,i=void 0){return(await this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(e),r,n)).map(s=>s[0])}async similaritySearchWithScore(e,r=4,n=void 0,i=void 0){return this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(e),r,n)}static fromTexts(e,r,n,i){throw new Error("the Langchain vectorstore implementation you are using forgot to override this, please report a bug")}static fromDocuments(e,r,n){throw new Error("the Langchain vectorstore implementation you are using forgot to override this, please report a bug")}asRetriever(e,r,n,i,a,s){if(typeof e=="number")return new Bi({vectorStore:this,k:e,filter:r,tags:[...i??[],this._vectorstoreType()],metadata:a,verbose:s,callbacks:n});{let o={vectorStore:this,k:e?.k,filter:e?.filter,tags:[...e?.tags??[],this._vectorstoreType()],metadata:e?.metadata,verbose:e?.verbose,callbacks:e?.callbacks,searchType:e?.searchType};return e?.searchType==="mmr"?new Bi({...o,searchKwargs:e.searchKwargs}):new Bi({...o})}}};to();var Kn=class extends eo{_vectorstoreType(){return"memory"}constructor(e,{similarity:r,...n}={}){super(e,n),Object.defineProperty(this,"memoryVectors",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"similarity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.similarity=r??Qs.cosine}async addDocuments(e){let r=e.map(({pageContent:n})=>n);return this.addVectors(await this.embeddings.embedDocuments(r),e)}async addVectors(e,r){let n=e.map((i,a)=>({content:r[a].pageContent,embedding:i,metadata:r[a].metadata}));this.memoryVectors=this.memoryVectors.concat(n)}async similaritySearchVectorWithScore(e,r,n){let i=u=>{if(!n)return!0;let l=new Kt({metadata:u.metadata,pageContent:u.content});return n(l)},a=this.memoryVectors.filter(i);return a.map((u,l)=>({similarity:this.similarity(e,u.embedding),index:l})).sort((u,l)=>u.similarity>l.similarity?-1:0).slice(0,r).map(u=>[new Kt({metadata:a[u.index].metadata,pageContent:a[u.index].content}),u.similarity])}static async fromTexts(e,r,n,i){let a=[];for(let s=0;s<e.length;s+=1){let o=Array.isArray(r)?r[s]:r,u=new Kt({pageContent:e[s],metadata:o});a.push(u)}return Kn.fromDocuments(a,n,i)}static async fromDocuments(e,r,n){let i=new this(r,n);return await i.addDocuments(e),i}static async fromExistingIndex(e,r){return new this(e,r)}};var io=ge(an(),1);kt();pn();Au();bi();var ro=class{constructor(e){Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.caller=new Mt(e??{})}};Li();var no=class extends ro{constructor(e,r){super(e??{}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"text-embedding-ada-002"}),Object.defineProperty(this,"batchSize",{enumerable:!0,configurable:!0,writable:!0,value:512}),Object.defineProperty(this,"stripNewLines",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let n=e?.openAIApiKey??Y("OPENAI_API_KEY"),i=e?.azureOpenAIApiKey??Y("AZURE_OPENAI_API_KEY");if(!i&&!n)throw new Error("OpenAI or Azure OpenAI API key not found");let a=e?.azureOpenAIApiInstanceName??Y("AZURE_OPENAI_API_INSTANCE_NAME"),s=(e?.azureOpenAIApiEmbeddingsDeploymentName||e?.azureOpenAIApiDeploymentName)??(Y("AZURE_OPENAI_API_EMBEDDINGS_DEPLOYMENT_NAME")||Y("AZURE_OPENAI_API_DEPLOYMENT_NAME")),o=e?.azureOpenAIApiVersion??Y("AZURE_OPENAI_API_VERSION");if(this.azureOpenAIBasePath=e?.azureOpenAIBasePath??Y("AZURE_OPENAI_BASE_PATH"),this.modelName=e?.modelName??this.modelName,this.batchSize=e?.batchSize??(i?1:this.batchSize),this.stripNewLines=e?.stripNewLines??this.stripNewLines,this.timeout=e?.timeout,this.azureOpenAIApiVersion=o,this.azureOpenAIApiKey=i,this.azureOpenAIApiInstanceName=a,this.azureOpenAIApiDeploymentName=s,this.azureOpenAIApiKey){if(!this.azureOpenAIApiInstanceName&&!this.azureOpenAIBasePath)throw new Error("Azure OpenAI API instance name not found");if(!this.azureOpenAIApiDeploymentName)throw new Error("Azure OpenAI API deployment name not found");if(!this.azureOpenAIApiVersion)throw new Error("Azure OpenAI API version not found")}this.clientConfig={apiKey:n,...r}}async embedDocuments(e){let r=yi(this.stripNewLines?e.map(i=>i.replace(/\n/g," ")):e,this.batchSize),n=[];for(let i=0;i<r.length;i+=1){let a=r[i],{data:s}=await this.embeddingWithRetry({model:this.modelName,input:a});for(let o=0;o<a.length;o+=1)n.push(s.data[o].embedding)}return n}async embedQuery(e){let{data:r}=await this.embeddingWithRetry({model:this.modelName,input:this.stripNewLines?e.replace(/\n/g," "):e});return r.data[0].embedding}async embeddingWithRetry(e){if(!this.client){let n={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,basePath:this.clientConfig.basePath},i=hr(n),a=new io.Configuration({...this.clientConfig,basePath:i,baseOptions:{timeout:this.timeout,adapter:jt()?void 0:Me,...this.clientConfig.baseOptions}});this.client=new io.OpenAIApi(a)}let r={};return this.azureOpenAIApiKey&&(r.headers={"api-key":this.azureOpenAIApiKey,...r.headers},r.params={"api-version":this.azureOpenAIApiVersion,...r.params}),this.caller.call(this.client.createEmbedding.bind(this.client),e,r)}};to();za();An();var ao=class extends Ie{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","document_transformers"]})}invoke(e,r){return this.transformDocuments(e)}};var Ml=class extends ao{constructor(e){if(super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","document_transformers","text_splitters"]}),Object.defineProperty(this,"chunkSize",{enumerable:!0,configurable:!0,writable:!0,value:1e3}),Object.defineProperty(this,"chunkOverlap",{enumerable:!0,configurable:!0,writable:!0,value:200}),Object.defineProperty(this,"keepSeparator",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lengthFunction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.chunkSize=e?.chunkSize??this.chunkSize,this.chunkOverlap=e?.chunkOverlap??this.chunkOverlap,this.keepSeparator=e?.keepSeparator??this.keepSeparator,this.lengthFunction=e?.lengthFunction??(r=>r.length),this.chunkOverlap>=this.chunkSize)throw new Error("Cannot have chunkOverlap >= chunkSize")}async transformDocuments(e,r={}){return this.splitDocuments(e,r)}splitOnSeparator(e,r){let n;if(r)if(this.keepSeparator){let i=r.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&");n=e.split(new RegExp(`(?=${i})`))}else n=e.split(r);else n=e.split("");return n.filter(i=>i!=="")}async createDocuments(e,r=[],n={}){let i=r.length>0?r:new Array(e.length).fill({}),{chunkHeader:a="",chunkOverlapHeader:s="(cont'd) ",appendChunkOverlapHeader:o=!1}=n,u=new Array;for(let l=0;l<e.length;l+=1){let c=e[l],d=1,y=null;for(let w of await this.splitText(c)){let h=a,_=0;if(y){let F=c.indexOf(w),v=c.indexOf(y)+await this.lengthFunction(y);_=(c.slice(v,F).match(/\n/g)||[]).length,o&&(h+=s)}d+=_;let P=(w.match(/\n/g)||[]).length,S=i[l].loc&&typeof i[l].loc=="object"?{...i[l].loc}:{};S.lines={from:d,to:d+P};let I={...i[l],loc:S};h+=w,u.push(new Kt({pageContent:h,metadata:I})),d+=P,y=w}}return u}async splitDocuments(e,r={}){let n=e.filter(s=>s.pageContent!==void 0),i=n.map(s=>s.pageContent),a=n.map(s=>s.metadata);return this.createDocuments(i,a,r)}joinDocs(e,r){let n=e.join(r).trim();return n===""?null:n}async mergeSplits(e,r){let n=[],i=[],a=0;for(let o of e){let u=await this.lengthFunction(o);if(a+u+(i.length>0?r.length:0)>this.chunkSize&&(a>this.chunkSize,i.length>0)){let l=this.joinDocs(i,r);for(l!==null&&n.push(l);a>this.chunkOverlap||a+u>this.chunkSize&&a>0;)a-=await this.lengthFunction(i[0]),i.shift()}i.push(o),a+=u}let s=this.joinDocs(i,r);return s!==null&&n.push(s),n}};var so=class extends Ml{constructor(e){super(e),Object.defineProperty(this,"encodingName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"allowedSpecial",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"disallowedSpecial",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tokenizer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.encodingName=e?.encodingName??"gpt2",this.allowedSpecial=e?.allowedSpecial??[],this.disallowedSpecial=e?.disallowedSpecial??"all"}async splitText(e){this.tokenizer||(this.tokenizer=await qu(this.encodingName));let r=[],n=this.tokenizer.encode(e,this.allowedSpecial,this.disallowedSpecial),i=0,a=Math.min(i+this.chunkSize,n.length),s=n.slice(i,a);for(;i<n.length;)r.push(this.tokenizer.decode(s)),i+=this.chunkSize-this.chunkOverlap,a=Math.min(i+this.chunkSize,n.length),s=n.slice(i,a);return r}};Ue();Fe();Ul();Fe();_e();_n();_n();nt();Ji();Wr();_e();Ue();Fe();Hn();Ue();Fl();Hn();Fe();Wr();_e();var ox=`Write a concise summary of the following:


"{text}"


CONCISE SUMMARY:`,Wi=new ee({template:ox,inputVariables:["text"]});_e();var ux=`Your job is to produce a final summary
We have provided an existing summary up to a certain point: "{existing_answer}"
We have the opportunity to refine the existing summary
(only if needed) with some more context below.
------------
"{text}"
------------

Given the new context, refine the original summary
If the context isn't useful, return the original summary.

REFINED SUMMARY:`,Lm=new ee({template:ux,inputVariables:["existing_answer","text"]});var Vl=(t,e={type:"map_reduce"})=>{let{verbose:r}=e;if(e.type==="stuff"){let{prompt:n=Wi}=e,i=new ie({prompt:n,llm:t,verbose:r});return new lt({llmChain:i,documentVariableName:"text",verbose:r})}if(e.type==="map_reduce"){let{combineMapPrompt:n=Wi,combinePrompt:i=Wi,returnIntermediateSteps:a}=e,s=new ie({prompt:n,llm:t,verbose:r}),o=new ie({prompt:i,llm:t,verbose:r}),u=new lt({llmChain:o,documentVariableName:"text",verbose:r});return new $t({llmChain:s,combineDocumentChain:u,documentVariableName:"text",returnIntermediateSteps:a,verbose:r})}if(e.type==="refine"){let{refinePrompt:n=Lm,questionPrompt:i=Wi}=e,a=new ie({prompt:i,llm:t,verbose:r}),s=new ie({prompt:n,llm:t,verbose:r});return new It({llmChain:a,refineLLMChain:s,documentVariableName:"text",verbose:r})}throw new Error(`Invalid _type: ${e.type}`)};_e();nt();Ue();Fe();Hn();Ue();Hn();var Wn=class extends oe{get inputKeys(){return[this.inputKey]}get outputKeys(){return this.combineDocumentsChain.outputKeys.concat(this.returnSourceDocuments?["sourceDocuments"]:[])}constructor(e){super(e),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"query"}),Object.defineProperty(this,"retriever",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"combineDocumentsChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSourceDocuments",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.retriever=e.retriever,this.combineDocumentsChain=e.combineDocumentsChain,this.inputKey=e.inputKey??this.inputKey,this.returnSourceDocuments=e.returnSourceDocuments??this.returnSourceDocuments}async _call(e,r){if(!(this.inputKey in e))throw new Error(`Question key "${this.inputKey}" not found.`);let n=e[this.inputKey],i=await this.retriever.getRelevantDocuments(n,r?.getChild("retriever")),a={question:n,input_documents:i},s=await this.combineDocumentsChain.call(a,r?.getChild("combine_documents"));return this.returnSourceDocuments?{...s,sourceDocuments:i}:s}_chainType(){return"retrieval_qa"}static async deserialize(e,r){throw new Error("Not implemented")}serialize(){throw new Error("Not implemented")}static fromLLM(e,r,n){let i=Zn(e,{prompt:n?.prompt});return new this({...n,retriever:r,combineDocumentsChain:i})}};Ue();Fe();Xa();_e();var Dm=ge(an(),1);Ue();pn();bi();kt();Ue();Fe();En();Fe();_e();var hx=ge(Mi(),1);$i();$i();En();_e();Ue();var yx=ge(Mi(),1);_e();$i();Fe();var bx=ge(Mi(),1);_e();Fe();function ry(t){return typeof t>"u"||t===null}function wx(t){return typeof t=="object"&&t!==null}function _x(t){return Array.isArray(t)?t:ry(t)?[]:[t]}function vx(t,e){var r,n,i,a;if(e)for(a=Object.keys(e),r=0,n=a.length;r<n;r+=1)i=a[r],t[i]=e[i];return t}function xx(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function Ox(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var Ax=ry,Px=wx,Ex=_x,Tx=xx,Ix=Ox,Cx=vx,Ae={isNothing:Ax,isObject:Px,toArray:Ex,repeat:Tx,isNegativeZero:Ix,extend:Cx};function ny(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function Qi(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=ny(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Qi.prototype=Object.create(Error.prototype);Qi.prototype.constructor=Qi;Qi.prototype.toString=function(e){return this.name+": "+ny(this,e)};var Ye=Qi;function zl(t,e,r,n,i){var a="",s="",o=Math.floor(i/2)-1;return n-e>o&&(a=" ... ",e=n-o+a.length),r-n>o&&(s=" ...",r=n+o-s.length),{str:a+t.slice(e,r).replace(/\t/g,"\u2192")+s,pos:n-e+a.length}}function Bl(t,e){return Ae.repeat(" ",e-t.length)+t}function Sx(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],a,s=-1;a=r.exec(t.buffer);)i.push(a.index),n.push(a.index+a[0].length),t.position<=a.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var o="",u,l,c=Math.min(t.line+e.linesAfter,i.length).toString().length,d=e.maxLength-(e.indent+c+3);for(u=1;u<=e.linesBefore&&!(s-u<0);u++)l=zl(t.buffer,n[s-u],i[s-u],t.position-(n[s]-n[s-u]),d),o=Ae.repeat(" ",e.indent)+Bl((t.line-u+1).toString(),c)+" | "+l.str+`
`+o;for(l=zl(t.buffer,n[s],i[s],t.position,d),o+=Ae.repeat(" ",e.indent)+Bl((t.line+1).toString(),c)+" | "+l.str+`
`,o+=Ae.repeat("-",e.indent+c+3+l.pos)+`^
`,u=1;u<=e.linesAfter&&!(s+u>=i.length);u++)l=zl(t.buffer,n[s+u],i[s+u],t.position-(n[s]-n[s+u]),d),o+=Ae.repeat(" ",e.indent)+Bl((t.line+u+1).toString(),c)+" | "+l.str+`
`;return o.replace(/\n$/,"")}var jx=Sx,kx=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Rx=["scalar","sequence","mapping"];function Nx(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function Mx(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(kx.indexOf(r)===-1)throw new Ye('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=Nx(e.styleAliases||null),Rx.indexOf(this.kind)===-1)throw new Ye('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Ve=Mx;function Vm(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(a,s){a.tag===n.tag&&a.kind===n.kind&&a.multi===n.multi&&(i=s)}),r[i]=n}),r}function Lx(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function $l(t){return this.extend(t)}$l.prototype.extend=function(e){var r=[],n=[];if(e instanceof Ve)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new Ye("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(a){if(!(a instanceof Ve))throw new Ye("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(a.loadKind&&a.loadKind!=="scalar")throw new Ye("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(a.multi)throw new Ye("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(a){if(!(a instanceof Ve))throw new Ye("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create($l.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=Vm(i,"implicit"),i.compiledExplicit=Vm(i,"explicit"),i.compiledTypeMap=Lx(i.compiledImplicit,i.compiledExplicit),i};var Dx=$l,qx=new Ve("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),Fx=new Ve("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),Ux=new Ve("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),Vx=new Dx({explicit:[qx,Fx,Ux]});function zx(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function Bx(){return null}function Kx(t){return t===null}var $x=new Ve("tag:yaml.org,2002:null",{kind:"scalar",resolve:zx,construct:Bx,predicate:Kx,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Zx(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function Hx(t){return t==="true"||t==="True"||t==="TRUE"}function Jx(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var Yx=new Ve("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Zx,construct:Hx,predicate:Jx,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function Wx(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function Gx(t){return 48<=t&&t<=55}function Qx(t){return 48<=t&&t<=57}function Xx(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!Wx(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!Gx(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!Qx(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function eO(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function tO(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Ae.isNegativeZero(t)}var rO=new Ve("tag:yaml.org,2002:int",{kind:"scalar",resolve:Xx,construct:eO,predicate:tO,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),nO=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function iO(t){return!(t===null||!nO.test(t)||t[t.length-1]==="_")}function aO(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var sO=/^[-+]?[0-9]+e/;function oO(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Ae.isNegativeZero(t))return"-0.0";return r=t.toString(10),sO.test(r)?r.replace("e",".e"):r}function uO(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Ae.isNegativeZero(t))}var lO=new Ve("tag:yaml.org,2002:float",{kind:"scalar",resolve:iO,construct:aO,predicate:uO,represent:oO,defaultStyle:"lowercase"}),cO=Vx.extend({implicit:[$x,Yx,rO,lO]}),dO=cO,iy=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),ay=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function pO(t){return t===null?!1:iy.exec(t)!==null||ay.exec(t)!==null}function hO(t){var e,r,n,i,a,s,o,u=0,l=null,c,d,y;if(e=iy.exec(t),e===null&&(e=ay.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(a=+e[4],s=+e[5],o=+e[6],e[7]){for(u=e[7].slice(0,3);u.length<3;)u+="0";u=+u}return e[9]&&(c=+e[10],d=+(e[11]||0),l=(c*60+d)*6e4,e[9]==="-"&&(l=-l)),y=new Date(Date.UTC(r,n,i,a,s,o,u)),l&&y.setTime(y.getTime()-l),y}function fO(t){return t.toISOString()}var mO=new Ve("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:pO,construct:hO,instanceOf:Date,represent:fO});function yO(t){return t==="<<"||t===null}var gO=new Ve("tag:yaml.org,2002:merge",{kind:"scalar",resolve:yO}),Wl=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function bO(t){if(t===null)return!1;var e,r,n=0,i=t.length,a=Wl;for(r=0;r<i;r++)if(e=a.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function wO(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,a=Wl,s=0,o=[];for(e=0;e<i;e++)e%4===0&&e&&(o.push(s>>16&255),o.push(s>>8&255),o.push(s&255)),s=s<<6|a.indexOf(n.charAt(e));return r=i%4*6,r===0?(o.push(s>>16&255),o.push(s>>8&255),o.push(s&255)):r===18?(o.push(s>>10&255),o.push(s>>2&255)):r===12&&o.push(s>>4&255),new Uint8Array(o)}function _O(t){var e="",r=0,n,i,a=t.length,s=Wl;for(n=0;n<a;n++)n%3===0&&n&&(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]),r=(r<<8)+t[n];return i=a%3,i===0?(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]):i===2?(e+=s[r>>10&63],e+=s[r>>4&63],e+=s[r<<2&63],e+=s[64]):i===1&&(e+=s[r>>2&63],e+=s[r<<4&63],e+=s[64],e+=s[64]),e}function vO(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var xO=new Ve("tag:yaml.org,2002:binary",{kind:"scalar",resolve:bO,construct:wO,predicate:vO,represent:_O}),OO=Object.prototype.hasOwnProperty,AO=Object.prototype.toString;function PO(t){if(t===null)return!0;var e=[],r,n,i,a,s,o=t;for(r=0,n=o.length;r<n;r+=1){if(i=o[r],s=!1,AO.call(i)!=="[object Object]")return!1;for(a in i)if(OO.call(i,a))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(a)===-1)e.push(a);else return!1}return!0}function EO(t){return t!==null?t:[]}var TO=new Ve("tag:yaml.org,2002:omap",{kind:"sequence",resolve:PO,construct:EO}),IO=Object.prototype.toString;function CO(t){if(t===null)return!0;var e,r,n,i,a,s=t;for(a=new Array(s.length),e=0,r=s.length;e<r;e+=1){if(n=s[e],IO.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;a[e]=[i[0],n[i[0]]]}return!0}function SO(t){if(t===null)return[];var e,r,n,i,a,s=t;for(a=new Array(s.length),e=0,r=s.length;e<r;e+=1)n=s[e],i=Object.keys(n),a[e]=[i[0],n[i[0]]];return a}var jO=new Ve("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:CO,construct:SO}),kO=Object.prototype.hasOwnProperty;function RO(t){if(t===null)return!0;var e,r=t;for(e in r)if(kO.call(r,e)&&r[e]!==null)return!1;return!0}function NO(t){return t!==null?t:{}}var MO=new Ve("tag:yaml.org,2002:set",{kind:"mapping",resolve:RO,construct:NO}),sy=dO.extend({implicit:[mO,gO],explicit:[xO,TO,jO,MO]}),mr=Object.prototype.hasOwnProperty,po=1,oy=2,uy=3,ho=4,Kl=1,LO=2,zm=3,DO=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,qO=/[\x85\u2028\u2029]/,FO=/[,\[\]\{\}]/,ly=/^(?:!|!!|![a-z\-]+!)$/i,cy=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Bm(t){return Object.prototype.toString.call(t)}function Ct(t){return t===10||t===13}function Xr(t){return t===9||t===32}function We(t){return t===9||t===32||t===10||t===13}function Qn(t){return t===44||t===91||t===93||t===123||t===125}function UO(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function VO(t){return t===120?2:t===117?4:t===85?8:0}function zO(t){return 48<=t&&t<=57?t-48:-1}function Km(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function BO(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var dy=new Array(256),py=new Array(256);for(Qr=0;Qr<256;Qr++)dy[Qr]=Km(Qr)?1:0,py[Qr]=Km(Qr);var Qr;function KO(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||sy,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function hy(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=jx(r),new Ye(e,r)}function K(t,e){throw hy(t,e)}function fo(t,e){t.onWarning&&t.onWarning.call(null,hy(t,e))}var $m={YAML:function(e,r,n){var i,a,s;e.version!==null&&K(e,"duplication of %YAML directive"),n.length!==1&&K(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&K(e,"ill-formed argument of the YAML directive"),a=parseInt(i[1],10),s=parseInt(i[2],10),a!==1&&K(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=s<2,s!==1&&s!==2&&fo(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,a;n.length!==2&&K(e,"TAG directive accepts exactly two arguments"),i=n[0],a=n[1],ly.test(i)||K(e,"ill-formed tag handle (first argument) of the TAG directive"),mr.call(e.tagMap,i)&&K(e,'there is a previously declared suffix for "'+i+'" tag handle'),cy.test(a)||K(e,"ill-formed tag prefix (second argument) of the TAG directive");try{a=decodeURIComponent(a)}catch{K(e,"tag prefix is malformed: "+a)}e.tagMap[i]=a}};function fr(t,e,r,n){var i,a,s,o;if(e<r){if(o=t.input.slice(e,r),n)for(i=0,a=o.length;i<a;i+=1)s=o.charCodeAt(i),s===9||32<=s&&s<=1114111||K(t,"expected valid JSON character");else DO.test(o)&&K(t,"the stream contains non-printable characters");t.result+=o}}function Zm(t,e,r,n){var i,a,s,o;for(Ae.isObject(r)||K(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),s=0,o=i.length;s<o;s+=1)a=i[s],mr.call(e,a)||(e[a]=r[a],n[a]=!0)}function Xn(t,e,r,n,i,a,s,o,u){var l,c;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),l=0,c=i.length;l<c;l+=1)Array.isArray(i[l])&&K(t,"nested arrays are not supported inside keys"),typeof i=="object"&&Bm(i[l])==="[object Object]"&&(i[l]="[object Object]");if(typeof i=="object"&&Bm(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(a))for(l=0,c=a.length;l<c;l+=1)Zm(t,e,a[l],r);else Zm(t,e,a,r);else!t.json&&!mr.call(r,i)&&mr.call(e,i)&&(t.line=s||t.line,t.lineStart=o||t.lineStart,t.position=u||t.position,K(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:a}):e[i]=a,delete r[i];return e}function Gl(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):K(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function ve(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;Xr(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(Ct(i))for(Gl(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&fo(t,"deficient indentation"),n}function go(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||We(r)))}function Ql(t,e){e===1?t.result+=" ":e>1&&(t.result+=Ae.repeat(`
`,e-1))}function $O(t,e,r){var n,i,a,s,o,u,l,c,d=t.kind,y=t.result,w;if(w=t.input.charCodeAt(t.position),We(w)||Qn(w)||w===35||w===38||w===42||w===33||w===124||w===62||w===39||w===34||w===37||w===64||w===96||(w===63||w===45)&&(i=t.input.charCodeAt(t.position+1),We(i)||r&&Qn(i)))return!1;for(t.kind="scalar",t.result="",a=s=t.position,o=!1;w!==0;){if(w===58){if(i=t.input.charCodeAt(t.position+1),We(i)||r&&Qn(i))break}else if(w===35){if(n=t.input.charCodeAt(t.position-1),We(n))break}else{if(t.position===t.lineStart&&go(t)||r&&Qn(w))break;if(Ct(w))if(u=t.line,l=t.lineStart,c=t.lineIndent,ve(t,!1,-1),t.lineIndent>=e){o=!0,w=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=u,t.lineStart=l,t.lineIndent=c;break}}o&&(fr(t,a,s,!1),Ql(t,t.line-u),a=s=t.position,o=!1),Xr(w)||(s=t.position+1),w=t.input.charCodeAt(++t.position)}return fr(t,a,s,!1),t.result?!0:(t.kind=d,t.result=y,!1)}function ZO(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(fr(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else Ct(r)?(fr(t,n,i,!0),Ql(t,ve(t,!1,e)),n=i=t.position):t.position===t.lineStart&&go(t)?K(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);K(t,"unexpected end of the stream within a single quoted scalar")}function HO(t,e){var r,n,i,a,s,o;if(o=t.input.charCodeAt(t.position),o!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(o=t.input.charCodeAt(t.position))!==0;){if(o===34)return fr(t,r,t.position,!0),t.position++,!0;if(o===92){if(fr(t,r,t.position,!0),o=t.input.charCodeAt(++t.position),Ct(o))ve(t,!1,e);else if(o<256&&dy[o])t.result+=py[o],t.position++;else if((s=VO(o))>0){for(i=s,a=0;i>0;i--)o=t.input.charCodeAt(++t.position),(s=UO(o))>=0?a=(a<<4)+s:K(t,"expected hexadecimal character");t.result+=BO(a),t.position++}else K(t,"unknown escape sequence");r=n=t.position}else Ct(o)?(fr(t,r,n,!0),Ql(t,ve(t,!1,e)),r=n=t.position):t.position===t.lineStart&&go(t)?K(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}K(t,"unexpected end of the stream within a double quoted scalar")}function JO(t,e){var r=!0,n,i,a,s=t.tag,o,u=t.anchor,l,c,d,y,w,h=Object.create(null),_,P,S,I;if(I=t.input.charCodeAt(t.position),I===91)c=93,w=!1,o=[];else if(I===123)c=125,w=!0,o={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),I=t.input.charCodeAt(++t.position);I!==0;){if(ve(t,!0,e),I=t.input.charCodeAt(t.position),I===c)return t.position++,t.tag=s,t.anchor=u,t.kind=w?"mapping":"sequence",t.result=o,!0;r?I===44&&K(t,"expected the node content, but found ','"):K(t,"missed comma between flow collection entries"),P=_=S=null,d=y=!1,I===63&&(l=t.input.charCodeAt(t.position+1),We(l)&&(d=y=!0,t.position++,ve(t,!0,e))),n=t.line,i=t.lineStart,a=t.position,ei(t,e,po,!1,!0),P=t.tag,_=t.result,ve(t,!0,e),I=t.input.charCodeAt(t.position),(y||t.line===n)&&I===58&&(d=!0,I=t.input.charCodeAt(++t.position),ve(t,!0,e),ei(t,e,po,!1,!0),S=t.result),w?Xn(t,o,h,P,_,S,n,i,a):d?o.push(Xn(t,null,h,P,_,S,n,i,a)):o.push(_),ve(t,!0,e),I=t.input.charCodeAt(t.position),I===44?(r=!0,I=t.input.charCodeAt(++t.position)):r=!1}K(t,"unexpected end of the stream within a flow collection")}function YO(t,e){var r,n,i=Kl,a=!1,s=!1,o=e,u=0,l=!1,c,d;if(d=t.input.charCodeAt(t.position),d===124)n=!1;else if(d===62)n=!0;else return!1;for(t.kind="scalar",t.result="";d!==0;)if(d=t.input.charCodeAt(++t.position),d===43||d===45)Kl===i?i=d===43?zm:LO:K(t,"repeat of a chomping mode identifier");else if((c=zO(d))>=0)c===0?K(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?K(t,"repeat of an indentation width identifier"):(o=e+c-1,s=!0);else break;if(Xr(d)){do d=t.input.charCodeAt(++t.position);while(Xr(d));if(d===35)do d=t.input.charCodeAt(++t.position);while(!Ct(d)&&d!==0)}for(;d!==0;){for(Gl(t),t.lineIndent=0,d=t.input.charCodeAt(t.position);(!s||t.lineIndent<o)&&d===32;)t.lineIndent++,d=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>o&&(o=t.lineIndent),Ct(d)){u++;continue}if(t.lineIndent<o){i===zm?t.result+=Ae.repeat(`
`,a?1+u:u):i===Kl&&a&&(t.result+=`
`);break}for(n?Xr(d)?(l=!0,t.result+=Ae.repeat(`
`,a?1+u:u)):l?(l=!1,t.result+=Ae.repeat(`
`,u+1)):u===0?a&&(t.result+=" "):t.result+=Ae.repeat(`
`,u):t.result+=Ae.repeat(`
`,a?1+u:u),a=!0,s=!0,u=0,r=t.position;!Ct(d)&&d!==0;)d=t.input.charCodeAt(++t.position);fr(t,r,t.position,!1)}return!0}function Hm(t,e){var r,n=t.tag,i=t.anchor,a=[],s,o=!1,u;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=a),u=t.input.charCodeAt(t.position);u!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,K(t,"tab characters must not be used in indentation")),!(u!==45||(s=t.input.charCodeAt(t.position+1),!We(s))));){if(o=!0,t.position++,ve(t,!0,-1)&&t.lineIndent<=e){a.push(null),u=t.input.charCodeAt(t.position);continue}if(r=t.line,ei(t,e,uy,!1,!0),a.push(t.result),ve(t,!0,-1),u=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&u!==0)K(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return o?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=a,!0):!1}function WO(t,e,r){var n,i,a,s,o,u,l=t.tag,c=t.anchor,d={},y=Object.create(null),w=null,h=null,_=null,P=!1,S=!1,I;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=d),I=t.input.charCodeAt(t.position);I!==0;){if(!P&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,K(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),a=t.line,(I===63||I===58)&&We(n))I===63?(P&&(Xn(t,d,y,w,h,null,s,o,u),w=h=_=null),S=!0,P=!0,i=!0):P?(P=!1,i=!0):K(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,I=n;else{if(s=t.line,o=t.lineStart,u=t.position,!ei(t,r,oy,!1,!0))break;if(t.line===a){for(I=t.input.charCodeAt(t.position);Xr(I);)I=t.input.charCodeAt(++t.position);if(I===58)I=t.input.charCodeAt(++t.position),We(I)||K(t,"a whitespace character is expected after the key-value separator within a block mapping"),P&&(Xn(t,d,y,w,h,null,s,o,u),w=h=_=null),S=!0,P=!1,i=!1,w=t.tag,h=t.result;else if(S)K(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=l,t.anchor=c,!0}else if(S)K(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=l,t.anchor=c,!0}if((t.line===a||t.lineIndent>e)&&(P&&(s=t.line,o=t.lineStart,u=t.position),ei(t,e,ho,!0,i)&&(P?h=t.result:_=t.result),P||(Xn(t,d,y,w,h,_,s,o,u),w=h=_=null),ve(t,!0,-1),I=t.input.charCodeAt(t.position)),(t.line===a||t.lineIndent>e)&&I!==0)K(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return P&&Xn(t,d,y,w,h,null,s,o,u),S&&(t.tag=l,t.anchor=c,t.kind="mapping",t.result=d),S}function GO(t){var e,r=!1,n=!1,i,a,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&K(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(r=!0,s=t.input.charCodeAt(++t.position)):s===33?(n=!0,i="!!",s=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(a=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):K(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!We(s);)s===33&&(n?K(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),ly.test(i)||K(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);a=t.input.slice(e,t.position),FO.test(a)&&K(t,"tag suffix cannot contain flow indicator characters")}a&&!cy.test(a)&&K(t,"tag name cannot contain such characters: "+a);try{a=decodeURIComponent(a)}catch{K(t,"tag name is malformed: "+a)}return r?t.tag=a:mr.call(t.tagMap,i)?t.tag=t.tagMap[i]+a:i==="!"?t.tag="!"+a:i==="!!"?t.tag="tag:yaml.org,2002:"+a:K(t,'undeclared tag handle "'+i+'"'),!0}function QO(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&K(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!We(r)&&!Qn(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&K(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function XO(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!We(n)&&!Qn(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&K(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),mr.call(t.anchorMap,r)||K(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],ve(t,!0,-1),!0}function ei(t,e,r,n,i){var a,s,o,u=1,l=!1,c=!1,d,y,w,h,_,P;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,a=s=o=ho===r||uy===r,n&&ve(t,!0,-1)&&(l=!0,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)),u===1)for(;GO(t)||QO(t);)ve(t,!0,-1)?(l=!0,o=a,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)):o=!1;if(o&&(o=l||i),(u===1||ho===r)&&(po===r||oy===r?_=e:_=e+1,P=t.position-t.lineStart,u===1?o&&(Hm(t,P)||WO(t,P,_))||JO(t,_)?c=!0:(s&&YO(t,_)||ZO(t,_)||HO(t,_)?c=!0:XO(t)?(c=!0,(t.tag!==null||t.anchor!==null)&&K(t,"alias node should not have any properties")):$O(t,_,po===r)&&(c=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):u===0&&(c=o&&Hm(t,P))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&K(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),d=0,y=t.implicitTypes.length;d<y;d+=1)if(h=t.implicitTypes[d],h.resolve(t.result)){t.result=h.construct(t.result),t.tag=h.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(mr.call(t.typeMap[t.kind||"fallback"],t.tag))h=t.typeMap[t.kind||"fallback"][t.tag];else for(h=null,w=t.typeMap.multi[t.kind||"fallback"],d=0,y=w.length;d<y;d+=1)if(t.tag.slice(0,w[d].tag.length)===w[d].tag){h=w[d];break}h||K(t,"unknown tag !<"+t.tag+">"),t.result!==null&&h.kind!==t.kind&&K(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+h.kind+'", not "'+t.kind+'"'),h.resolve(t.result,t.tag)?(t.result=h.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):K(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||c}function eA(t){var e=t.position,r,n,i,a=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(ve(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(a=!0,s=t.input.charCodeAt(++t.position),r=t.position;s!==0&&!We(s);)s=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&K(t,"directive name must not be less than one character in length");s!==0;){for(;Xr(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!Ct(s));break}if(Ct(s))break;for(r=t.position;s!==0&&!We(s);)s=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}s!==0&&Gl(t),mr.call($m,n)?$m[n](t,n,i):fo(t,'unknown document directive "'+n+'"')}if(ve(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,ve(t,!0,-1)):a&&K(t,"directives end mark is expected"),ei(t,t.lineIndent-1,ho,!1,!0),ve(t,!0,-1),t.checkLineBreaks&&qO.test(t.input.slice(e,t.position))&&fo(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&go(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,ve(t,!0,-1));return}if(t.position<t.length-1)K(t,"end of the stream or a document separator is expected");else return}function fy(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new KO(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,K(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)eA(r);return r.documents}function tA(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=fy(t,r);if(typeof e!="function")return n;for(var i=0,a=n.length;i<a;i+=1)e(n[i])}function rA(t,e){var r=fy(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new Ye("expected a single document in the stream, but found more")}}var nA=tA,iA=rA,my={loadAll:nA,load:iA},yy=Object.prototype.toString,gy=Object.prototype.hasOwnProperty,Xl=65279,aA=9,Xi=10,sA=13,oA=32,uA=33,lA=34,Zl=35,cA=37,dA=38,pA=39,hA=42,by=44,fA=45,mo=58,mA=61,yA=62,gA=63,bA=64,wy=91,_y=93,wA=96,vy=123,_A=124,xy=125,ze={};ze[0]="\\0";ze[7]="\\a";ze[8]="\\b";ze[9]="\\t";ze[10]="\\n";ze[11]="\\v";ze[12]="\\f";ze[13]="\\r";ze[27]="\\e";ze[34]='\\"';ze[92]="\\\\";ze[133]="\\N";ze[160]="\\_";ze[8232]="\\L";ze[8233]="\\P";var vA=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],xA=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function OA(t,e){var r,n,i,a,s,o,u;if(e===null)return{};for(r={},n=Object.keys(e),i=0,a=n.length;i<a;i+=1)s=n[i],o=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),u=t.compiledTypeMap.fallback[s],u&&gy.call(u.styleAliases,o)&&(o=u.styleAliases[o]),r[s]=o;return r}function AA(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new Ye("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Ae.repeat("0",n-e.length)+e}var PA=1,ea=2;function EA(t){this.schema=t.schema||sy,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Ae.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=OA(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?ea:PA,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Jm(t,e){for(var r=Ae.repeat(" ",e),n=0,i=-1,a="",s,o=t.length;n<o;)i=t.indexOf(`
`,n),i===-1?(s=t.slice(n),n=o):(s=t.slice(n,i+1),n=i+1),s.length&&s!==`
`&&(a+=r),a+=s;return a}function Hl(t,e){return`
`+Ae.repeat(" ",t.indent*e)}function TA(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function yo(t){return t===oA||t===aA}function ta(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==Xl||65536<=t&&t<=1114111}function Ym(t){return ta(t)&&t!==Xl&&t!==sA&&t!==Xi}function Wm(t,e,r){var n=Ym(t),i=n&&!yo(t);return(r?n:n&&t!==by&&t!==wy&&t!==_y&&t!==vy&&t!==xy)&&t!==Zl&&!(e===mo&&!i)||Ym(e)&&!yo(e)&&t===Zl||e===mo&&i}function IA(t){return ta(t)&&t!==Xl&&!yo(t)&&t!==fA&&t!==gA&&t!==mo&&t!==by&&t!==wy&&t!==_y&&t!==vy&&t!==xy&&t!==Zl&&t!==dA&&t!==hA&&t!==uA&&t!==_A&&t!==mA&&t!==yA&&t!==pA&&t!==lA&&t!==cA&&t!==bA&&t!==wA}function CA(t){return!yo(t)&&t!==mo}function Gi(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function Oy(t){var e=/^\n* /;return e.test(t)}var Ay=1,Jl=2,Py=3,Ey=4,Gn=5;function SA(t,e,r,n,i,a,s,o){var u,l=0,c=null,d=!1,y=!1,w=n!==-1,h=-1,_=IA(Gi(t,0))&&CA(Gi(t,t.length-1));if(e||s)for(u=0;u<t.length;l>=65536?u+=2:u++){if(l=Gi(t,u),!ta(l))return Gn;_=_&&Wm(l,c,o),c=l}else{for(u=0;u<t.length;l>=65536?u+=2:u++){if(l=Gi(t,u),l===Xi)d=!0,w&&(y=y||u-h-1>n&&t[h+1]!==" ",h=u);else if(!ta(l))return Gn;_=_&&Wm(l,c,o),c=l}y=y||w&&u-h-1>n&&t[h+1]!==" "}return!d&&!y?_&&!s&&!i(t)?Ay:a===ea?Gn:Jl:r>9&&Oy(t)?Gn:s?a===ea?Gn:Jl:y?Ey:Py}function jA(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===ea?'""':"''";if(!t.noCompatMode&&(vA.indexOf(e)!==-1||xA.test(e)))return t.quotingType===ea?'"'+e+'"':"'"+e+"'";var a=t.indent*Math.max(1,r),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-a),o=n||t.flowLevel>-1&&r>=t.flowLevel;function u(l){return TA(t,l)}switch(SA(e,o,t.indent,s,u,t.quotingType,t.forceQuotes&&!n,i)){case Ay:return e;case Jl:return"'"+e.replace(/'/g,"''")+"'";case Py:return"|"+Gm(e,t.indent)+Qm(Jm(e,a));case Ey:return">"+Gm(e,t.indent)+Qm(Jm(kA(e,s),a));case Gn:return'"'+RA(e)+'"';default:throw new Ye("impossible error: invalid scalar style")}}()}function Gm(t,e){var r=Oy(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),a=i?"+":n?"":"-";return r+a+`
`}function Qm(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function kA(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var l=t.indexOf(`
`);return l=l!==-1?l:t.length,r.lastIndex=l,Xm(t.slice(0,l),e)}(),i=t[0]===`
`||t[0]===" ",a,s;s=r.exec(t);){var o=s[1],u=s[2];a=u[0]===" ",n+=o+(!i&&!a&&u!==""?`
`:"")+Xm(u,e),i=a}return n}function Xm(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,a,s=0,o=0,u="";n=r.exec(t);)o=n.index,o-i>e&&(a=s>i?s:o,u+=`
`+t.slice(i,a),i=a+1),s=o;return u+=`
`,t.length-i>e&&s>i?u+=t.slice(i,s)+`
`+t.slice(s+1):u+=t.slice(i),u.slice(1)}function RA(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=Gi(t,i),n=ze[r],!n&&ta(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||AA(r);return e}function NA(t,e,r){var n="",i=t.tag,a,s,o;for(a=0,s=r.length;a<s;a+=1)o=r[a],t.replacer&&(o=t.replacer.call(r,String(a),o)),(Ht(t,e,o,!1,!1)||typeof o>"u"&&Ht(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function ey(t,e,r,n){var i="",a=t.tag,s,o,u;for(s=0,o=r.length;s<o;s+=1)u=r[s],t.replacer&&(u=t.replacer.call(r,String(s),u)),(Ht(t,e+1,u,!0,!0,!1,!0)||typeof u>"u"&&Ht(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=Hl(t,e)),t.dump&&Xi===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=a,t.dump=i||"[]"}function MA(t,e,r){var n="",i=t.tag,a=Object.keys(r),s,o,u,l,c;for(s=0,o=a.length;s<o;s+=1)c="",n!==""&&(c+=", "),t.condenseFlow&&(c+='"'),u=a[s],l=r[u],t.replacer&&(l=t.replacer.call(r,u,l)),Ht(t,e,u,!1,!1)&&(t.dump.length>1024&&(c+="? "),c+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),Ht(t,e,l,!1,!1)&&(c+=t.dump,n+=c));t.tag=i,t.dump="{"+n+"}"}function LA(t,e,r,n){var i="",a=t.tag,s=Object.keys(r),o,u,l,c,d,y;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new Ye("sortKeys must be a boolean or a function");for(o=0,u=s.length;o<u;o+=1)y="",(!n||i!=="")&&(y+=Hl(t,e)),l=s[o],c=r[l],t.replacer&&(c=t.replacer.call(r,l,c)),Ht(t,e+1,l,!0,!0,!0)&&(d=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,d&&(t.dump&&Xi===t.dump.charCodeAt(0)?y+="?":y+="? "),y+=t.dump,d&&(y+=Hl(t,e)),Ht(t,e+1,c,!0,d)&&(t.dump&&Xi===t.dump.charCodeAt(0)?y+=":":y+=": ",y+=t.dump,i+=y));t.tag=a,t.dump=i||"{}"}function ty(t,e,r){var n,i,a,s,o,u;for(i=r?t.explicitTypes:t.implicitTypes,a=0,s=i.length;a<s;a+=1)if(o=i[a],(o.instanceOf||o.predicate)&&(!o.instanceOf||typeof e=="object"&&e instanceof o.instanceOf)&&(!o.predicate||o.predicate(e))){if(r?o.multi&&o.representName?t.tag=o.representName(e):t.tag=o.tag:t.tag="?",o.represent){if(u=t.styleMap[o.tag]||o.defaultStyle,yy.call(o.represent)==="[object Function]")n=o.represent(e,u);else if(gy.call(o.represent,u))n=o.represent[u](e,u);else throw new Ye("!<"+o.tag+'> tag resolver accepts not "'+u+'" style');t.dump=n}return!0}return!1}function Ht(t,e,r,n,i,a,s){t.tag=null,t.dump=r,ty(t,r,!1)||ty(t,r,!0);var o=yy.call(t.dump),u=n,l;n&&(n=t.flowLevel<0||t.flowLevel>e);var c=o==="[object Object]"||o==="[object Array]",d,y;if(c&&(d=t.duplicates.indexOf(r),y=d!==-1),(t.tag!==null&&t.tag!=="?"||y||t.indent!==2&&e>0)&&(i=!1),y&&t.usedDuplicates[d])t.dump="*ref_"+d;else{if(c&&y&&!t.usedDuplicates[d]&&(t.usedDuplicates[d]=!0),o==="[object Object]")n&&Object.keys(t.dump).length!==0?(LA(t,e,t.dump,i),y&&(t.dump="&ref_"+d+t.dump)):(MA(t,e,t.dump),y&&(t.dump="&ref_"+d+" "+t.dump));else if(o==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!s&&e>0?ey(t,e-1,t.dump,i):ey(t,e,t.dump,i),y&&(t.dump="&ref_"+d+t.dump)):(NA(t,e,t.dump),y&&(t.dump="&ref_"+d+" "+t.dump));else if(o==="[object String]")t.tag!=="?"&&jA(t,t.dump,e,a,u);else{if(o==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new Ye("unacceptable kind of an object to dump "+o)}t.tag!==null&&t.tag!=="?"&&(l=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?l="!"+l:l.slice(0,18)==="tag:yaml.org,2002:"?l="!!"+l.slice(18):l="!<"+l+">",t.dump=l+" "+t.dump)}return!0}function DA(t,e){var r=[],n=[],i,a;for(Yl(t,r,n),i=0,a=n.length;i<a;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(a)}function Yl(t,e,r){var n,i,a;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,a=t.length;i<a;i+=1)Yl(t[i],e,r);else for(n=Object.keys(t),i=0,a=n.length;i<a;i+=1)Yl(t[n[i]],e,r)}function qA(t,e){e=e||{};var r=new EA(e);r.noRefs||DA(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),Ht(r,0,n,!0,!0)?r.dump+`
`:""}var FA=qA,UA={dump:FA};function ec(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var VA=my.load,s2=my.loadAll,o2=UA.dump;var u2=ec("safeLoad","load"),l2=ec("safeLoadAll","loadAll"),c2=ec("safeDump","dump");Ue();Fe();_l();kr();Ji();globalThis.langchain={OpenAI:Bn,MemoryVectorStore:Kn,OpenAIEmbeddings:no,RetrievalQAChain:Wn,loadSummarizationChain:Vl,loadQARefineChain:ql,TokenTextSplitter:so};})();
